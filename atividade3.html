<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Atividade 3</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ciência Colaborativa</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="aulas.html">
    <span class="fas fa-book"></span>
     
    Aulas
  </a>
</li>
<li>
  <a href="materiais.html">
    <span class="fa fa-folder fa-lg"></span>
     
    Materiais
  </a>
</li>
<li>
  <a href="atividades.html">
    <span class="fas fa-chart-bar"></span>
     
    Atividades
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cammcordeiro/ciencia_colab">
    <span class="fab fa-github"></span>
     
    GitHub Repo
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<style>
body {
text-align: justify}
</style>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<div id="atividade-3" class="section level1 unnumbered">
<h1 class="unnumbered">Atividade 3</h1>
<div id="acesso-a-bancos-de-dados-abertos" class="section level2"
number="3.1">
<h2><span class="header-section-number">3.1</span> Acesso a bancos de
dados abertos</h2>
<p>O acesso pode ser feito de diferentes formas, seja diretamente no
website do repositório, utilizando-se pacotes específicos que acessam os
repositórios via R ou Python, ou através de API (Application Programming
Interface). Nesta última opção, o repositório é acessado por outro
aplicativo ou serviço web para automatização de tarefas, seja em
servidor local ou remoto, mas requer conhecimento de programação em Java
e outras linguagens e não será tratado aqui.</p>
<p>Nesta atividade, temos como objetivo acessar um repositório de dados
de ocorrência de espécies, inspecionar os dados, avaliar sua qualidade e
fazer um mapa com as ocorrências.</p>
<p>Para iniciar, vamos escolher um repositório e uma espécie de
interesse. Vamos iniciar com uma única espécie para facilitar as demais
etapas.</p>
<p>O <a href="https://www.gbif.org/">GBIF (<em>Global Biodiversity
Information Facility</em>)</a> é o maior repositório de ocorrências da
biodiversidade da atualidade, então será nossa opção de repositório. No
entanto, o <a href="https://obis.org/">OBIS (<em>Ocean Biodiversity
Information System</em>)</a> é um repositório dedicado às espécies
marinhas e espelhado no GBIF. Assim, espera-se que algumas ocorrências
sejam duplicadas nos dois repositórios.</p>
<div id="exemplo-finding-dori" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Exemplo:
<em>Finding Dori</em></h3>
<p>A espécie-alvo será o peixe marinho <em>Paracanthurus hepatus</em>,
também conhecido como <em>Blue Tang</em> e, mais recentemente como
<strong>Dori</strong>!.</p>
<center>
<img src= "figs/dori.png" style= "width:60%">
</center>
<p>Nosso primeiro exemplor será com as ocorrencias do
<strong>GBIF</strong> e, para tal, vamos utilizar o pacote
<code>rgbif</code>.</p>
<hr />
</div>
<div id="gbif" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span>
<strong>GBIF</strong></h3>
<p>Vamos fazer uso do pacote <code>tidyverse</code> para manipular dos
dados, então vamos carregar este pacote e o <code>rgbif</code>.</p>
<p>É importante explorar as funções do pacote e pode-se fazer isto
usando o comando <code>?rgbif</code> e, para ler sobre uma função em
particular basta colocar <code>?</code> em frente ao nome da função. Se
o pacote não estiver carregado ou instalada é preciso usar
<code>??</code>.</p>
<p>A função <code>occ_data</code> faz uma busca simplificada das
ocorrências no repositório do <strong>GBIF</strong> por meio do nome
científico, número de identificação, país e outros. Neste caso, vamos
procurar diretamente pelo nome da espécie-alvo. Outros atributos podem
ser adicionados à função para refinar a busca, leia o material de ajuda
da função para ter uma ideia. Vamos aproveitar alguns destes atributos e
selecionar apenas ocorrências que possuem coordenadas e sem problemas
geoespaciais.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># checar funcoes</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>?occ_data</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># baixar ocorrencias</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>dori_gbif <span class="ot">&lt;-</span> <span class="fu">occ_data</span>(<span class="at">scientificName =</span> <span class="st">&quot;Paracanthurus hepatus&quot;</span>, </span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>                      <span class="at">hasCoordinate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>                      <span class="at">hasGeospatialIssue=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co"># dimensoes</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="fu">dim</span>(dori_gbif)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">dim</span>(dori_gbif<span class="sc">$</span>data)</span></code></pre></div>
<pre><code>## [1] 500 147</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># checar campos</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span> names</span></code></pre></div>
<pre><code>##   [1] &quot;key&quot;                                  
##   [2] &quot;scientificName&quot;                       
##   [3] &quot;decimalLatitude&quot;                      
##   [4] &quot;decimalLongitude&quot;                     
##   [5] &quot;issues&quot;                               
##   [6] &quot;datasetKey&quot;                           
##   [7] &quot;publishingOrgKey&quot;                     
##   [8] &quot;installationKey&quot;                      
##   [9] &quot;hostingOrganizationKey&quot;               
##  [10] &quot;publishingCountry&quot;                    
##  [11] &quot;protocol&quot;                             
##  [12] &quot;lastCrawled&quot;                          
##  [13] &quot;lastParsed&quot;                           
##  [14] &quot;crawlId&quot;                              
##  [15] &quot;basisOfRecord&quot;                        
##  [16] &quot;occurrenceStatus&quot;                     
##  [17] &quot;taxonKey&quot;                             
##  [18] &quot;kingdomKey&quot;                           
##  [19] &quot;phylumKey&quot;                            
##  [20] &quot;orderKey&quot;                             
##  [21] &quot;familyKey&quot;                            
##  [22] &quot;genusKey&quot;                             
##  [23] &quot;speciesKey&quot;                           
##  [24] &quot;acceptedTaxonKey&quot;                     
##  [25] &quot;acceptedScientificName&quot;               
##  [26] &quot;kingdom&quot;                              
##  [27] &quot;phylum&quot;                               
##  [28] &quot;order&quot;                                
##  [29] &quot;family&quot;                               
##  [30] &quot;genus&quot;                                
##  [31] &quot;species&quot;                              
##  [32] &quot;genericName&quot;                          
##  [33] &quot;specificEpithet&quot;                      
##  [34] &quot;taxonRank&quot;                            
##  [35] &quot;taxonomicStatus&quot;                      
##  [36] &quot;iucnRedListCategory&quot;                  
##  [37] &quot;dateIdentified&quot;                       
##  [38] &quot;coordinateUncertaintyInMeters&quot;        
##  [39] &quot;continent&quot;                            
##  [40] &quot;stateProvince&quot;                        
##  [41] &quot;year&quot;                                 
##  [42] &quot;month&quot;                                
##  [43] &quot;day&quot;                                  
##  [44] &quot;eventDate&quot;                            
##  [45] &quot;startDayOfYear&quot;                       
##  [46] &quot;endDayOfYear&quot;                         
##  [47] &quot;modified&quot;                             
##  [48] &quot;lastInterpreted&quot;                      
##  [49] &quot;references&quot;                           
##  [50] &quot;license&quot;                              
##  [51] &quot;isSequenced&quot;                          
##  [52] &quot;isInCluster&quot;                          
##  [53] &quot;datasetName&quot;                          
##  [54] &quot;recordedBy&quot;                           
##  [55] &quot;identifiedBy&quot;                         
##  [56] &quot;dnaSequenceID&quot;                        
##  [57] &quot;geodeticDatum&quot;                        
##  [58] &quot;countryCode&quot;                          
##  [59] &quot;gbifRegion&quot;                           
##  [60] &quot;country&quot;                              
##  [61] &quot;publishedByGbifRegion&quot;                
##  [62] &quot;rightsHolder&quot;                         
##  [63] &quot;identifier&quot;                           
##  [64] &quot;http://unknown.org/nick&quot;              
##  [65] &quot;verbatimEventDate&quot;                    
##  [66] &quot;verbatimLocality&quot;                     
##  [67] &quot;collectionCode&quot;                       
##  [68] &quot;gbifID&quot;                               
##  [69] &quot;occurrenceID&quot;                         
##  [70] &quot;taxonID&quot;                              
##  [71] &quot;http://unknown.org/captive_cultivated&quot;
##  [72] &quot;catalogNumber&quot;                        
##  [73] &quot;institutionCode&quot;                      
##  [74] &quot;eventTime&quot;                            
##  [75] &quot;identificationID&quot;                     
##  [76] &quot;lifeStage&quot;                            
##  [77] &quot;dynamicProperties&quot;                    
##  [78] &quot;vitality&quot;                             
##  [79] &quot;occurrenceRemarks&quot;                    
##  [80] &quot;projectId&quot;                            
##  [81] &quot;distanceFromCentroidInMeters&quot;         
##  [82] &quot;informationWithheld&quot;                  
##  [83] &quot;recordNumber&quot;                         
##  [84] &quot;vernacularName&quot;                       
##  [85] &quot;http://unknown.org/taxonRankID&quot;       
##  [86] &quot;taxonConceptID&quot;                       
##  [87] &quot;identificationVerificationStatus&quot;     
##  [88] &quot;http://unknown.org/species&quot;           
##  [89] &quot;taxonRemarks&quot;                         
##  [90] &quot;datasetID&quot;                            
##  [91] &quot;eventID&quot;                              
##  [92] &quot;http://unknown.org/language&quot;          
##  [93] &quot;footprintWKT&quot;                         
##  [94] &quot;originalNameUsage&quot;                    
##  [95] &quot;county&quot;                               
##  [96] &quot;nameAccordingTo&quot;                      
##  [97] &quot;sex&quot;                                  
##  [98] &quot;higherGeography&quot;                      
##  [99] &quot;institutionKey&quot;                       
## [100] &quot;locality&quot;                             
## [101] &quot;language&quot;                             
## [102] &quot;type&quot;                                 
## [103] &quot;higherClassification&quot;                 
## [104] &quot;networkKeys&quot;                          
## [105] &quot;coordinatePrecision&quot;                  
## [106] &quot;collectionKey&quot;                        
## [107] &quot;otherCatalogNumbers&quot;                  
## [108] &quot;samplingProtocol&quot;                     
## [109] &quot;acceptedNameUsage&quot;                    
## [110] &quot;locationRemarks&quot;                      
## [111] &quot;identificationRemarks&quot;                
## [112] &quot;depth&quot;                                
## [113] &quot;depthAccuracy&quot;                        
## [114] &quot;bibliographicCitation&quot;                
## [115] &quot;individualCount&quot;                      
## [116] &quot;waterBody&quot;                            
## [117] &quot;georeferencedBy&quot;                      
## [118] &quot;sampleSizeUnit&quot;                       
## [119] &quot;sampleSizeValue&quot;                      
## [120] &quot;habitat&quot;                              
## [121] &quot;institutionID&quot;                        
## [122] &quot;dataGeneralizations&quot;                  
## [123] &quot;maximumDistanceAboveSurfaceInMeters&quot;  
## [124] &quot;georeferenceProtocol&quot;                 
## [125] &quot;islandGroup&quot;                          
## [126] &quot;island&quot;                               
## [127] &quot;verbatimDepth&quot;                        
## [128] &quot;ownerInstitutionCode&quot;                 
## [129] &quot;elevation&quot;                            
## [130] &quot;elevationAccuracy&quot;                    
## [131] &quot;rights&quot;                               
## [132] &quot;georeferenceSources&quot;                  
## [133] &quot;organismQuantity&quot;                     
## [134] &quot;organismQuantityType&quot;                 
## [135] &quot;programmeAcronym&quot;                     
## [136] &quot;locationAccordingTo&quot;                  
## [137] &quot;name&quot;                                 
## [138] &quot;samplingEffort&quot;                       
## [139] &quot;fieldNumber&quot;                          
## [140] &quot;locationID&quot;                           
## [141] &quot;eventRemarks&quot;                         
## [142] &quot;associatedReferences&quot;                 
## [143] &quot;disposition&quot;                          
## [144] &quot;materialSampleID&quot;                     
## [145] &quot;collectionID&quot;                         
## [146] &quot;preparations&quot;                         
## [147] &quot;municipality&quot;</code></pre>
<p>Acima, vemos que o conjunto de dados tem ocorrências (uma por linha)
e variáveis. As variáveis podem ser utilizadas para filtrar as
ocorrências de acordo com o objetivo, além de fornecerem diversos dados
a respeito das ocorrências, incluindo dados dos amostradores e
detentores dos direitos. Vale notar que o conjunto de dados retornado
pelo <strong>GBIF</strong> não é um <code>data frame</code> simples, mas
sim um <code>list</code> que contém um conjunto de
<code>data frames</code>. Para acessar estes <code>data frames</code> é
necessário usar o operador <code>$</code>.</p>
</div>
</div>
<div id="problemas-reportados" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Problemas
reportados</h2>
<p>Um dos campos mais úteis dos dados é a coluna <code>issues</code>,
pois ela indica problema já identificados pelo validador automático do
repositório. Os problemas (<em>issues</em>) possuem um código que pode
ser conferido pela função <code>gbif_issues</code>. Ao usar a função não
é preciso indicar nenhum atributo, pois ela retornará um dataframe com
as abreviações usadas e a descrição dos problemas catalogados no
GBIF.</p>
<pre><code>##           code                                             issue
## 1          bri                           BASIS_OF_RECORD_INVALID
## 2          ccm                        CONTINENT_COUNTRY_MISMATCH
## 3          cdc                CONTINENT_DERIVED_FROM_COORDINATES
## 4        conti                                 CONTINENT_INVALID
## 5         cdiv                                COORDINATE_INVALID
## 6        cdout                           COORDINATE_OUT_OF_RANGE
## 7        cdrep                            COORDINATE_REPROJECTED
## 8       cdrepf                    COORDINATE_REPROJECTION_FAILED
## 9       cdreps                COORDINATE_REPROJECTION_SUSPICIOUS
## 10     cdround                                COORDINATE_ROUNDED
## 11     cucdmis                       COUNTRY_COORDINATE_MISMATCH
## 12        cudc                  COUNTRY_DERIVED_FROM_COORDINATES
## 13        cuiv                                   COUNTRY_INVALID
## 14         cum                                  COUNTRY_MISMATCH
## 15      depmms                             DEPTH_MIN_MAX_SWAPPED
## 16       depnn                                 DEPTH_NON_NUMERIC
## 17     depnmet                                  DEPTH_NOT_METRIC
## 18      depunl                                    DEPTH_UNLIKELY
## 19       elmms                         ELEVATION_MIN_MAX_SWAPPED
## 20        elnn                             ELEVATION_NON_NUMERIC
## 21      elnmet                              ELEVATION_NOT_METRIC
## 22       elunl                                ELEVATION_UNLIKELY
## 23      gass84                      GEODETIC_DATUM_ASSUMED_WGS84
## 24      gdativ                            GEODETIC_DATUM_INVALID
## 25     iddativ                           IDENTIFIED_DATE_INVALID
## 26    iddatunl                          IDENTIFIED_DATE_UNLIKELY
## 27      mdativ                             MODIFIED_DATE_INVALID
## 28     mdatunl                            MODIFIED_DATE_UNLIKELY
## 29    muldativ                           MULTIMEDIA_DATE_INVALID
## 30    muluriiv                            MULTIMEDIA_URI_INVALID
## 31   preneglat                         PRESUMED_NEGATED_LATITUDE
## 32   preneglon                        PRESUMED_NEGATED_LONGITUDE
## 33     preswcd                       PRESUMED_SWAPPED_COORDINATE
## 34      rdativ                             RECORDED_DATE_INVALID
## 35       rdatm                            RECORDED_DATE_MISMATCH
## 36     rdatunl                            RECORDED_DATE_UNLIKELY
## 37    refuriiv                            REFERENCES_URI_INVALID
## 38    txmatfuz                                 TAXON_MATCH_FUZZY
## 39     txmathi                            TAXON_MATCH_HIGHERRANK
## 40    txmatnon                                  TAXON_MATCH_NONE
## 41   typstativ                               TYPE_STATUS_INVALID
## 42      zerocd                                   ZERO_COORDINATE
## 43        cdpi                      COORDINATE_PRECISION_INVALID
## 44       cdumi             COORDINATE_UNCERTAINTY_METERS_INVALID
## 45       indci                          INDIVIDUAL_COUNT_INVALID
## 46      interr                              INTERPRETATION_ERROR
## 47       iccos INDIVIDUAL_COUNT_CONFLICTS_WITH_OCCURRENCE_STATUS
## 48       osiic  OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT
## 49         osu                      OCCURRENCE_STATUS_UNPARSABLE
## 50       geodi                        GEOREFERENCED_DATE_INVALID
## 51       geodu                       GEOREFERENCED_DATE_UNLIKELY
## 52      ambcol                              AMBIGUOUS_COLLECTION
## 53     ambinst                             AMBIGUOUS_INSTITUTION
## 54     colmafu                            COLLECTION_MATCH_FUZZY
## 55     colmano                             COLLECTION_MATCH_NONE
## 56     incomis                   INSTITUTION_COLLECTION_MISMATCH
## 57      inmafu                           INSTITUTION_MATCH_FUZZY
## 58      inmano                            INSTITUTION_MATCH_NONE
## 59     osifbor   OCCURRENCE_STATUS_INFERRED_FROM_BASIS_OF_RECORD
## 60     diffown                       DIFFERENT_OWNER_INSTITUTION
## 61   taxmatagg                             TAXON_MATCH_AGGREGATE
## 62    fpsrsinv                             FOOTPRINT_SRS_INVALID
## 63    fpwktinv                             FOOTPRINT_WKT_INVALID
## 64         anm                             ACCEPTED_NAME_MISSING
## 65        annu                          ACCEPTED_NAME_NOT_UNIQUE
## 66      anuidi                    ACCEPTED_NAME_USAGE_ID_INVALID
## 67    aitidinv                            ALT_IDENTIFIER_INVALID
## 68        bbmn                               BACKBONE_MATCH_NONE
## 69    basauthm                          BASIONYM_AUTHOR_MISMATCH
## 70     bibrinv                             BIB_REFERENCE_INVALID
## 71       chsun                                    CHAINED_SYNOYM
## 72      clasna                        CLASSIFICATION_NOT_APPLIED
## 73     clasroi                 CLASSIFICATION_RANK_ORDER_INVALID
## 74  conbascomb                  CONFLICTING_BASIONYM_COMBINATION
## 75      desinv                               DESCRIPTION_INVALID
## 76      disinv                              DISTRIBUTION_INVALID
## 77         hom                                           HOMONYM
## 78        minv                                MULTIMEDIA_INVALID
## 79         npm                              NAME_PARENT_MISMATCH
## 80          ns                                        NO_SPECIES
## 81       nsinv                      NOMENCLATURAL_STATUS_INVALID
## 82       onder                             ORIGINAL_NAME_DERIVED
## 83        onnu                          ORIGINAL_NAME_NOT_UNIQUE
## 84    onuidinv                    ORIGINAL_NAME_USAGE_ID_INVALID
## 85          ov                              ORTHOGRAPHIC_VARIANT
## 86          pc                                      PARENT_CYCLE
## 87        pnnu                            PARENT_NAME_NOT_UNIQUE
## 88    pnuidinv                      PARENT_NAME_USAGE_ID_INVALID
## 89          pp                                PARTIALLY_PARSABLE
## 90         pbg                            PUBLISHED_BEFORE_GENUS
## 91     rankinv                                      RANK_INVALID
## 92     relmiss                              RELATIONSHIP_MISSING
## 93       scina                         SCIENTIFIC_NAME_ASSEMBLED
## 94     spprinv                           SPECIES_PROFILE_INVALID
## 95    taxstinv                          TAXONOMIC_STATUS_INVALID
## 96    taxstmis                         TAXONOMIC_STATUS_MISMATCH
## 97      unpars                                        UNPARSABLE
## 98 vernnameinv                           VERNACULAR_NAME_INVALID
## 99  backmatagg                          BACKBONE_MATCH_AGGREGATE
##                                                                                                                                                              description
## 1                                                           The given basis of record is impossible to interpret or seriously different from the recommended vocabulary.
## 2                                                                                                                 The interpreted continent and country do not match up.
## 3                                                                            The interpreted continent is based on the coordinates, not the verbatim string information.
## 4                                                                                                                                Uninterpretable continent values found.
## 5                                                                                                Coordinate value given in some form but GBIF is unable to interpret it.
## 6                                                                                                  Coordinate has invalid lat/lon values out of their decimal max range.
## 7                                                                         The original coordinate was successfully reprojected from a different geodetic datum to WGS84.
## 8                                                                The given decimal latitude and longitude could not be reprojected to WGS84 based on the provided datum.
## 9                          Indicates successful coordinate reprojection according to provided datum, but which results in a datum shift larger than 0.1 decimal degrees.
## 10                                                                                                               Original coordinate modified by rounding to 5 decimals.
## 11                                                                                         The interpreted occurrence coordinates fall outside of the indicated country.
## 12                                                                             The interpreted country is based on the coordinates, not the verbatim string information.
## 13                                                                                                                                 Uninterpretable country values found.
## 14                                                                                        Interpreted country for dwc:country and dwc:countryCode contradict each other.
## 15                                                                                                                                               Set if supplied min&gt;max
## 16                                                                                                                                   Set if depth is a non numeric value
## 17                                                                     Set if supplied depth is not given in the metric system, for example using feet instead of meters
## 18                                                                                                                      Set if depth is larger than 11.000m or negative.
## 19                                                                                                                                   Set if supplied min &gt; max elevation
## 20                                                                                                                               Set if elevation is a non numeric value
## 21                                                                 Set if supplied elevation is not given in the metric system, for example using feet instead of meters
## 22                                                                                      Set if elevation is above the troposphere (17km) or below 11km (Mariana Trench).
## 23                              Indicating that the interpreted coordinates assume they are based on WGS84 datum as the datum was either not indicated or interpretable.
## 24                                                                                                                    The geodetic datum given could not be interpreted.
## 25                                                                                      The date given for dwc:dateIdentified is invalid and cant be interpreted at all.
## 26                                                                                The date given for dwc:dateIdentified is in the future or before Linnean times (1700).
## 27                                                              A (partial) invalid date is given for dc:modified, such as a non existing date, invalid zero month, etc.
## 28                                                                                         The date given for dc:modified is in the future or predates unix time (1970).
## 29                                                                                                       An invalid date is given for dc:created of a multimedia object.
## 30                                                                                                                      An invalid uri is given for a multimedia object.
## 31                                                                                                            Latitude appears to be negated, e.g. 32.3 instead of -32.3
## 32                                                                                                           Longitude appears to be negated, e.g. 32.3 instead of -32.3
## 33                                                                                                                          Latitude and longitude appear to be swapped.
## 34                                                                              A (partial) invalid date is given, such as a non existing date, invalid zero month, etc.
## 35                                                           The recording date specified as the eventDate string and the individual year, month, day are contradicting.
## 36                        The recording date is highly unlikely, falling either into the future or represents a very old date before 1600 that predates modern taxonomy.
## 37                                                                                                                            An invalid uri is given for dc:references.
## 38                                                                                   Matching to the taxonomic backbone can only be done using a fuzzy, non exact match.
## 39                                                                     Matching to the taxonomic backbone can only be done on a higher rank and not the scientific name.
## 40       Matching to the taxonomic backbone cannot be done cause there was no match at all or several matches with too little information to keep them apart (homonyms).
## 41                                                              The given type status is impossible to interpret or seriously different from the recommended vocabulary.
## 42                                                                                       Coordinate is the exact 0/0 coordinate, often indicating a bad null coordinate.
## 43                                                                                                             Indicates an invalid or very unlikely coordinatePrecision
## 44                                                                                                        Indicates an invalid or very unlikely dwc:uncertaintyInMeters.
## 45                                                                                                                  Individual count value not parsable into an integer.
## 46                                                                                An error occurred during interpretation, leaving the record interpretation incomplete.
## 47                                                                                         Example: individual count value &gt; 0, but occurrence status is absent and etc.
## 48                                                                                                        Occurrence status was inferred from the individual count value
## 49                                                                                                         Occurrence status value can&#39;t be assigned to OccurrenceStatus
## 50                                                                                  The date given for dwc:georeferencedDate is invalid and can&#39;t be interpreted at all.
## 51                                                                             The date given for dwc:georeferencedDate is in the future or before Linnean times (1700).
## 52                                                                                                   The given collection matches with more than 1 GrSciColl collection.
## 53                                                                                                 The given institution matches with more than 1 GrSciColl institution.
## 54                                                                                                   The given collection was fuzzily matched to a GrSciColl collection.
## 55                                                                                               The given collection couldn&#39;t be matched with any GrSciColl collection.
## 56                                                                                                     The collection matched doesn&#39;t belong to the institution matched.
## 57                                                                                                 The given institution was fuzzily matched to a GrSciColl institution.
## 58                                                                                             The given institution couldn&#39;t be matched with any GrSciColl institution.
## 59                                                                                                                  Occurrence status was inferred from basis of records
## 60 The given owner institution is different than the given institution. Therefore we assume it doesn&#39;t belong to the institution and we don&#39;t link it to the occurrence.
## 61                Matching to the taxonomic backbone can only be done on a species level, but the occurrence was in fact considered a broader species aggregate/complex.
## 62                                                                                                 The Footprint Spatial Reference System given could not be interpreted
## 63                                                                                                          The Footprint Well-Known-Text given could not be interpreted
## 64                                                                                                                                     Synonym lacking an accepted name.
## 65                                                                               Synonym has a verbatim accepted name which is not unique and refers to several records.
## 66                                                                                                          The value for dwc:acceptedNameUsageID could not be resolved.
## 67                                                                          At least one alternative identifier extension record attached to this name usage is invalid.
## 68                                                                                                                 Name usage could not be matched to the GBIF backbone.
## 69                                                                     The authorship of the original name does not match the authorship in brackets of the actual name.
## 70                                                                         At least one bibliographic reference extension record attached to this name usage is invalid.
## 71                                                                                   If a synonym points to another synonym as its accepted taxon the chain is resolved.
## 72                                                                                               The denormalized classification could not be applied to the name usage.
## 73                                                                    The given ranks of the names in the classification hierarchy do not follow the hierarchy of ranks.
## 74                                                                                 There have been more than one accepted name in a homotypical basionym group of names.
## 75                                                                                     At least one description extension record attached to this name usage is invalid.
## 76                                                                                    At least one distribution extension record attached to this name usage is invalid.
## 77                                                   A not synonymized homonym exists for this name in some other backbone source which have been ignored at build time.
## 78                                                                                      At least one multimedia extension record attached to this name usage is invalid.
## 79                                               The (accepted) bi/trinomial name does not match the parent name and should be recombined into the parent genus/species.
## 80                                                           The group (currently only genera are tested) are lacking any accepted species GBIF backbone specific issue.
## 81                                                                                                                      dwc:nomenclaturalStatus could not be interpreted
## 82                     Record has a original name (basionym) relationship which was derived from name &amp; authorship comparison, but did not exist explicitly in the data.
## 83                                                                     Record has a verbatim original name (basionym) which is not unique and refers to several records.
## 84                                                                                                          The value for dwc:originalNameUsageID could not be resolved.
## 85                                                                                                              A potential orthographic variant exists in the backbone.
## 86                                                                                 The child parent classification resulted into a cycle that needed to be resolved/cut.
## 87                                                                                  Record has a verbatim parent name which is not unique and refers to several records.
## 88                                                                                                            The value for dwc:parentNameUsageID could not be resolved.
## 89                                    The beginning of the scientific name string was parsed, but there is additional information in the string that was not understood.
## 90                                                                                            A bi/trinomial name published earlier than the parent genus was published.
## 91                                                                                                                                dwc:taxonRank could not be interpreted
## 92                                                                                                   There were problems representing all name usage relationships, i.e.
## 93                                                                     The scientific name was assembled from the individual name parts and not given as a whole string.
## 94                                                                                 At least one species profile extension record attached to this name usage is invalid.
## 95                                                                                                                          dwc:taxonomicStatus could not be interpreted
## 96                                                                                                                                                        no description
## 97                                                                   The scientific name string could not be parsed at all, but appears to be a parsable name type, i.e.
## 98                                                                                 At least one vernacular name extension record attached to this name usage is invalid.
## 99                                                     Name usage could only be matched to a GBIF backbone species, but was in fact a broader species aggregate/complex.
##          type
## 1  occurrence
## 2  occurrence
## 3  occurrence
## 4  occurrence
## 5  occurrence
## 6  occurrence
## 7  occurrence
## 8  occurrence
## 9  occurrence
## 10 occurrence
## 11 occurrence
## 12 occurrence
## 13 occurrence
## 14 occurrence
## 15 occurrence
## 16 occurrence
## 17 occurrence
## 18 occurrence
## 19 occurrence
## 20 occurrence
## 21 occurrence
## 22 occurrence
## 23 occurrence
## 24 occurrence
## 25 occurrence
## 26 occurrence
## 27 occurrence
## 28 occurrence
## 29 occurrence
## 30 occurrence
## 31 occurrence
## 32 occurrence
## 33 occurrence
## 34 occurrence
## 35 occurrence
## 36 occurrence
## 37 occurrence
## 38 occurrence
## 39 occurrence
## 40 occurrence
## 41 occurrence
## 42 occurrence
## 43 occurrence
## 44 occurrence
## 45 occurrence
## 46 occurrence
## 47 occurrence
## 48 occurrence
## 49 occurrence
## 50 occurrence
## 51 occurrence
## 52 occurrence
## 53 occurrence
## 54 occurrence
## 55 occurrence
## 56 occurrence
## 57 occurrence
## 58 occurrence
## 59 occurrence
## 60 occurrence
## 61 occurrence
## 62 occurrence
## 63 occurrence
## 64       name
## 65       name
## 66       name
## 67       name
## 68       name
## 69       name
## 70       name
## 71       name
## 72       name
## 73       name
## 74       name
## 75       name
## 76       name
## 77       name
## 78       name
## 79       name
## 80       name
## 81       name
## 82       name
## 83       name
## 84       name
## 85       name
## 86       name
## 87       name
## 88       name
## 89       name
## 90       name
## 91       name
## 92       name
## 93       name
## 94       name
## 95       name
## 96       name
## 97       name
## 98       name
## 99       name</code></pre>
<p>Para checar os <code>issues</code> indicados na base baixada é
necessário um pequeno tratamento, uma vez que algumas ocorrências
possuem múltiplos problemas. Assim, utilizamos a função
<code>strsplit</code> para individualizar os <code>issues</code> e poder
conferí-los.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># checar problemas reportados</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>issues_gbif <span class="ot">&lt;-</span> dori_gbif<span class="sc">$</span>data<span class="sc">$</span>issues <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="fu">strsplit</span>(., <span class="st">&quot;[,]&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="fu">gbif_issues</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  <span class="fu">filter</span>(code <span class="sc">%in%</span> issues_gbif)</span></code></pre></div>
<pre><code>##        code                                            issue
## 1       cdc               CONTINENT_DERIVED_FROM_COORDINATES
## 2     conti                                CONTINENT_INVALID
## 3    cdreps               COORDINATE_REPROJECTION_SUSPICIOUS
## 4   cdround                               COORDINATE_ROUNDED
## 5      cudc                 COUNTRY_DERIVED_FROM_COORDINATES
## 6       cum                                 COUNTRY_MISMATCH
## 7    gass84                     GEODETIC_DATUM_ASSUMED_WGS84
## 8    gdativ                           GEODETIC_DATUM_INVALID
## 9     rdatm                           RECORDED_DATE_MISMATCH
## 10 refuriiv                           REFERENCES_URI_INVALID
## 11    osiic OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT
## 12  colmafu                           COLLECTION_MATCH_FUZZY
## 13  colmano                            COLLECTION_MATCH_NONE
## 14  incomis                  INSTITUTION_COLLECTION_MISMATCH
## 15   inmafu                          INSTITUTION_MATCH_FUZZY
## 16   inmano                           INSTITUTION_MATCH_NONE
##                                                                                                                                      description
## 1                                                    The interpreted continent is based on the coordinates, not the verbatim string information.
## 2                                                                                                        Uninterpretable continent values found.
## 3  Indicates successful coordinate reprojection according to provided datum, but which results in a datum shift larger than 0.1 decimal degrees.
## 4                                                                                        Original coordinate modified by rounding to 5 decimals.
## 5                                                      The interpreted country is based on the coordinates, not the verbatim string information.
## 6                                                                 Interpreted country for dwc:country and dwc:countryCode contradict each other.
## 7       Indicating that the interpreted coordinates assume they are based on WGS84 datum as the datum was either not indicated or interpretable.
## 8                                                                                             The geodetic datum given could not be interpreted.
## 9                                    The recording date specified as the eventDate string and the individual year, month, day are contradicting.
## 10                                                                                                    An invalid uri is given for dc:references.
## 11                                                                                Occurrence status was inferred from the individual count value
## 12                                                                           The given collection was fuzzily matched to a GrSciColl collection.
## 13                                                                       The given collection couldn&#39;t be matched with any GrSciColl collection.
## 14                                                                             The collection matched doesn&#39;t belong to the institution matched.
## 15                                                                         The given institution was fuzzily matched to a GrSciColl institution.
## 16                                                                     The given institution couldn&#39;t be matched with any GrSciColl institution.
##          type
## 1  occurrence
## 2  occurrence
## 3  occurrence
## 4  occurrence
## 5  occurrence
## 6  occurrence
## 7  occurrence
## 8  occurrence
## 9  occurrence
## 10 occurrence
## 11 occurrence
## 12 occurrence
## 13 occurrence
## 14 occurrence
## 15 occurrence
## 16 occurrence</code></pre>
<p>A maioria dos problemas reportados é relacionado com discrepancias
entre informações indicadas pelos autores e as levantadas pelo algoritmo
de checagem, mas nenhum parece invalidar as ocorrências, por
enquanto.</p>
<p>Prosseguimos selecionando algumas variáveis que serão úteis para a
validação dos dados e futuras análises, como coordenadas, profundidade,
nome da base de dados etc.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>dori_gbif1 <span class="ot">&lt;-</span> dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, acceptedScientificName, decimalLatitude, decimalLongitude,</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>         issues, waterBody, basisOfRecord, occurrenceStatus, rightsHolder, </span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>         datasetName, recordedBy, depth, locality, habitat) </span></code></pre></div>
<p>Note que temos 500 ocorrências, no entanto, vamos ver quantas são
únicas aplicando a função <code>distinct</code> do pacote
<code>dplyr</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>dori_gbif1 <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">distinct</span>() </span></code></pre></div>
<p>No fim, observamos que ficamos com 425 ocorrências agora, e isso
acontece por causa de diferenças em colunas que, neste caso, não serão
usadas para o objetivo desta prática.</p>
<p>Para identificar todos os valores únicos presented nos dados, vamos
aplicar a função <code>unique</code> a cada coluna com um <em>loop</em>
na função <code>lapply</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># checar niveis dos fatores</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">lapply</span>(dori_gbif1, unique)</span></code></pre></div>
<pre><code>## $scientificName
## [1] &quot;Paracanthurus hepatus (Linnaeus, 1766)&quot;
## [2] &quot;BOLD:AAC3227&quot;                          
## 
## $acceptedScientificName
## [1] &quot;Paracanthurus hepatus (Linnaeus, 1766)&quot;
## [2] &quot;BOLD:AAC3227&quot;                          
## 
## $decimalLatitude
##   [1]  -4.659287  -4.659753   4.532800  -0.533344 -22.494511 -24.114004
##   [7]  -8.346364 -22.494282  -5.828054 -17.610468  -4.745790   0.350650
##  [13] -28.611592  -0.561889  -5.771052  -1.832513  -1.837575  -0.819800
##  [19] -29.929429   3.466667 -24.113883  13.438669  13.438930   4.601751
##  [25]  22.638717 -24.114176  -2.195210 -22.454517   1.766050 -21.342338
##  [31] -29.928547 -30.205483 -30.203405  15.272309   6.967395 -18.614541
##  [37]  -8.507500 -24.111997  15.251534  -5.775520   7.133782 -27.390538
##  [43]  43.410676 -10.429001  26.200692  -4.658900  26.216508 -12.888951
##  [49]   1.489320  -8.553105  -8.407204   4.600447   5.898500 -14.644413
##  [55]  -8.276019  -8.346610  -8.476108 -30.204775 -16.737718 -17.870298
##  [61]  -4.301996  13.438804  -8.295380  -4.303881  -5.354481 -17.831126
##  [67]  -8.339775  -8.792584 -22.489927   4.254166 -27.526307  -2.128660
##  [73] -27.532258  -8.413278  -5.816193 -16.700000 -30.017840  -5.815955
##  [79]   3.441135 -28.611545  -4.260519  -4.290246  -4.284976 -22.360830
##  [85] -22.492167  -4.696106   7.208062  -1.985980   9.046518 -22.280830
##  [91] -22.500048 -21.264260  34.944114 -10.427722 -27.124960 -29.930942
##  [97] -18.615888  -4.640543  -8.510152 -16.774570  -8.556578 -16.463107
## [103] -10.445373   4.117837 -16.464717 -20.034162 -16.041292 -26.978817
## [109] -17.488060 -21.024720 -26.977668 -22.495240 -21.808621  -8.557222
## [115] -16.023588 -16.242300  26.219126 -26.976818  -8.221842 -16.228076
## [121]  -7.669896  -0.027815 -17.883027 -17.882279 -18.115194 -14.875753
## [127] -13.276936 -12.851714  -8.322499 -17.531498 -17.884473 -13.604295
## [133]   1.741569  -8.539939  -8.727807 -10.429518  -0.587336   1.743250
## [139]   1.749731   1.684740 -28.611992 -29.923144 -19.747227   5.879506
## [145] -14.935150  -1.672505 -33.800169 -30.202839 -27.400000 -21.179820
## [151]  -4.289271 -17.071277 -22.498100 -17.075208 -27.465857  13.477716
## [157]  13.480037   4.595825   4.121438  -5.775973 -16.423388 -10.429189
## [163] -14.550000 -17.745759 -27.531884  -5.771697  -5.821940   2.876520
## [169]  -5.820498  -7.670200   1.743368 -24.114077 -24.113960  -5.775017
## [175]  -4.321608 -21.073550 -21.349330 -22.592943 -19.949027 -17.070864
## [181] -17.054430 -29.479089  -0.556017 -16.798186 -20.780020 -28.611278
## [187]  -4.656524 -17.636875  25.015492   2.728201  -4.356636  -6.353158
## [193]  27.384722 -12.922500  22.075700  28.169633  22.319095 -14.663600
## [199] -16.593349 -18.287067 -17.633630  -8.349668 -13.647350 -24.113935
## [205]  22.680581  27.404722  22.680278  -8.476267  52.273590 -21.057139
## [211] -21.654910 -28.196141  26.189035 -21.058230  -2.244373  -2.204717
## [217]   5.929160 -30.204320 -12.201670 -12.241430 -12.193790 -24.113638
## [223]  15.022028  -8.273910  -5.816751  26.201910  27.388889  -5.840112
## [229] -28.611482 -24.116345  50.959507 -17.076469 -17.077753  13.533730
## [235] -10.423094 -29.927833 -10.393100  -8.481814  -8.612647   1.615687
## [241]  13.522638  13.518570   4.116129 -28.611023 -16.428461  27.328333
## [247]  -4.714799 -16.767523   0.186880   0.798243   6.384268   4.109330
## [253] -23.890880 -23.322970 -21.151370 -23.817600  -4.279653  -4.288243
## [259]  -4.258536  -8.530476 -24.110377  -0.584608 -17.575953 -18.158240
## [265] -27.535837 -18.171880 -18.167790  -2.757490  13.686601  -5.820478
## [271] -18.671667  14.865178  14.838945 -21.239710 -21.170370 -21.205960
## [277] -21.205150 -21.035070 -21.233100 -21.073840  13.282353  18.090721
## [283]  18.093946  18.169705  18.050178  18.144987  18.085108  14.108882
## [289]  14.169204  15.134210  15.192456  15.111052  15.274841  15.113834
## [295]  16.718400  14.924998  15.052066  14.927633  15.010917  -2.260250
## [301]  -2.249608  -5.775622   1.619931 -17.076470 -16.783458 -21.349500
## [307] -18.605400 -21.484390 -16.657679  30.487778  -5.801525 -25.288066
## [313]  -8.400000 -21.319020  -4.321165  24.306446 -17.068420  -8.689442
## [319] -14.235940 -14.235900 -21.370350 -21.366690 -21.371320 -14.273857
## [325]  26.291180  -4.215377   1.872135 -17.116486 -17.070283 -17.062497
## [331]  16.135100 -21.660010 -21.991250 -27.532000  24.436835  -5.611260
## [337]  15.586542 -27.525900 -15.484300  -8.475600  -8.537167  -4.530000
## [343]  -5.304400 -12.872840  24.472500  -9.910000 -12.672960 -23.249570
## [349]  23.212100 -23.848670  -4.714922   0.190310   0.187242   0.191557
## [355] -21.015540 -21.015000   0.820899   0.822466   6.382461 -14.151863
## [361] -14.224068 -14.278573 -14.279030 -14.241373 -14.285210 -14.273254
## [367]  -8.276666   6.986900   7.134422 -27.523100 -27.520850 -17.408093
## [373] -21.025510 -21.086600  -4.292379  -8.636633  26.237900  -8.459459
## [379]  16.466670  24.455000  -8.277300  -8.505400 -24.112880  -8.289789
## [385]  13.522800 -14.529130  14.843660  17.591924 -21.160690  13.230371
## [391]  18.149654
## 
## $decimalLongitude
##   [1]   39.384004   39.386529   73.373605  130.715101  166.440550  152.708804
##   [7]  116.025881  166.437320   39.390292  168.225762   55.463104  173.838155
##  [13]  153.628972  130.661309  123.891720  126.342462  126.337113  123.453090
##  [19]  153.391466   73.566667  152.709160  144.621488  144.621434  118.946747
##  [25]  121.479753  152.714252  130.427400  166.370638  125.171819   55.476513
##  [31]  153.390432  153.266930  153.265733  145.788990  134.220119  147.068577
##  [37]  119.604706  152.711265  145.717782  123.893462  134.220404  153.551866
##  [43]    6.852053  105.669391  127.288367   39.382117  127.293438   45.215604
##  [49]  125.258344  119.596151  119.582693  118.861692   95.252690  145.452499
##  [55]  115.594227  124.327723  119.647636  153.265015  179.955165  177.193587
##  [61]   55.749144  144.622391  115.612584   55.865826   55.070952  146.555606
##  [67]  116.059087  158.254829  166.441719  118.631398   32.687369  130.193961
##  [73]  153.462608  127.312722   39.397354  145.900000  153.271350   39.382869
##  [79]   73.615329  153.628285   55.674332   55.756901   55.757137  166.249440
##  [85]  166.441805   39.302137  134.325512  130.512526  119.809642  166.174720
##  [91]  166.439674   55.326730  139.091344  105.667916  153.483006  153.388269
##  [97]  147.069382   55.365962  119.718638 -179.804345  119.524384  145.982423
## [103]  105.561202  118.632770  145.981561   57.532499  145.867344  153.485503
## [109] -149.872780   55.225830  153.485586   35.500953  119.630833  145.856336
## [115]  145.862210  127.288501  153.484513  125.585529  145.890964  125.906200
## [121]  127.237210  146.602784  146.598492  146.763856  145.689483  143.942628
## [127]  143.832458  115.628840  146.383470  146.572892   47.805077  125.163619
## [133]  119.601423  115.544423  105.669497  130.305285  125.162800  125.133681
## [139]  125.159640  153.628261  153.388121  164.018029   95.257818   40.736725
## [145]  130.296477  151.301663  153.265046  153.566667   55.283800   55.859056
## [151]  179.107382  166.442060  179.103867  153.505134  144.706077  144.705520
## [157]  118.864340  118.633323  123.894845  145.993499  105.666922  145.400000
## [163]  177.134432  123.887528   39.388881  104.154490   39.383505  125.923379
## [169]  125.153464  152.708852  152.709631  123.893550   55.864143   55.216090
## [175]   55.481230  167.407603   57.625819  179.108445  179.078016  153.364044
## [181]  130.689082  146.305428  167.043730  153.628374   39.367944  148.440796
## [187]  122.000931   72.970089   55.834000   39.307294  128.525556   44.971940
## [193]  121.580818  129.290530  114.169361  145.663550  168.222719  147.699192
## [199] -149.618790  116.065861  144.106880  152.714691  121.500873  128.533889
## [205]  121.490278  125.891751    8.040755   55.219472  164.549490  153.579109
## [211]  127.403891   55.219150  130.555722  130.567717  102.723090  153.264820
## [217]  123.026150  122.925700  123.040840  152.707481  145.579965  115.592600
## [223]   39.382532  127.290300  128.521111   39.465298  153.628561  152.707940
## [229]    6.974559  179.110489  179.109836  121.100000  105.668707  153.389246
## [235]  105.660447  119.529705  158.200635  124.737952  120.972905  120.991160
## [241]  118.630011  153.629233  145.996625  128.557778   39.379703  179.940548
## [247] -176.461758 -176.620026 -162.464716  118.625000  152.430170  151.982420
## [253]   35.088510   35.403290   55.727806   55.865309   55.674129  119.627393
## [259]  152.710228  130.632815  178.985925 -174.181710   32.679877 -174.205800
## [265] -174.182140  150.718904  120.913632   39.381621 -174.074350  145.568113
## [271]  145.530071   55.301450   55.279310   55.279620   55.278980   55.214330
## [277]   55.292660   55.223680  144.763832  145.761289  145.744785  145.791789
## [283]  145.705884  145.753687  145.726526  145.168395  145.285454  145.678863
## [289]  145.703956  145.702750  145.792591  145.698973  145.776382  145.645735
## [295]  145.656083  145.630367  145.585532  130.644650  130.623751  123.893583
## [301]  124.734742  179.110488  179.923538   55.468600  147.570320   35.454930
## [307]  146.028845  130.152500   39.383997  152.908466  119.350000   35.507860
## [313]   55.865689  124.090481  179.104680  119.572515 -178.174260 -178.174000
## [319]   55.736610   55.656090   55.682640 -169.493340  126.788447   55.665199
## [325] -157.427812  179.108129  179.105897  179.098605  -61.771000   35.423590
## [331]   35.381540   32.686700  123.796692  132.747261  121.822090   32.685400
## [337]  147.107600  119.556533  119.601950  131.651900  131.996900   45.275930
## [343]  122.963611  129.500000   45.051370  151.942550  -81.185800  152.381750
## [349]   39.374882 -176.457306 -176.461020 -176.488864   55.234100   55.234050
## [355] -176.626714 -176.626782 -162.426737 -169.610598 -169.519542 -170.548823
## [361] -170.547391 -170.678850 -170.545478 -170.505099  115.593899  134.218838
## [367]  134.220942   32.686000   32.687320 -179.056439   55.224770   55.220740
## [373]   55.867957  119.711425  -80.000000  119.571757  145.983060  -81.858300
## [379]  115.594500  157.992092  152.714019  115.606941  120.993000  145.588330
## [385]  145.565911  145.813721   55.836620  144.643855  145.811546
## 
## $issues
##  [1] &quot;cdc,cdround&quot;                                  
##  [2] &quot;cdc&quot;                                          
##  [3] &quot;cdround,cudc&quot;                                 
##  [4] &quot;&quot;                                             
##  [5] &quot;cum&quot;                                          
##  [6] &quot;cdc,cum&quot;                                      
##  [7] &quot;cudc&quot;                                         
##  [8] &quot;cdc,cudc&quot;                                     
##  [9] &quot;cdc,cdround,gass84,incomis,inmafu&quot;            
## [10] &quot;colmafu,inmafu&quot;                               
## [11] &quot;cdc,cdround,gass84&quot;                           
## [12] &quot;gass84&quot;                                       
## [13] &quot;cdc,gass84&quot;                                   
## [14] &quot;cdc,cudc,gass84,gdativ,rdatm,refuriiv&quot;        
## [15] &quot;cudc,gass84,gdativ,rdatm,refuriiv&quot;            
## [16] &quot;cdc,cdreps&quot;                                   
## [17] &quot;osiic&quot;                                        
## [18] &quot;cdc,cum,gass84&quot;                               
## [19] &quot;cdc,gass84,incomis,inmafu&quot;                    
## [20] &quot;cdc,cudc,gass84,colmano,inmafu&quot;               
## [21] &quot;cdc,conti,gass84&quot;                             
## [22] &quot;cdc,conti,gass84,osiic&quot;                       
## [23] &quot;cudc,gass84,inmano&quot;                           
## [24] &quot;incomis,inmafu&quot;                               
## [25] &quot;cdc,cdround,cudc,gass84,gdativ,rdatm,refuriiv&quot;
## [26] &quot;cdreps&quot;                                       
## 
## $waterBody
##  [1] NA                    &quot;North Pacific Ocean&quot; &quot;Celebes Sea&quot;        
##  [4] &quot;Pacific Ocean&quot;       &quot;Flores Sea&quot;          &quot;South Pacific Ocean&quot;
##  [7] &quot;Caribbean Sea&quot;       &quot;Gulf of Mexico&quot;      &quot;Atlantic Ocean&quot;     
## [10] &quot;Verde Island&quot;       
## 
## $basisOfRecord
## [1] &quot;HUMAN_OBSERVATION&quot;  &quot;PRESERVED_SPECIMEN&quot; &quot;MATERIAL_SAMPLE&quot;   
## 
## $occurrenceStatus
## [1] &quot;PRESENT&quot;
## 
## $rightsHolder
##   [1] &quot;mwanaisha_musa&quot;                                               
##   [2] &quot;Bas Engels&quot;                                                   
##   [3] &quot;Roxanne Lazarus&quot;                                              
##   [4] &quot;Joëlle VINCENT&quot;                                               
##   [5] &quot;harrison_t&quot;                                                   
##   [6] &quot;Olly Morgan&quot;                                                  
##   [7] &quot;Johan Bas&quot;                                                    
##   [8] &quot;Tom Kirschey&quot;                                                 
##   [9] &quot;Andy Wech&quot;                                                    
##  [10] &quot;Tue Secher Jensen&quot;                                            
##  [11] &quot;Debra Baker&quot;                                                  
##  [12] &quot;Nic Katherine&quot;                                                
##  [13] &quot;Andrew Taylor&quot;                                                
##  [14] &quot;Blythe Nilson&quot;                                                
##  [15] &quot;libby hepburn&quot;                                                
##  [16] &quot;currowar&quot;                                                     
##  [17] &quot;divercraig&quot;                                                   
##  [18] &quot;Frank Krasovec&quot;                                               
##  [19] &quot;pangolino&quot;                                                    
##  [20] &quot;Olivia Bañez&quot;                                                 
##  [21] &quot;Warren R. Francis&quot;                                            
##  [22] &quot;R Lai&quot;                                                        
##  [23] &quot;Robin Laws-Wall&quot;                                              
##  [24] &quot;Jean-Paul Cassez&quot;                                             
##  [25] &quot;sylheb&quot;                                                       
##  [26] &quot;Nico K. Michiels&quot;                                             
##  [27] &quot;ambre_damour&quot;                                                 
##  [28] &quot;mattdowse&quot;                                                    
##  [29] &quot;gabrielleoutoftheblue&quot;                                        
##  [30] &quot;CCooke&quot;                                                       
##  [31] &quot;kaeliswift&quot;                                                   
##  [32] &quot;jacintaj&quot;                                                     
##  [33] &quot;ingmar51&quot;                                                     
##  [34] &quot;Judebirder&quot;                                                   
##  [35] &quot;nmi_fishguy&quot;                                                  
##  [36] &quot;sp1_der&quot;                                                      
##  [37] &quot;Cameron Duchatel&quot;                                             
##  [38] &quot;Mélina&quot;                                                       
##  [39] &quot;shanediver&quot;                                                   
##  [40] &quot;Nicole Kearney&quot;                                               
##  [41] &quot;Mike G. Rutherford&quot;                                           
##  [42] &quot;Maël Dewynter&quot;                                                
##  [43] &quot;Magali Bicharel&quot;                                              
##  [44] &quot;Zacky&quot;                                                        
##  [45] &quot;L Timmo&quot;                                                      
##  [46] &quot;barthazes&quot;                                                    
##  [47] &quot;sailorrain&quot;                                                   
##  [48] &quot;Gomen See&quot;                                                    
##  [49] &quot;Jim Moore (Maryland)&quot;                                         
##  [50] &quot;Brett Touzell&quot;                                                
##  [51] &quot;indus_fisher&quot;                                                 
##  [52] &quot;Michael Bakker Paiva&quot;                                         
##  [53] &quot;Natalie Scott&quot;                                                
##  [54] &quot;uwkwaj&quot;                                                       
##  [55] &quot;Francois Libert&quot;                                              
##  [56] &quot;Adam Smith&quot;                                                   
##  [57] &quot;Mark Rosenstein&quot;                                              
##  [58] &quot;Claire Goiran&quot;                                                
##  [59] &quot;marco91919&quot;                                                   
##  [60] &quot;vadermom&quot;                                                     
##  [61] &quot;Abby Hyde&quot;                                                    
##  [62] &quot;ulexeuropaeus&quot;                                                
##  [63] &quot;eugenio_101&quot;                                                  
##  [64] NA                                                             
##  [65] &quot;Joanne&quot;                                                       
##  [66] &quot;Emanuele Santarelli&quot;                                          
##  [67] &quot;eliotthuguet&quot;                                                 
##  [68] &quot;Thomas Menut&quot;                                                 
##  [69] &quot;Quentin Brunelle&quot;                                             
##  [70] &quot;sueinomaha&quot;                                                   
##  [71] &quot;Tony Stromberg&quot;                                               
##  [72] &quot;craigjhowe&quot;                                                   
##  [73] &quot;eerie_0601&quot;                                                   
##  [74] &quot;warren cameron&quot;                                               
##  [75] &quot;Pete McGee&quot;                                                   
##  [76] &quot;Matt Wilkie&quot;                                                  
##  [77] &quot;Juan José Areso&quot;                                              
##  [78] &quot;campbell_david&quot;                                               
##  [79] &quot;Graham Cleaver&quot;                                               
##  [80] &quot;Marisa Agarwal&quot;                                               
##  [81] &quot;stathi&quot;                                                       
##  [82] &quot;chrisv78&quot;                                                     
##  [83] &quot;jvicd91&quot;                                                      
##  [84] &quot;egarfield&quot;                                                    
##  [85] &quot;Falzon Adrien&quot;                                                
##  [86] &quot;Ashwin Srinivasan&quot;                                            
##  [87] &quot;michaelbaileyblackswan&quot;                                       
##  [88] &quot;boogan_boy&quot;                                                   
##  [89] &quot;Evan Trotzuk&quot;                                                 
##  [90] &quot;cccrll&quot;                                                       
##  [91] &quot;jmoulton44&quot;                                                   
##  [92] &quot;Donald Davesne&quot;                                               
##  [93] &quot;nhm6306&quot;                                                      
##  [94] &quot;mbp349&quot;                                                       
##  [95] &quot;Oscar Dove&quot;                                                   
##  [96] &quot;Susanne Spindler&quot;                                             
##  [97] &quot;joseph_dibattista&quot;                                            
##  [98] &quot;Leona Kustra&quot;                                                 
##  [99] &quot;sue_churchill&quot;                                                
## [100] &quot;Paul Sorensen&quot;                                                
## [101] &quot;Andy Tonge&quot;                                                   
## [102] &quot;eholden&quot;                                                      
## [103] &quot;Nick Perfetuo&quot;                                                
## [104] &quot;brutledge&quot;                                                    
## [105] &quot;Robin Sidney Kraft&quot;                                           
## [106] &quot;Dr Melissa Staines&quot;                                           
## [107] &quot;monarchatto&quot;                                                  
## [108] &quot;silvymartynez&quot;                                                
## [109] &quot;Josy Lai&quot;                                                     
## [110] &quot;Peter&quot;                                                        
## [111] &quot;Jens Sommer-Knudsen&quot;                                          
## [112] &quot;hyla75&quot;                                                       
## [113] &quot;Motusaga Vaeoso&quot;                                              
## [114] &quot;tracc&quot;                                                        
## [115] &quot;Albert Kang&quot;                                                  
## [116] &quot;Justin Chan&quot;                                                  
## [117] &quot;Garth Wimbush&quot;                                                
## [118] &quot;Dr Elodie Camprasse&quot;                                          
## [119] &quot;Jacek Pietruszewski&quot;                                          
## [120] &quot;bewambay&quot;                                                     
## [121] &quot;Jonathan Newman&quot;                                              
## [122] &quot;Jean-Paul Boerekamps&quot;                                         
## [123] &quot;Harry Rosenthal&quot;                                              
## [124] &quot;Adelma Hills&quot;                                                 
## [125] &quot;Jérôme Bosset&quot;                                                
## [126] &quot;Ashley Parr&quot;                                                  
## [127] &quot;Steve Smith&quot;                                                  
## [128] &quot;pclark2&quot;                                                      
## [129] &quot;majmikk&quot;                                                      
## [130] &quot;Nigel Marsh&quot;                                                  
## [131] &quot;Michal&quot;                                                       
## [132] &quot;Wasini Tour Guide&quot;                                            
## [133] &quot;John Sear&quot;                                                    
## [134] &quot;顏水蛭&quot;                                                       
## [135] &quot;David R&quot;                                                      
## [136] &quot;Rafi Amar&quot;                                                    
## [137] &quot;Victor HOYEAU&quot;                                                
## [138] &quot;呂一起(Lu i-chi)&quot;                                             
## [139] &quot;chloisf&quot;                                                      
## [140] &quot;Hao Sen Liu&quot;                                                  
## [141] &quot;Alastair Freeman&quot;                                             
## [142] &quot;Albin Eidenberger&quot;                                            
## [143] &quot;Daniela Kupschus&quot;                                             
## [144] &quot;Sophie Duc&quot;                                                   
## [145] &quot;Hiroya Kidoguchi&quot;                                             
## [146] &quot;calvin1976&quot;                                                   
## [147] &quot;Ivan Samra&quot;                                                   
## [148] &quot;kfa&quot;                                                          
## [149] &quot;desertnaturalist&quot;                                             
## [150] &quot;Matthew Bokach&quot;                                               
## [151] &quot;Josh Moloney&quot;                                                 
## [152] &quot;Zack&quot;                                                         
## [153] &quot;Chen Zhi&quot;                                                     
## [154] &quot;hokoonwong&quot;                                                   
## [155] &quot;blackdogto&quot;                                                   
## [156] &quot;Lesley Clements&quot;                                              
## [157] &quot;mwamlavya&quot;                                                    
## [158] &quot;Diveboard&quot;                                                    
## [159] &quot;Ian Shaw&quot;                                                     
## [160] &quot;Sylvain Le Bris&quot;                                              
## [161] &quot;Rachel Reese&quot;                                                 
## [162] &quot;Geoff Shuetrim&quot;                                               
## [163] &quot;nahpets&quot;                                                      
## [164] &quot;Mathew Zappa&quot;                                                 
## [165] &quot;Tony Strazzari&quot;                                               
## [166] &quot;Francesco Ricciardi&quot;                                          
## [167] &quot;Joachim Louis&quot;                                                
## [168] &quot;João D&#39;Andretta&quot;                                              
## [169] &quot;bja2800dk&quot;                                                    
## [170] &quot;Wayne and Pam Osborn&quot;                                         
## [171] &quot;Brenton Prigge&quot;                                               
## [172] &quot;Michael Long&quot;                                                 
## [173] &quot;Franco Colnago&quot;                                               
## [174] &quot;Geir Drange&quot;                                                  
## [175] &quot;Lisa_James&quot;                                                   
## [176] &quot;Christian Doedt&quot;                                              
## [177] &quot;Carmelo López Abad&quot;                                           
## [178] &quot;cindyjay&quot;                                                     
## [179] &quot;RLS&quot;                                                          
## [180] &quot;Board of the Museum and Art Gallery of the Northern Territory&quot;
## [181] &quot;Ewout Knoester&quot;                                               
## [182] &quot;Wolfgang Bittermann&quot;                                          
## [183] &quot;Paolo Mazzei&quot;                                                 
## 
## $datasetName
## [1] &quot;iNaturalist research-grade observations&quot;                                                                                                                                                      
## [2] NA                                                                                                                                                                                             
## [3] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands&quot;
## [4] &quot;Diveboard - Scuba diving citizen science&quot;                                                                                                                                                     
## [5] &quot;Instituto Nacional de Investigação Pesqueira&quot;                                                                                                                                                 
## [6] &quot;Tonga Reef survey data 2016-2018&quot;                                                                                                                                                             
## [7] &quot;NMNH Material Samples (USNM)&quot;                                                                                                                                                                 
## [8] &quot;NMNH Extant Biology&quot;                                                                                                                                                                          
## 
## $recordedBy
##   [1] &quot;mwanaisha_musa&quot;                                                                                                                  
##   [2] &quot;Bas Engels&quot;                                                                                                                      
##   [3] &quot;Roxanne Lazarus&quot;                                                                                                                 
##   [4] &quot;Joëlle VINCENT&quot;                                                                                                                  
##   [5] &quot;harrison_t&quot;                                                                                                                      
##   [6] &quot;Olly Morgan&quot;                                                                                                                     
##   [7] &quot;Johan Bas&quot;                                                                                                                       
##   [8] &quot;Tom Kirschey&quot;                                                                                                                    
##   [9] &quot;Andy Wech&quot;                                                                                                                       
##  [10] &quot;Tue Secher Jensen&quot;                                                                                                               
##  [11] &quot;Debra Baker&quot;                                                                                                                     
##  [12] &quot;Nic Katherine&quot;                                                                                                                   
##  [13] &quot;Andrew Taylor&quot;                                                                                                                   
##  [14] &quot;Blythe Nilson&quot;                                                                                                                   
##  [15] &quot;libby hepburn&quot;                                                                                                                   
##  [16] &quot;currowar&quot;                                                                                                                        
##  [17] &quot;divercraig&quot;                                                                                                                      
##  [18] &quot;Frank Krasovec&quot;                                                                                                                  
##  [19] &quot;pangolino&quot;                                                                                                                       
##  [20] &quot;Olivia Bañez&quot;                                                                                                                    
##  [21] &quot;Warren R. Francis&quot;                                                                                                               
##  [22] &quot;R Lai&quot;                                                                                                                           
##  [23] &quot;Robin Laws-Wall&quot;                                                                                                                 
##  [24] &quot;Jean-Paul Cassez&quot;                                                                                                                
##  [25] &quot;sylheb&quot;                                                                                                                          
##  [26] &quot;Nico K. Michiels&quot;                                                                                                                
##  [27] &quot;ambre_damour&quot;                                                                                                                    
##  [28] &quot;mattdowse&quot;                                                                                                                       
##  [29] &quot;gabrielleoutoftheblue&quot;                                                                                                           
##  [30] &quot;CCooke&quot;                                                                                                                          
##  [31] &quot;kaeliswift&quot;                                                                                                                      
##  [32] &quot;jacintaj&quot;                                                                                                                        
##  [33] &quot;ingmar51&quot;                                                                                                                        
##  [34] &quot;Judebirder&quot;                                                                                                                      
##  [35] &quot;nmi_fishguy&quot;                                                                                                                     
##  [36] &quot;sp1_der&quot;                                                                                                                         
##  [37] &quot;Cameron Duchatel&quot;                                                                                                                
##  [38] &quot;Mélina&quot;                                                                                                                          
##  [39] &quot;shanediver&quot;                                                                                                                      
##  [40] &quot;Nicole Kearney&quot;                                                                                                                  
##  [41] &quot;Mike G. Rutherford&quot;                                                                                                              
##  [42] &quot;Maël Dewynter&quot;                                                                                                                   
##  [43] &quot;Magali Bicharel&quot;                                                                                                                 
##  [44] &quot;Zacky&quot;                                                                                                                           
##  [45] &quot;L Timmo&quot;                                                                                                                         
##  [46] &quot;barthazes&quot;                                                                                                                       
##  [47] &quot;sailorrain&quot;                                                                                                                      
##  [48] &quot;Gomen See&quot;                                                                                                                       
##  [49] &quot;Jim Moore (Maryland)&quot;                                                                                                            
##  [50] &quot;Brett Touzell&quot;                                                                                                                   
##  [51] &quot;indus_fisher&quot;                                                                                                                    
##  [52] &quot;Michael Bakker Paiva&quot;                                                                                                            
##  [53] &quot;Natalie Scott&quot;                                                                                                                   
##  [54] &quot;uwkwaj&quot;                                                                                                                          
##  [55] &quot;Francois Libert&quot;                                                                                                                 
##  [56] &quot;Adam Smith&quot;                                                                                                                      
##  [57] &quot;Mark Rosenstein&quot;                                                                                                                 
##  [58] &quot;Claire Goiran&quot;                                                                                                                   
##  [59] &quot;marco91919&quot;                                                                                                                      
##  [60] &quot;vadermom&quot;                                                                                                                        
##  [61] &quot;Abby Hyde&quot;                                                                                                                       
##  [62] &quot;ulexeuropaeus&quot;                                                                                                                   
##  [63] &quot;eugenio_101&quot;                                                                                                                     
##  [64] &quot;&lt;a href=&#39;https://bee.questagame.com/#/profile/46905?questagame_user_id=46905&#39;&gt; DJWitherall|questagame.com&lt;/a&gt;&quot;                   
##  [65] &quot;Joanne&quot;                                                                                                                          
##  [66] &quot;Emanuele Santarelli&quot;                                                                                                             
##  [67] &quot;eliotthuguet&quot;                                                                                                                    
##  [68] &quot;Thomas Menut&quot;                                                                                                                    
##  [69] &quot;Anonymisé RGPD (FFESSM)&quot;                                                                                                         
##  [70] &quot;Quentin Brunelle&quot;                                                                                                                
##  [71] &quot;sueinomaha&quot;                                                                                                                      
##  [72] &quot;Tony Stromberg&quot;                                                                                                                  
##  [73] &quot;craigjhowe&quot;                                                                                                                      
##  [74] &quot;eerie_0601&quot;                                                                                                                      
##  [75] &quot;warren cameron&quot;                                                                                                                  
##  [76] &quot;Pete McGee&quot;                                                                                                                      
##  [77] &quot;Matt Wilkie&quot;                                                                                                                     
##  [78] &quot;Juan José Areso&quot;                                                                                                                 
##  [79] &quot;campbell_david&quot;                                                                                                                  
##  [80] &quot;Graham Cleaver&quot;                                                                                                                  
##  [81] &quot;Marisa Agarwal&quot;                                                                                                                  
##  [82] &quot;stathi&quot;                                                                                                                          
##  [83] &quot;chrisv78&quot;                                                                                                                        
##  [84] &quot;jvicd91&quot;                                                                                                                         
##  [85] &quot;egarfield&quot;                                                                                                                       
##  [86] &quot;Falzon Adrien&quot;                                                                                                                   
##  [87] &quot;Ashwin Srinivasan&quot;                                                                                                               
##  [88] &quot;michaelbaileyblackswan&quot;                                                                                                          
##  [89] &quot;boogan_boy&quot;                                                                                                                      
##  [90] &quot;Evan Trotzuk&quot;                                                                                                                    
##  [91] &quot;cccrll&quot;                                                                                                                          
##  [92] &quot;jmoulton44&quot;                                                                                                                      
##  [93] &quot;Donald Davesne&quot;                                                                                                                  
##  [94] &quot;nhm6306&quot;                                                                                                                         
##  [95] &quot;mbp349&quot;                                                                                                                          
##  [96] &quot;Oscar Dove&quot;                                                                                                                      
##  [97] &quot;Susanne Spindler&quot;                                                                                                                
##  [98] &quot;joseph_dibattista&quot;                                                                                                               
##  [99] &quot;Leona Kustra&quot;                                                                                                                    
## [100] &quot;sue_churchill&quot;                                                                                                                   
## [101] &quot;Paul Sorensen&quot;                                                                                                                   
## [102] &quot;Andy Tonge&quot;                                                                                                                      
## [103] &quot;eholden&quot;                                                                                                                         
## [104] &quot;Nick Perfetuo&quot;                                                                                                                   
## [105] &quot;brutledge&quot;                                                                                                                       
## [106] &quot;Robin Sidney Kraft&quot;                                                                                                              
## [107] &quot;Dr Melissa Staines&quot;                                                                                                              
## [108] &quot;monarchatto&quot;                                                                                                                     
## [109] &quot;silvymartynez&quot;                                                                                                                   
## [110] &quot;Josy Lai&quot;                                                                                                                        
## [111] &quot;Peter&quot;                                                                                                                           
## [112] &quot;Jens Sommer-Knudsen&quot;                                                                                                             
## [113] &quot;Charley SAKSIK (Poa Dive)&quot;                                                                                                       
## [114] &quot;hyla75&quot;                                                                                                                          
## [115] &quot;C Defrance Filimoehala, Guillaume Filimoehala (Iatok)&quot;                                                                           
## [116] &quot;Motusaga Vaeoso&quot;                                                                                                                 
## [117] &quot;tracc&quot;                                                                                                                           
## [118] &quot;Albert Kang&quot;                                                                                                                     
## [119] &quot;Justin Chan&quot;                                                                                                                     
## [120] &quot;Garth Wimbush&quot;                                                                                                                   
## [121] &quot;Dr Elodie Camprasse&quot;                                                                                                             
## [122] &quot;Jacek Pietruszewski&quot;                                                                                                             
## [123] &quot;bewambay&quot;                                                                                                                        
## [124] &quot;Jonathan Newman&quot;                                                                                                                 
## [125] &quot;Jean-Paul Boerekamps&quot;                                                                                                            
## [126] &quot;Harry Rosenthal&quot;                                                                                                                 
## [127] &quot;Adelma Hills&quot;                                                                                                                    
## [128] &quot;Jérôme Bosset&quot;                                                                                                                   
## [129] &quot;Ashley Parr&quot;                                                                                                                     
## [130] &quot;Steve Smith&quot;                                                                                                                     
## [131] &quot;pclark2&quot;                                                                                                                         
## [132] &quot;majmikk&quot;                                                                                                                         
## [133] &quot;C Defrance Filimoehala, Guillaume Filimoehala (Lagoon Safari)&quot;                                                                   
## [134] &quot;Nigel Marsh&quot;                                                                                                                     
## [135] &quot;Michal&quot;                                                                                                                          
## [136] &quot;Wasini Tour Guide&quot;                                                                                                               
## [137] &quot;John Sear&quot;                                                                                                                       
## [138] &quot;顏水蛭&quot;                                                                                                                          
## [139] &quot;David R&quot;                                                                                                                         
## [140] &quot;Rafi Amar&quot;                                                                                                                       
## [141] &quot;Victor HOYEAU&quot;                                                                                                                   
## [142] NA                                                                                                                                
## [143] &quot;呂一起(Lu i-chi)&quot;                                                                                                                
## [144] &quot;chloisf&quot;                                                                                                                         
## [145] &quot;Hao Sen Liu&quot;                                                                                                                     
## [146] &quot;Alastair Freeman&quot;                                                                                                                
## [147] &quot;Albin Eidenberger&quot;                                                                                                               
## [148] &quot;Daniela Kupschus&quot;                                                                                                                
## [149] &quot;Sophie Duc&quot;                                                                                                                      
## [150] &quot;Hiroya Kidoguchi&quot;                                                                                                                
## [151] &quot;calvin1976&quot;                                                                                                                      
## [152] &quot;Ivan Samra&quot;                                                                                                                      
## [153] &quot;-1718979377&quot;                                                                                                                     
## [154] &quot;kfa&quot;                                                                                                                             
## [155] &quot;Bernard Ludwig, Sophie Porcheron, Lucie Ludwig (CSAL)&quot;                                                                           
## [156] &quot;desertnaturalist&quot;                                                                                                                
## [157] &quot;Matthew Bokach&quot;                                                                                                                  
## [158] &quot;Josh Moloney&quot;                                                                                                                    
## [159] &quot;John Keesing - CSIRO&quot;                                                                                                            
## [160] &quot;Zack&quot;                                                                                                                            
## [161] &quot;Chen Zhi&quot;                                                                                                                        
## [162] &quot;2121647772&quot;                                                                                                                      
## [163] &quot;hokoonwong&quot;                                                                                                                      
## [164] &quot;blackdogto&quot;                                                                                                                      
## [165] &quot;Lesley Clements&quot;                                                                                                                 
## [166] &quot;mwamlavya&quot;                                                                                                                       
## [167] &quot;Diver initials CC&quot;                                                                                                               
## [168] &quot;Diver initials TCW&quot;                                                                                                              
## [169] &quot;Diver initials LMG&quot;                                                                                                              
## [170] &quot;Diver initials JWM&quot;                                                                                                              
## [171] &quot;Thomas Chardon&quot;                                                                                                                  
## [172] &quot;Simão Elias Mupengo&quot;                                                                                                             
## [173] &quot;Açúrcio Belmiro Cumbane&quot;                                                                                                         
## [174] &quot;Ian Shaw&quot;                                                                                                                        
## [175] &quot;539637721&quot;                                                                                                                       
## [176] &quot;Sylvain Le Bris&quot;                                                                                                                 
## [177] &quot;Rachel Reese&quot;                                                                                                                    
## [178] &quot;Geoff Shuetrim&quot;                                                                                                                  
## [179] &quot;nahpets&quot;                                                                                                                         
## [180] &quot;Karen Stone&quot;                                                                                                                     
## [181] &quot;Mathew Zappa&quot;                                                                                                                    
## [182] &quot;Heather Kramp&quot;                                                                                                                   
## [183] &quot;Tony Strazzari&quot;                                                                                                                  
## [184] &quot;Francesco Ricciardi&quot;                                                                                                             
## [185] &quot;Joachim Louis&quot;                                                                                                                   
## [186] &quot;Patrick Smallhorn-West&quot;                                                                                                          
## [187] &quot;João D&#39;Andretta&quot;                                                                                                                 
## [188] &quot;Diver initials VAB&quot;                                                                                                              
## [189] &quot;Nicet J.B., Pinault M.,Wickel J., Bigot L.,C. Bourmaud,Mulochau T., Zubia M., Conand C., Poupin,M. Schleyer,Benon P., G. Malfait&quot;
## [190] &quot;RNMR, IRD, université de La Réunion&quot;                                                                                             
## [191] &quot;Diver initials RMW&quot;                                                                                                              
## [192] &quot;Diver initials PMA&quot;                                                                                                              
## [193] &quot;Diver initials JPZ&quot;                                                                                                              
## [194] &quot;Diver initials KDG&quot;                                                                                                              
## [195] &quot;Diver initials ARP&quot;                                                                                                              
## [196] &quot;Rangel de Jesus&quot;                                                                                                                 
## [197] &quot;bja2800dk&quot;                                                                                                                       
## [198] &quot;Wayne and Pam Osborn&quot;                                                                                                            
## [199] &quot;Brenton Prigge&quot;                                                                                                                  
## [200] &quot;xavier, tristan (haustral plongée)&quot;                                                                                              
## [201] &quot;Jorge Fichane Zibane&quot;                                                                                                            
## [202] &quot;Michael Long&quot;                                                                                                                    
## [203] &quot;Franco Colnago&quot;                                                                                                                  
## [204] &quot;Kenneth Foster&quot;                                                                                                                  
## [205] &quot;Sebastien Rezzonico&quot;                                                                                                             
## [206] &quot;Herculano Patricio&quot;                                                                                                              
## [207] &quot;Geir Drange&quot;                                                                                                                     
## [208] &quot;Isaias Jeckson Elija&quot;                                                                                                            
## [209] &quot;J. Williams &amp; S. Planes&quot;                                                                                                         
## [210] &quot;S. Planes&quot;                                                                                                                       
## [211] &quot;Nicet JB., Pinault M., Wickel J., Bigot L., Mulochau T., Zubia M., Conand C., Poupin J., Barrère A., Quod, J.P., Benon P&quot;        
## [212] &quot;Lisa_James&quot;                                                                                                                      
## [213] &quot;Christian Doedt&quot;                                                                                                                 
## [214] &quot;Marie&quot;                                                                                                                           
## [215] &quot;Gil Zaqueu Maquene&quot;                                                                                                              
## [216] &quot;Silva Carlos Mondlane&quot;                                                                                                           
## [217] &quot;Sam Hansen&quot;                                                                                                                      
## [218] &quot;Carmelo López Abad&quot;                                                                                                              
## [219] &quot;cindyjay&quot;                                                                                                                        
## [220] &quot;lisa hengelein&quot;                                                                                                                  
## [221] &quot;JS&quot;                                                                                                                              
## [222] &quot;JPS&quot;                                                                                                                             
## [223] &quot;TPC&quot;                                                                                                                             
## [224] &quot;Maguelone GRATEAU, Henri GRATEAU (ESSOR)&quot;                                                                                        
## [225] &quot;David Bishop&quot;                                                                                                                    
## [226] &quot;Ewout Knoester&quot;                                                                                                                  
## [227] &quot;Diver initials AEG&quot;                                                                                                              
## [228] &quot;Diver initials JMA&quot;                                                                                                              
## [229] &quot;Diver initials JMM&quot;                                                                                                              
## [230] &quot;Diver initials KCL&quot;                                                                                                              
## [231] &quot;Diver initials EC&quot;                                                                                                               
## [232] &quot;Diver initials KS&quot;                                                                                                               
## [233] &quot;Diver initials EMD&quot;                                                                                                              
## [234] &quot;Wolfgang Bittermann&quot;                                                                                                             
## [235] &quot;Pieterjl&quot;                                                                                                                        
## [236] &quot;seastung&quot;                                                                                                                        
## [237] &quot;angelique tourret (o sea bleu)&quot;                                                                                                  
## [238] &quot;Charley SAKSIK (BioObs)&quot;                                                                                                         
## [239] &quot;Paolo Mazzei&quot;                                                                                                                    
## [240] &quot;Morgan&quot;                                                                                                                          
## [241] &quot;Jyore&quot;                                                                                                                           
## [242] &quot;IVS&quot;                                                                                                                             
## [243] &quot;Viriato José Mutelecanamba&quot;                                                                                                      
## [244] &quot;Christina Estrup&quot;                                                                                                                
## 
## $depth
##  [1]     NA  0.000 20.000 20.700  5.450 10.600 11.745  5.000  6.000 11.300
## [11]  7.000 13.500 15.400 16.500 11.400 20.600 23.400 24.400 23.700 21.300
## [21] 21.350 14.200 12.250 24.850  9.300  9.700 21.000  4.800 16.200 15.600
## [31]  9.200  8.650 21.900 22.650 20.150 12.800 12.700 14.650 14.550 12.540
## [41]  8.750  9.100 10.770 15.000 10.000 18.950 19.200 23.000  6.350  6.850
## [51] 15.950  9.900  9.600 17.800 18.000  9.000  8.500 13.000  9.400  9.500
## [61] 22.200  8.990  5.330 14.480 22.000 19.500 12.000 21.950
## 
## $locality
##  [1] NA                                                                                                      
##  [2] &quot;west of Taminazaki, Tamina, China, Oshima?gun, Okinoerabu?jima island, Amami Islands, Kagoshima, Japan&quot;
##  [3] &quot;Taminazaki, Tamina, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan&quot;        
##  [4] &quot;TK25 Blatt 3714/1 - Osnabrück&quot;                                                                         
##  [5] &quot;Ashmore Reef&quot;                                                                                          
##  [6] &quot;west of Tamina, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan&quot;            
##  [7] &quot;Zoo Köln&quot;                                                                                              
##  [8] &quot;off Yakomo, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan&quot;                
##  [9] &quot;Hanging Gardens&quot;                                                                                       
## [10] &quot;Govuro Mar Aberto&quot;                                                                                     
## [11] &quot;Jangamo Estuário&quot;                                                                                      
## [12] &quot;Curieuse Island&quot;                                                                                       
## [13] &quot;Toku&quot;                                                                                                  
## [14] &quot;Hunga&quot;                                                                                                 
## [15] &quot;Maxixe Estuário&quot;                                                                                       
## [16] &quot;Inhassoro MAI&quot;                                                                                         
## [17] &quot;Urasoko, Kuchierabujima,Yakushima, Kumage-gun, Kuchierabu-jima island, Osumi Islands, Kagoshima, Japan&quot;
## [18] &quot;3 Pulgul St, Urangan QLD 4655, Australia&quot;                                                              
## [19] &quot;Crystal Rock, Komodo National Park&quot;                                                                    
## [20] &quot;Inhassoro MAII&quot;                                                                                        
## [21] &quot;Morrumbene Estuário&quot;                                                                                   
## [22] &quot;Wallis and Futuna, Futuna Island, exposed rocks off north point, exposed rocky reef and channels.&quot;     
## [23] &quot;Aquarium&quot;                                                                                              
## [24] &quot;Vilankulo MA II&quot;                                                                                       
## [25] &quot;Sodwana Bay, Bikini South&quot;                                                                             
## [26] &quot;Sodwana Bay, Caves &amp; Overhangs&quot;                                                                        
## [27] &quot;Bougainville Reef Lagoon East&quot;                                                                         
## [28] &quot;Pulau Kasiui SW&quot;                                                                                       
## [29] &quot;Kanar Yapas&quot;                                                                                           
## [30] &quot;Umabana, Yonaguni, Yonaguni, Yaeyama-gun, Yonaguni-jima island, Yaeyama Islands, Okinawa, Japan&quot;       
## [31] &quot;Evans Shoal Area, Timor Box, Timor Sea&quot;                                                                
## [32] &quot;Capricorn Bunker reef&quot;                                                                                 
## [33] &quot;Claraboyas Reef&quot;                                                                                       
## [34] &quot;Sodwana Bay&quot;                                                                                           
## [35] &quot;Bikini&quot;                                                                                                
## [36] &quot;Sunkist Reef&quot;                                                                                          
## [37] &quot;Rock Key (Reef)&quot;                                                                                       
## [38] &quot;Paradise House reef&quot;                                                                                   
## [39] &quot;Vilankulo MA I&quot;                                                                                        
## [40] &quot;The Atoll&quot;                                                                                             
## 
## $habitat
##  [1] NA                                            
##  [2] &quot;Forereef : ROB : Rock/Boulder&quot;               
##  [3] &quot;Forereef : SAG : Spur and Groove&quot;            
##  [4] &quot;Protected Slope : AGR : Aggregate Reef&quot;      
##  [5] &quot;ZZZ&quot;                                         
##  [6] &quot;Exposed Wall&quot;                                
##  [7] &quot;Forereef : AGR : Aggregate Reef&quot;             
##  [8] &quot;Forereef : PSC : Pavement with Sand Channels&quot;
##  [9] &quot;Forereef : PAV : Pavement&quot;                   
## [10] &quot;Forereef : PPR : Pavement with Patch Reefs&quot;  
## [11] &quot;Coral Reef&quot;                                  
## [12] &quot;Forereef : RRB : Reef Rubble&quot;</code></pre>
</div>
<div id="problemas-não-reportados" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Problemas não
reportados</h2>
<p>Agora iniciamos o processo de checagem mais fina que não é realizada
pelo algoritmo, por apresentar especificidades que vão além de sua
programação. Inicialmente, podemos verificar se as coordenadas são
válidas (e.g., latitudes &gt; 90 ou longitude &gt; 180) utilizando
funções dos pacotes <a
href="https://docs.ropensci.org/CoordinateCleaner/index.html"><code>CoordinateCleaner</code></a>
e <a
href="https://brunobrr.github.io/bdc/index.html"><code>bcd</code></a>.
Clicando nos links dos pacotes vocês podem checar diversas outras
funcionalidades oferecidas.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">library</span>(bdc)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">library</span>(CoordinateCleaner)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># checar coordenadas válidas</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>check_pf <span class="ot">&lt;-</span> </span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  bdc<span class="sc">::</span><span class="fu">bdc_coordinates_outOfRange</span>(</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    <span class="at">data =</span> dori_gbif1,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    <span class="at">lat =</span> <span class="st">&quot;decimalLatitude&quot;</span>,</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    <span class="at">lon =</span> <span class="st">&quot;decimalLongitude&quot;</span>)</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co"># checar coordenadas válidas e próximas a capitais (muitas vezes as coordenadas são erroneamente associadas a capitais dos países)</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>cl <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>  CoordinateCleaner<span class="sc">::</span><span class="fu">clean_coordinates</span>(<span class="at">species =</span> <span class="st">&quot;acceptedScientificName&quot;</span>,</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>                                       <span class="at">lat =</span> <span class="st">&quot;decimalLatitude&quot;</span>,</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>                                       <span class="at">lon =</span> <span class="st">&quot;decimalLongitude&quot;</span>,</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>                                       <span class="at">tests =</span> <span class="fu">c</span>(<span class="st">&quot;capitals&quot;</span>, </span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>                                                 <span class="st">&quot;centroids&quot;</span>,<span class="st">&quot;equal&quot;</span>, </span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>                                                 <span class="st">&quot;gbif&quot;</span>, <span class="st">&quot;institutions&quot;</span>, </span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>                                                 <span class="st">&quot;outliers&quot;</span>, <span class="st">&quot;seas&quot;</span>, </span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>                                                 <span class="st">&quot;zeros&quot;</span>))</span></code></pre></div>
<pre><code>## Reading layer `ne_50m_land&#39; from data source 
##   `/private/var/folders/xx/6x1gs2p90qs1n_41pc68sd0m0000gn/T/Rtmpg8fujL/ne_50m_land.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 1420 features and 3 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -180 ymin: -89.99893 xmax: 180 ymax: 83.59961
## Geodetic CRS:  WGS 84</code></pre>
<p>Na imagem abaixo podemos dar uma rápida conferida nos alertas
indicados pelas funções. Não tivemos nenhuma coordenada inválida, mas
algumas ocorrências parecem estar muito próximas a capitais. No entanto,
todas as capitais estão em terra e, nesse caso, temos que investigar se
as ocorrências estão em terra (lembre-se a Dori vive no mar!) ou apenas
próximas a países insulares.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># verificar coordenadas com flags</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co"># capitais (padrão é um raio de 10km)</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>  <span class="fu">borders</span>(<span class="st">&quot;world&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> cl, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> <span class="st">`</span><span class="at">.cap</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>  <span class="fu">coord_quickmap</span>() <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="atividade3_files/figure-html/tags-1.png" width="672" /></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># pontos no mar</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  <span class="fu">borders</span>(<span class="st">&quot;world&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> cl, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> <span class="st">`</span><span class="at">.sea</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  <span class="fu">coord_quickmap</span>() <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="atividade3_files/figure-html/tags-2.png" width="672" /></p>
<p>Uma maneira fácil de excluir dados em terra é checar a distribuição
das ocorrências em relação às regiões oceanográficas indicadas nos dados
(<code>waterBody</code>). Isso vale apenas para o OBIS, mas se o
objetivo é avaliar espécies terrestres, basta excluir as espécies com
<em>flags</em> <strong>TRUE</strong> na coluna <em>sea</em> criada pela
função <code>cc_sea</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># investigar niveis suspeitos</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="fu">distinct</span>(waterBody) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code></pre></div>
<pre><code>##  [1] NA                    &quot;North Pacific Ocean&quot; &quot;Celebes Sea&quot;        
##  [4] &quot;Pacific Ocean&quot;       &quot;Flores Sea&quot;          &quot;South Pacific Ocean&quot;
##  [7] &quot;Caribbean Sea&quot;       &quot;Gulf of Mexico&quot;      &quot;Atlantic Ocean&quot;     
## [10] &quot;Verde Island&quot;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># waterBody</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  <span class="fu">group_by</span>(waterBody) <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">occ =</span> <span class="fu">length</span>(scientificName)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(occ, <span class="at">y=</span>waterBody)) <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>) </span></code></pre></div>
<p><img src="atividade3_files/figure-html/coords1-1.png" width="672" /></p>
<p>Aparentemente, esta espécie tem sido reportada no mundo todo. Com o
sucesso da animação <em>Procurando Nemo</em>, já temos uma ideia de que
a <strong>Dori</strong> tem ocorrência nas águas australianas, mas
podemos acessar bancos de dados especializados para checar estas
informações. No caso de peixes (Osteichthyes e Chondrichthyes) o <a
href="https://fishbase.org"><em>FishBase</em></a> é a fonte mais
atualizada de informações deste grupo. Depois desta confirmação, podemos
suspeitar das ocorrências indicadas no Atlântico e, o tratamento mais
rigoroso é a exclusão de qualquer ocorrência suspeita.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># fonte das regioes erradas</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="fu">filter</span>(waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Atlantic Ocean&quot;</span>, <span class="st">&quot;Carribean&quot;</span>, <span class="st">&quot;Royal Caribbean&quot;</span>, <span class="st">&quot;Carribean Sea&quot;</span>, <span class="st">&quot;Bonaire&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>  <span class="fu">distinct</span>(datasetName)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   datasetName                             
##   &lt;chr&gt;                                   
## 1 Diveboard - Scuba diving citizen science</code></pre>
<p>Alguma característica destas ocorrências do Atlântico podem dar
pistas de como continuar filtrando os resultados. Neste caso, abaixo
podemos ver que, ao investigarmos um programa de ciência específico de
identificação realizada por mergulhadores amadores, notamos que este
concentra a maior parte das suspeitas. Assim, é melhor ser conservador e
remover todas as ocorrências associadas a tal programa.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>dori_gbif1 <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Atlantic Ocean&quot;</span>, <span class="st">&quot;Carribean&quot;</span>, <span class="st">&quot;Royal Caribbean&quot;</span>, <span class="st">&quot;Carribean Sea&quot;</span>, <span class="st">&quot;Bonaire&quot;</span>))</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co"># 14 ocorrencias</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>  <span class="fu">filter</span>(datasetName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Diveboard - Scuba diving citizen science&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>  <span class="fu">data.frame</span>()</span></code></pre></div>
<pre><code>##                           scientificName                 acceptedScientificName
## 1 Paracanthurus hepatus (Linnaeus, 1766) Paracanthurus hepatus (Linnaeus, 1766)
## 2 Paracanthurus hepatus (Linnaeus, 1766) Paracanthurus hepatus (Linnaeus, 1766)
## 3 Paracanthurus hepatus (Linnaeus, 1766) Paracanthurus hepatus (Linnaeus, 1766)
## 4 Paracanthurus hepatus (Linnaeus, 1766) Paracanthurus hepatus (Linnaeus, 1766)
## 5 Paracanthurus hepatus (Linnaeus, 1766) Paracanthurus hepatus (Linnaeus, 1766)
## 6 Paracanthurus hepatus (Linnaeus, 1766) Paracanthurus hepatus (Linnaeus, 1766)
##   decimalLatitude decimalLongitude     issues      waterBody     basisOfRecord
## 1         4.10933         118.6250 cdc,cdreps    Celebes Sea HUMAN_OBSERVATION
## 2        -8.40000         119.3500 cdc,cdreps     Flores Sea HUMAN_OBSERVATION
## 3        16.13510         -61.7710 cdc,cdreps  Caribbean Sea HUMAN_OBSERVATION
## 4        23.21210         -81.1858 cdc,cdreps Gulf of Mexico HUMAN_OBSERVATION
## 5        24.45500         -81.8583     cdreps Gulf of Mexico HUMAN_OBSERVATION
## 6        13.52280         120.9930 cdc,cdreps   Verde Island HUMAN_OBSERVATION
##   occurrenceStatus rightsHolder                              datasetName
## 1          PRESENT    Diveboard Diveboard - Scuba diving citizen science
## 2          PRESENT    Diveboard Diveboard - Scuba diving citizen science
## 3          PRESENT    Diveboard Diveboard - Scuba diving citizen science
## 4          PRESENT    Diveboard Diveboard - Scuba diving citizen science
## 5          PRESENT    Diveboard Diveboard - Scuba diving citizen science
## 6          PRESENT    Diveboard Diveboard - Scuba diving citizen science
##            recordedBy  depth                           locality habitat
## 1      Thomas Chardon 11.745                    Hanging Gardens    &lt;NA&gt;
## 2 Sebastien Rezzonico 12.540 Crystal Rock, Komodo National Park    &lt;NA&gt;
## 3               Marie 10.770                           Aquarium    &lt;NA&gt;
## 4        David Bishop 10.000                    Claraboyas Reef    &lt;NA&gt;
## 5               Jyore  5.330                    Rock Key (Reef)    &lt;NA&gt;
## 6    Christina Estrup 14.480                          The Atoll    &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># filtrar todas do dataset suspeito</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>dori_gbif_noDiveboard <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>datasetName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Diveboard - Scuba diving citizen science&quot;</span>))</span></code></pre></div>
<p>Agora não vemos mais nenhuma ocorrência no Atlântico! Mas ainda
existem algumas suspeitas no Mediterrâneo e Mar do Norte (a Dori é
tropical!).</p>
<p>Vamos aos últimos cortes. Além das ocorrências no Mediterrâneo, há
uma no Japão que também parece muito ao norte, assim, vamos ver as
coordenadas mais boreais e excluir.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>dori_gbif_noDiveboard <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>  <span class="fu">filter</span>(decimalLatitude <span class="sc">&gt;</span> <span class="dv">25</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>decimalLatitude) <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>  <span class="fu">data.frame</span>()</span></code></pre></div>
<pre><code>##                            scientificName
## 1  Paracanthurus hepatus (Linnaeus, 1766)
## 2  Paracanthurus hepatus (Linnaeus, 1766)
## 3  Paracanthurus hepatus (Linnaeus, 1766)
## 4  Paracanthurus hepatus (Linnaeus, 1766)
## 5  Paracanthurus hepatus (Linnaeus, 1766)
## 6  Paracanthurus hepatus (Linnaeus, 1766)
## 7  Paracanthurus hepatus (Linnaeus, 1766)
## 8  Paracanthurus hepatus (Linnaeus, 1766)
## 9  Paracanthurus hepatus (Linnaeus, 1766)
## 10 Paracanthurus hepatus (Linnaeus, 1766)
## 11 Paracanthurus hepatus (Linnaeus, 1766)
## 12 Paracanthurus hepatus (Linnaeus, 1766)
## 13 Paracanthurus hepatus (Linnaeus, 1766)
## 14 Paracanthurus hepatus (Linnaeus, 1766)
## 15 Paracanthurus hepatus (Linnaeus, 1766)
## 16 Paracanthurus hepatus (Linnaeus, 1766)
## 17 Paracanthurus hepatus (Linnaeus, 1766)
##                    acceptedScientificName decimalLatitude decimalLongitude
## 1  Paracanthurus hepatus (Linnaeus, 1766)        52.27359         8.040755
## 2  Paracanthurus hepatus (Linnaeus, 1766)        50.95951         6.974559
## 3  Paracanthurus hepatus (Linnaeus, 1766)        43.41068         6.852053
## 4  Paracanthurus hepatus (Linnaeus, 1766)        34.94411       139.091344
## 5  Paracanthurus hepatus (Linnaeus, 1766)        30.48778       130.152500
## 6  Paracanthurus hepatus (Linnaeus, 1766)        28.16963       129.290530
## 7  Paracanthurus hepatus (Linnaeus, 1766)        27.40472       128.533889
## 8  Paracanthurus hepatus (Linnaeus, 1766)        27.38889       128.521111
## 9  Paracanthurus hepatus (Linnaeus, 1766)        27.38472       128.525556
## 10 Paracanthurus hepatus (Linnaeus, 1766)        27.32833       128.557778
## 11 Paracanthurus hepatus (Linnaeus, 1766)        26.29118       126.788447
## 12 Paracanthurus hepatus (Linnaeus, 1766)        26.21913       127.288501
## 13 Paracanthurus hepatus (Linnaeus, 1766)        26.21651       127.293438
## 14 Paracanthurus hepatus (Linnaeus, 1766)        26.20191       127.290300
## 15 Paracanthurus hepatus (Linnaeus, 1766)        26.20069       127.288367
## 16 Paracanthurus hepatus (Linnaeus, 1766)        26.18904       127.403891
## 17 Paracanthurus hepatus (Linnaeus, 1766)        25.01549       122.000931
##                               issues waterBody      basisOfRecord
## 1                 cdc,cdround,gass84      &lt;NA&gt;  HUMAN_OBSERVATION
## 2                 cdc,cdround,gass84      &lt;NA&gt;  HUMAN_OBSERVATION
## 3                        cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
## 4                        cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
## 5          cdc,gass84,incomis,inmafu      &lt;NA&gt; PRESERVED_SPECIMEN
## 6                        cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
## 7  cdc,cdround,gass84,incomis,inmafu      &lt;NA&gt; PRESERVED_SPECIMEN
## 8  cdc,cdround,gass84,incomis,inmafu      &lt;NA&gt; PRESERVED_SPECIMEN
## 9  cdc,cdround,gass84,incomis,inmafu      &lt;NA&gt; PRESERVED_SPECIMEN
## 10 cdc,cdround,gass84,incomis,inmafu      &lt;NA&gt; PRESERVED_SPECIMEN
## 11                               cdc      &lt;NA&gt;  HUMAN_OBSERVATION
## 12                       cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
## 13                       cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
## 14                          cdc,cudc      &lt;NA&gt;  HUMAN_OBSERVATION
## 15                       cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
## 16                       cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
## 17                       cdc,cdround      &lt;NA&gt;  HUMAN_OBSERVATION
##    occurrenceStatus       rightsHolder                             datasetName
## 1           PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 2           PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 3           PRESENT             Mélina iNaturalist research-grade observations
## 4           PRESENT         eerie_0601 iNaturalist research-grade observations
## 5           PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 6           PRESENT            chloisf iNaturalist research-grade observations
## 7           PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 8           PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 9           PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 10          PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 11          PRESENT               Zack iNaturalist research-grade observations
## 12          PRESENT            nhm6306 iNaturalist research-grade observations
## 13          PRESENT Mike G. Rutherford iNaturalist research-grade observations
## 14          PRESENT               &lt;NA&gt;                                    &lt;NA&gt;
## 15          PRESENT     Nicole Kearney iNaturalist research-grade observations
## 16          PRESENT                kfa iNaturalist research-grade observations
## 17          PRESENT             顏水蛭 iNaturalist research-grade observations
##                 recordedBy depth
## 1              -1718979377    NA
## 2               2121647772    NA
## 3                   Mélina    NA
## 4               eerie_0601    NA
## 5                     &lt;NA&gt;    NA
## 6                  chloisf    NA
## 7                     &lt;NA&gt;    NA
## 8                     &lt;NA&gt;    NA
## 9                     &lt;NA&gt;    NA
## 10                    &lt;NA&gt;    20
## 11                    Zack    NA
## 12                 nhm6306    NA
## 13      Mike G. Rutherford    NA
## 14 Anonymisé RGPD (FFESSM)    NA
## 15          Nicole Kearney    NA
## 16                     kfa    NA
## 17                  顏水蛭    NA
##                                                                                                  locality
## 1                                                                           TK25 Blatt 3714/1 - Osnabrück
## 2                                                                                                Zoo Köln
## 3                                                                                                    &lt;NA&gt;
## 4                                                                                                    &lt;NA&gt;
## 5  Urasoko, Kuchierabujima,Yakushima, Kumage-gun, Kuchierabu-jima island, Osumi Islands, Kagoshima, Japan
## 6                                                                                                    &lt;NA&gt;
## 7          Taminazaki, Tamina, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan
## 8              west of Tamina, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan
## 9  west of Taminazaki, Tamina, China, Oshima?gun, Okinoerabu?jima island, Amami Islands, Kagoshima, Japan
## 10                 off Yakomo, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan
## 11                                                                                                   &lt;NA&gt;
## 12                                                                                                   &lt;NA&gt;
## 13                                                                                                   &lt;NA&gt;
## 14                                                                                                   &lt;NA&gt;
## 15                                                                                                   &lt;NA&gt;
## 16                                                                                                   &lt;NA&gt;
## 17                                                                                                   &lt;NA&gt;
##    habitat
## 1     &lt;NA&gt;
## 2     &lt;NA&gt;
## 3     &lt;NA&gt;
## 4     &lt;NA&gt;
## 5     &lt;NA&gt;
## 6     &lt;NA&gt;
## 7     &lt;NA&gt;
## 8     &lt;NA&gt;
## 9     &lt;NA&gt;
## 10    &lt;NA&gt;
## 11    &lt;NA&gt;
## 12    &lt;NA&gt;
## 13    &lt;NA&gt;
## 14    &lt;NA&gt;
## 15    &lt;NA&gt;
## 16    &lt;NA&gt;
## 17    &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>dori_gbif_ok <span class="ot">&lt;-</span> dori_gbif_noDiveboard <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>  <span class="fu">filter</span>(decimalLatitude <span class="sc">&lt;</span> <span class="dv">31</span>) </span></code></pre></div>
<p>Como o registro do Japão é de um espécie preservado, indica que
possivelmente foi coletado nesta latitude mesmo, então este vamos
manter.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="fu">library</span>(mapdata)</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">&#39;world&#39;</span>)</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>  </span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="co"># checar pontos</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a> </span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dori_gbif_ok, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/plot-gbif-1.png" width="672" /></p>
<p>Podemos usar a profundidade como outro critério, pois esta espécie é
associada apenas a recifes rasos segundo o <strong>FishBase</strong>. E
parece tudo ok.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co"># checar profundidade</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>dori_gbif_ok <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> depth, <span class="at">fill =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() </span></code></pre></div>
<p><img src="atividade3_files/figure-html/depth-gbif-1.png" width="672" /></p>
<hr />
<div id="obis" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span>
<strong>OBIS</strong></h3>
<p>Agora vamos fazer os mesmos procedimentos com os dados do
<strong>OBIS</strong>, utilizando o pacote <code>robis</code> e a função
<code>occurrence</code> deste pacote.</p>
<ol style="list-style-type: decimal">
<li>Baixar as ocorrências</li>
</ol>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="do">## OBIS</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>dori_obis <span class="ot">&lt;-</span> robis<span class="sc">::</span><span class="fu">occurrence</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Checar os dados</li>
</ol>
<p>Temos variáveis com os mesmos nomes, pois ambos usam o sistema
<code>DwC</code>, mas os problemas reportados neste caso são indicados
na coluna <code>flags</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co"># checar dados</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="fu">names</span>(dori_obis)</span></code></pre></div>
<pre><code>##   [1] &quot;basisOfRecord&quot;                      
##   [2] &quot;brackish&quot;                           
##   [3] &quot;class&quot;                              
##   [4] &quot;classid&quot;                            
##   [5] &quot;coordinateUncertaintyInMeters&quot;      
##   [6] &quot;country&quot;                            
##   [7] &quot;decimalLatitude&quot;                    
##   [8] &quot;decimalLongitude&quot;                   
##   [9] &quot;family&quot;                             
##  [10] &quot;familyid&quot;                           
##  [11] &quot;footprintWKT&quot;                       
##  [12] &quot;genus&quot;                              
##  [13] &quot;genusid&quot;                            
##  [14] &quot;geodeticDatum&quot;                      
##  [15] &quot;gigaclass&quot;                          
##  [16] &quot;gigaclassid&quot;                        
##  [17] &quot;infraphylum&quot;                        
##  [18] &quot;infraphylumid&quot;                      
##  [19] &quot;kingdom&quot;                            
##  [20] &quot;kingdomid&quot;                          
##  [21] &quot;locality&quot;                           
##  [22] &quot;marine&quot;                             
##  [23] &quot;occurrenceID&quot;                       
##  [24] &quot;occurrenceStatus&quot;                   
##  [25] &quot;order&quot;                              
##  [26] &quot;orderid&quot;                            
##  [27] &quot;parvphylum&quot;                         
##  [28] &quot;parvphylumid&quot;                       
##  [29] &quot;phylum&quot;                             
##  [30] &quot;phylumid&quot;                           
##  [31] &quot;scientificName&quot;                     
##  [32] &quot;scientificNameID&quot;                   
##  [33] &quot;species&quot;                            
##  [34] &quot;speciesid&quot;                          
##  [35] &quot;subphylum&quot;                          
##  [36] &quot;subphylumid&quot;                        
##  [37] &quot;superclass&quot;                         
##  [38] &quot;superclassid&quot;                       
##  [39] &quot;id&quot;                                 
##  [40] &quot;dataset_id&quot;                         
##  [41] &quot;node_id&quot;                            
##  [42] &quot;dropped&quot;                            
##  [43] &quot;absence&quot;                            
##  [44] &quot;originalScientificName&quot;             
##  [45] &quot;aphiaID&quot;                            
##  [46] &quot;flags&quot;                              
##  [47] &quot;bathymetry&quot;                         
##  [48] &quot;shoredistance&quot;                      
##  [49] &quot;sst&quot;                                
##  [50] &quot;sss&quot;                                
##  [51] &quot;accessRights&quot;                       
##  [52] &quot;catalogNumber&quot;                      
##  [53] &quot;collectionCode&quot;                     
##  [54] &quot;collectionID&quot;                       
##  [55] &quot;datasetName&quot;                        
##  [56] &quot;day&quot;                                
##  [57] &quot;individualCount&quot;                    
##  [58] &quot;institutionCode&quot;                    
##  [59] &quot;license&quot;                            
##  [60] &quot;month&quot;                              
##  [61] &quot;ownerInstitutionCode&quot;               
##  [62] &quot;recordNumber&quot;                       
##  [63] &quot;recordedBy&quot;                         
##  [64] &quot;rightsHolder&quot;                       
##  [65] &quot;taxonID&quot;                            
##  [66] &quot;type&quot;                               
##  [67] &quot;year&quot;                               
##  [68] &quot;datasetID&quot;                          
##  [69] &quot;date_end&quot;                           
##  [70] &quot;date_mid&quot;                           
##  [71] &quot;date_start&quot;                         
##  [72] &quot;date_year&quot;                          
##  [73] &quot;depth&quot;                              
##  [74] &quot;eventDate&quot;                          
##  [75] &quot;eventID&quot;                            
##  [76] &quot;footprintSRS&quot;                       
##  [77] &quot;language&quot;                           
##  [78] &quot;maximumDepthInMeters&quot;               
##  [79] &quot;minimumDepthInMeters&quot;               
##  [80] &quot;modified&quot;                           
##  [81] &quot;dataGeneralizations&quot;                
##  [82] &quot;georeferenceProtocol&quot;               
##  [83] &quot;georeferencedBy&quot;                    
##  [84] &quot;habitat&quot;                            
##  [85] &quot;identifiedBy&quot;                       
##  [86] &quot;institutionID&quot;                      
##  [87] &quot;island&quot;                             
##  [88] &quot;islandGroup&quot;                        
##  [89] &quot;maximumDistanceAboveSurfaceInMeters&quot;
##  [90] &quot;occurrenceRemarks&quot;                  
##  [91] &quot;references&quot;                         
##  [92] &quot;sampleSizeUnit&quot;                     
##  [93] &quot;sampleSizeValue&quot;                    
##  [94] &quot;samplingProtocol&quot;                   
##  [95] &quot;scientificNameAuthorship&quot;           
##  [96] &quot;specificEpithet&quot;                    
##  [97] &quot;stateProvince&quot;                      
##  [98] &quot;taxonRank&quot;                          
##  [99] &quot;verbatimDepth&quot;                      
## [100] &quot;verbatimEventDate&quot;                  
## [101] &quot;vernacularName&quot;                     
## [102] &quot;waterBody&quot;                          
## [103] &quot;continent&quot;                          
## [104] &quot;fieldNumber&quot;                        
## [105] &quot;georeferenceRemarks&quot;                
## [106] &quot;higherClassification&quot;               
## [107] &quot;higherGeography&quot;                    
## [108] &quot;nomenclaturalCode&quot;                  
## [109] &quot;preparations&quot;                       
## [110] &quot;unaccepted&quot;                         
## [111] &quot;verbatimLatitude&quot;                   
## [112] &quot;verbatimLongitude&quot;                  
## [113] &quot;coordinatePrecision&quot;                
## [114] &quot;organismQuantity&quot;                   
## [115] &quot;organismQuantityType&quot;               
## [116] &quot;sex&quot;                                
## [117] &quot;countryCode&quot;                        
## [118] &quot;samplingEffort&quot;                     
## [119] &quot;startDayOfYear&quot;                     
## [120] &quot;eventTime&quot;                          
## [121] &quot;maximumElevationInMeters&quot;           
## [122] &quot;minimumElevationInMeters&quot;           
## [123] &quot;acceptedNameUsage&quot;                  
## [124] &quot;acceptedNameUsageID&quot;                
## [125] &quot;georeferenceVerificationStatus&quot;     
## [126] &quot;identificationID&quot;                   
## [127] &quot;locationID&quot;                         
## [128] &quot;locationRemarks&quot;                    
## [129] &quot;previousIdentifications&quot;            
## [130] &quot;verbatimSRS&quot;                        
## [131] &quot;parentEventID&quot;                      
## [132] &quot;dynamicProperties&quot;                  
## [133] &quot;eventRemarks&quot;                       
## [134] &quot;typeStatus&quot;                         
## [135] &quot;associatedSequences&quot;                
## [136] &quot;municipality&quot;                       
## [137] &quot;organismID&quot;                         
## [138] &quot;parentNameUsageID&quot;                  
## [139] &quot;taxonomicStatus&quot;                    
## [140] &quot;disposition&quot;                        
## [141] &quot;georeferencedDate&quot;                  
## [142] &quot;namePublishedInID&quot;                  
## [143] &quot;originalNameUsage&quot;                  
## [144] &quot;lifeStage&quot;                          
## [145] &quot;endDayOfYear&quot;                       
## [146] &quot;otherCatalogNumbers&quot;                
## [147] &quot;bibliographicCitation&quot;              
## [148] &quot;county&quot;                             
## [149] &quot;dateIdentified&quot;                     
## [150] &quot;associatedReferences&quot;               
## [151] &quot;identificationRemarks&quot;              
## [152] &quot;materialSampleID&quot;                   
## [153] &quot;verbatimIdentification&quot;             
## [154] &quot;associatedMedia&quot;                    
## [155] &quot;locationAccordingTo&quot;                
## [156] &quot;verbatimElevation&quot;                  
## [157] &quot;verbatimCoordinates&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>dori_obis1 <span class="ot">&lt;-</span> dori_obis <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, decimalLatitude, decimalLongitude, bathymetry,</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>         flags, waterBody, basisOfRecord, occurrenceStatus, rightsHolder, </span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>         datasetName, recordedBy, depth, locality, habitat) <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a><span class="co"># check problemas reportados (flags)</span></span>
<span id="cb34-8"><a href="#cb34-8" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb34-9"><a href="#cb34-9" tabindex="-1"></a>  <span class="fu">distinct</span>(flags)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 1
##   flags                     
##   &lt;chr&gt;                     
## 1 NO_DEPTH                  
## 2 &lt;NA&gt;                      
## 3 DEPTH_EXCEEDS_BATH        
## 4 ON_LAND                   
## 5 NO_DEPTH,ON_LAND          
## 6 DEPTH_EXCEEDS_BATH,ON_LAND</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="co"># check NA em datasetName</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NO_DEPTH,ON_LAND&quot;</span>, <span class="st">&quot;ON_LAND&quot;</span>, <span class="st">&quot;DEPTH_EXCEEDS_BATH,ON_LAND&quot;</span>),</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>         <span class="fu">is.na</span>(datasetName)) <span class="sc">%&gt;%</span> </span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>  <span class="fu">distinct</span>(waterBody)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##   waterBody               
##   &lt;chr&gt;                   
## 1 &lt;NA&gt;                    
## 2 Pacific Ocean           
## 3 Caribbean Sea           
## 4 WESTERN CENTRAL ATLANTIC
## 5 indien                  
## 6 Pacific                 
## 7 atlantique</code></pre>
<p>Aqui usamos as <code>flags</code> para filtrar ocorrências em terra,
além de remover dados sem nome de <em>dataset</em> (não temos como
checar a origem adequadamente, então podemos tratar como suspeitos),
filtrar ocorrências no Atlântico e verificar a profundidade reportada.
Podemos usar um mapa para verificar melhor as ocorrências também.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="co"># depth ok</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NO_DEPTH,ON_LAND&quot;</span>, <span class="st">&quot;ON_LAND&quot;</span>, <span class="st">&quot;DEPTH_EXCEEDS_BATH,ON_LAND&quot;</span>),</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Caribbean Sea&quot;</span>, <span class="st">&quot;atlantique&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> depth, <span class="at">fill =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() </span></code></pre></div>
<p><img src="atividade3_files/figure-html/check-dori1-1.png" width="672" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co"># checar niveis</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NO_DEPTH,ON_LAND&quot;</span>, <span class="st">&quot;ON_LAND&quot;</span>, <span class="st">&quot;DEPTH_EXCEEDS_BATH,ON_LAND&quot;</span>),</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Caribbean Sea&quot;</span>, <span class="st">&quot;atlantique&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>  <span class="fu">lapply</span>(., unique)</span></code></pre></div>
<pre><code>## $scientificName
## [1] &quot;Paracanthurus hepatus&quot;
## 
## $decimalLatitude
##   [1]  16.4444410 -12.5236545  14.9524648  -8.4180000  15.0033074   0.1907412
##   [7] -12.8872069  16.7105020   0.1970000 -14.1518635 -12.7996448  14.9315443
##  [13]  15.1052253  15.0777326  15.2567141 -14.2852098   0.1908500  21.5893140
##  [19] -12.6209318  -3.7166670 -12.8982856 -14.2790305  15.1163631  -3.7833333
##  [25]  25.0755700 -18.1677900  15.2735300  24.4725000   0.1902900  15.1342100
##  [31]  13.2303711  17.5919243  24.5653750  14.2014619  14.8436598  15.2829550
##  [37]  14.8471569  18.3372440   0.8224659  14.2460003 -12.9295200  15.1924560
##  [43]  15.2766544   0.8208993   0.1868800  15.0520660 -18.1486000  15.2559710
##  [49] -12.6599593  -8.3627887  39.7664250  15.2698445  15.2542167  15.1110520
##  [55]  18.5551160 -14.2413730   0.2065500 -12.9211000 -12.6861843  14.1692040
##  [61]  18.1697050   7.3314750 -18.1718800 -15.8160000 -11.6000000 -12.6316241
##  [67]  14.8651780  18.0939460 -14.2240685  -8.4156407 -12.9367249 -11.6506000
##  [73]  17.0056630  -9.5000000   0.1915569  15.0695718  14.9276330  18.0501780
##  [79]  15.0865944  -5.9855690 -12.8849970 -12.5177000  13.0784300  15.2688363
##  [85]  -5.4174320  15.2751892 -12.6720303  17.6075300 -14.2785729 -14.2738570
##  [91] -18.1582400  18.8112216   0.1949556  20.9260006  15.1760200  15.0556089
##  [97]   0.1882000 -12.9596800   0.1931100  25.7336520  14.8649172 -16.0000000
## [103]  14.9249980   0.1903102   2.1641140  32.3229300  13.0000000  15.2748410
## [109] -12.9600759  -8.4465079  26.3590964 -17.1836910 -13.0524100   0.1872420
## [115] -23.3330000 -12.9154946 -12.8420419  15.2688078  18.1449870  14.9349439
## [121]  25.6265070  -6.0790000  25.4820650   6.3842680  10.1951570  25.5903100
## [127]  15.1106289   0.1954804   0.4664770 -28.1166670 -11.6892060  -6.4569333
## [133] -12.6594300  21.5919640  18.0722820  30.4877780  15.2756939  12.5397690
## [139]  26.5093946 -20.4853600  15.0109170  16.4150840  15.2812907 -12.9800894
## [145]  26.7690660  18.0851080 -12.6138576 -12.8557123 -12.8648931  22.1273620
## [151]   0.1989000   0.7982430  -3.7833333  18.0907210  14.8389450 -10.1000000
## [157] -12.5814800 -12.8069865  25.5162000  -5.8131130 -26.9666670 -13.0096982
## [163] -12.8924566 -12.9508000  15.0912826  -9.5711000  23.1447300   7.1170001
## [169]  13.2166670  17.5869300 -12.9362382  19.6758593 -14.3916667  18.0495721
## [175]  13.2823530  18.1496535  32.2000000  14.1088820  17.0000000  15.1138340
## [181]  24.7975000  24.9946760  -5.1577570   6.3824613   4.6700000 -10.0800000
## [187] -20.3847640  -8.1500000  24.5504710  -9.5711600  -9.8330000  15.2612250
## [193]  16.7184000 -11.6968860 -14.2732544  -8.6047191  25.5463350
## 
## $decimalLongitude
##   [1]  -85.90848   44.95679  145.61942  127.30900  145.67423 -176.48881
##   [7]   45.24931  145.76719 -176.48620 -169.61060   44.97483  145.63004
##  [13]  145.72023  145.65842  145.81463 -170.54548 -176.48893  -83.16721
##  [19]   44.94357  -38.48333   44.95741 -170.54739  145.69629  128.12500
##  [25]  -77.31885 -174.18214  145.79122  122.96361 -176.45685  145.67886
##  [31]  144.64385  145.81372  -81.77380  145.26090  145.56591  145.80272
##  [37]  145.56905  -64.92971 -176.62678  120.47900   44.96588  145.70396
##  [43]  145.82731 -176.62671 -176.46176  145.65608  178.37900  145.72341
##  [49]   45.00646  127.10333  -74.10381  145.78511  145.75177  145.70275
##  [55]  -72.34891 -170.67885 -176.47949   44.96450   45.03803  145.28545
##  [61]  145.79179  134.45949 -174.20580  145.83300  144.00000   44.93289
##  [67]  145.56811  145.74479 -169.51954  127.31111   45.23100   43.25720
##  [73]  -61.76405  147.11600 -176.48886  145.65610  145.63037  145.70588
##  [79]  145.65793  111.87568   44.94956   44.98940  -59.61306  145.83191
##  [85]   53.31084  145.82971   45.04400  145.81530 -170.54882 -169.49334
##  [91] -174.18171  145.67677 -176.48664 -156.45300  145.78762  145.59720
##  [97] -176.48273   45.05841 -176.45694  -79.27943  145.58005  168.00000
## [103]  145.64574 -176.45731  118.64584  -64.74098  145.79259   45.22420
## [109]  127.32029  126.91224  146.29102   45.05683 -176.46102   43.51700
## [115]   44.96300   44.94140  145.83218  145.75369  145.65172  -80.15250
## [121]  106.83700  -80.15393 -162.46472  -71.59673  -80.16072  145.70190
## [127] -176.48669  174.11717  153.50000   43.25084   71.25228   44.94740
## [133]  -79.43408  -67.19186  130.15250  145.79354  -81.70000  127.88307
## [139]   57.77010  145.58553  119.89903  145.80070   44.98166  -77.33338
## [145]  145.72653   45.01858   44.94569   45.03627  119.60400 -176.48500
## [151] -176.62003  145.76129  145.53007  147.80000   44.92538   44.96247
## [157]  -76.84238  -35.17549  153.48333   45.24484   45.24945   45.22780
## [163]  145.75022  144.76970  -82.43558   79.80800  -59.51667  145.81808
## [169]   44.96656  145.40914  147.09167  145.70552  144.76383  145.81155
## [175]  -64.60000  145.16840  -65.00000  145.69897  141.29083  -77.40212
## [181]  145.80156 -162.42674  119.38000  147.78000   57.73671  157.00000
## [187]  -81.76957  144.76966   47.00000  145.82889  145.77638   43.24864
## [193] -170.50510  125.21931  -79.27106
## 
## $bathymetry
##   [1]   -7.00    9.00   17.00  -37.00  -42.00  266.00    4.00  -52.00   -1.00
##  [10]  -15.00   87.00  -17.00   -2.00   75.00  -19.00  126.00  114.00   10.00
##  [19]  -12.00    6.00  -10.00   56.00   -4.00  432.00  -24.00  264.00   14.00
##  [28]  181.00   -8.00   52.00  -61.00 -109.00   91.00   -3.00  322.00  292.00
##  [37]    2.00    7.00   63.00   33.00  -28.00   29.00   19.00   42.00    3.00
##  [46]   -6.00   38.00  122.00   28.00    1.00  251.00  281.93  274.50  146.00
##  [55]  -71.00   12.00   47.00   24.00  -16.00    8.00  198.00  218.00  -26.00
##  [64] 1736.00  132.00   55.00  -25.00 3497.00  -72.00   11.00  -13.00  166.00
##  [73]    3.12   90.00  850.00    5.00   69.00   88.00   18.00 4625.00   26.10
##  [82]  -11.00   23.00 1374.00  -27.00   32.00   22.00 2085.00  170.00  151.00
##  [91]   26.00   36.78   37.00   93.00   23.41   46.00   31.00  141.00  459.00
## [100]   15.00  -66.00 1554.78   35.00 2708.00 4415.00   -5.00   96.00   16.03
## [109] 4186.00  111.00   78.00
## 
## $flags
## [1] &quot;NO_DEPTH&quot;           NA                   &quot;DEPTH_EXCEEDS_BATH&quot;
## 
## $waterBody
## [1] NA                                         
## [2] &quot;North Pacific Ocean&quot;                      
## [3] &quot;South Pacific Ocean&quot;                      
## [4] &quot;Pacific Ocean&quot;                            
## [5] &quot;South China and Eastern Archipelagic Seas&quot;
## [6] &quot;Coral Sea&quot;                                
## [7] &quot;Indian Ocean&quot;                             
## 
## $basisOfRecord
## [1] &quot;PreservedSpecimen&quot; &quot;HumanObservation&quot; 
## 
## $occurrenceStatus
## [1] NA        &quot;present&quot; &quot;Present&quot;
## 
## $rightsHolder
## [1] &quot;Tulane University&quot;            NA                            
## [3] &quot;Bernice Pauahi Bishop Museum&quot; &quot;Canadian Museum of Nature&quot;   
## 
## $datasetName
##  [1] &quot;ANSP&quot;                                                                                                                                                                                                                                   
##  [2] &quot;Stationary visual census of commercial fishes in Mayotte (2023)&quot;                                                                                                                                                                        
##  [3] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands&quot;                                          
##  [4] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009&quot;
##  [5] &quot;YPM&quot;                                                                                                                                                                                                                                    
##  [6] &quot;CAS&quot;                                                                                                                                                                                                                                    
##  [7] &quot;NSMT&quot;                                                                                                                                                                                                                                   
##  [8] &quot;MCZ&quot;                                                                                                                                                                                                                                    
##  [9] &quot;Tonga Reef survey data 2016-2018&quot;                                                                                                                                                                                                       
## [10] &quot;KAUM&quot;                                                                                                                                                                                                                                   
## [11] &quot;CUMV&quot;                                                                                                                                                                                                                                   
## [12] &quot;Ocean Genome Legacy Collection&quot;                                                                                                                                                                                                         
## [13] &quot;Bishop Museum Fish Specimens&quot;                                                                                                                                                                                                           
## [14] &quot;LACM&quot;                                                                                                                                                                                                                                   
## [15] &quot;AM&quot;                                                                                                                                                                                                                                     
## [16] &quot;QM&quot;                                                                                                                                                                                                                                     
## [17] &quot;Fish&quot;                                                                                                                                                                                                                                   
## [18] &quot;Asia-Pacific Dataset&quot;                                                                                                                                                                                                                   
## [19] &quot;Image collection in the Coral Reef Network WEB System: A snapshot of the fauna and flora around the coral reefs of the Ryukyu Islands from 2002 to 2013&quot;                                                                                
## [20] &quot;MNHN&quot;                                                                                                                                                                                                                                   
## [21] &quot;UF&quot;                                                                                                                                                                                                                                     
## [22] &quot;BPBM&quot;                                                                                                                                                                                                                                   
## [23] &quot;ROM&quot;                                                                                                                                                                                                                                    
## [24] &quot;Pacific Reef Assessment and Monitoring Program: Rapid Ecological Assessments of Fish Large-Area Stationary Point Count Surveys (SPC) at Coral Reef Sites across the Pacific Ocean from 2000 to 2007&quot;                                    
## [25] &quot;Fish collection of National Museum of Nature and Science&quot;                                                                                                                                                                               
## [26] &quot;FMNH&quot;                                                                                                                                                                                                                                   
## [27] &quot;USNM&quot;                                                                                                                                                                                                                                   
## [28] &quot;NMV&quot;                                                                                                                                                                                                                                    
## [29] &quot;UWFC&quot;                                                                                                                                                                                                                                   
## 
## $recordedBy
##  [1] &quot;G. A. Bisler Orr&quot;                      
##  [2] &quot;Thierry MULOCHAU&quot;                      
##  [3] &quot;Diver initials PMA&quot;                    
##  [4] &quot;Diver initials JMM&quot;                    
##  [5] &quot;Diver initials KSM&quot;                    
##  [6] &quot;Diver initials JPZ&quot;                    
##  [7] &quot;Diver initials KS&quot;                     
##  [8] &quot;Patrick DURVILLE&quot;                      
##  [9] &quot;Diver initials SCM&quot;                    
## [10] &quot;Diver initials VAB&quot;                    
## [11] &quot;Diver initials KDG&quot;                    
## [12] NA                                      
## [13] &quot;R/V Pawnee I, R/V Pawnee I&quot;            
## [14] &quot;Diver initials EMD&quot;                    
## [15] &quot;Sherman F. Denton&quot;                     
## [16] &quot;Karen Stone&quot;                           
## [17] &quot;Diver initials KMO&quot;                    
## [18] &quot;Diver initials LMG&quot;                    
## [19] &quot;Jordan, D. S.&quot;                         
## [20] &quot;Diver initials EC&quot;                     
## [21] &quot;unknown&quot;                               
## [22] &quot;Mathieu PINAULT&quot;                       
## [23] &quot;Diver initials CC&quot;                     
## [24] &quot;Julien WICKEL&quot;                         
## [25] &quot;George Hess&quot;                           
## [26] &quot;Diver initials TCW&quot;                    
## [27] &quot;Diver initials MON&quot;                    
## [28] &quot;Diver initials MF&quot;                     
## [29] &quot;Anthony Curtis&quot;                        
## [30] &quot;Diver initials JLG&quot;                    
## [31] &quot;Halstead and Mote&quot;                     
## [32] &quot;Diver initials KCL&quot;                    
## [33] &quot;party, AMS&quot;                            
## [34] &quot;Youngman, Philip M.&quot;                   
## [35] &quot;Fisher, Walter K.&quot;                     
## [36] &quot;Ward, M&quot;                               
## [37] &quot;Diver initials MKM&quot;                    
## [38] &quot;J. Verwey&quot;                             
## [39] &quot;D. Dockins, R. Rosenblatt, *&quot;          
## [40] &quot;Halstead, Mote, Habekost&quot;              
## [41] &quot;LEWIS, J.&quot;                             
## [42] &quot;Diver initials AEG&quot;                    
## [43] &quot;G. Llano&quot;                              
## [44] &quot;Kami, H. T.&quot;                           
## [45] &quot;Jamie Hopkins&quot;                         
## [46] &quot;Jordan, David S.&quot;                      
## [47] &quot;mauge&quot;                                 
## [48] &quot;Dawson, Charles&quot;                       
## [49] &quot;Wille, A&quot;                              
## [50] &quot;Diver initials RMW&quot;                    
## [51] &quot;Diver initials JWM&quot;                    
## [52] &quot;Joseph Hyrtl Collection&quot;               
## [53] &quot;Heather Kramp&quot;                         
## [54] &quot;Diver initials IDW&quot;                    
## [55] &quot;[no agent data]&quot;                       
## [56] &quot;McCosker, John E.&quot;                     
## [57] &quot;Gaither, Michelle R.; Wagner, Daniel&quot;  
## [58] &quot;Felipe Poey&quot;                           
## [59] &quot;U.S. Fish Commission&quot;                  
## [60] &quot;O. McCausland&quot;                         
## [61] &quot;Fifth Vanderbilt Expedition&quot;           
## [62] &quot;Arai, T.&quot;                              
## [63] &quot;Nicolas Pike&quot;                          
## [64] &quot;Local Fisherman&quot;                       
## [65] &quot;Tennison, P.&quot;                          
## [66] &quot;Diver initials ARP&quot;                    
## [67] &quot;Diver initials JMA&quot;                    
## [68] &quot;MACLEAY MUS&quot;                           
## [69] &quot;Starks, Edwin C.&quot;                      
## [70] &quot;FNQ team&quot;                              
## [71] &quot;G. Richard Harbison, RV Lady Basten&quot;   
## [72] &quot;W. Beebe, N.Y. Zool. Soc.&quot;             
## [73] &quot;\&quot;besnard|paris mnhn-pom, m.\&quot;&quot;        
## [74] &quot;C. C. G. Chaplin&quot;                      
## [75] &quot;Poss, Stuart G.; Catania, David; et al&quot;
## [76] &quot;W.M. CHAPMAN&quot;                          
## [77] &quot;W. Butts&quot;                              
## [78] &quot;Neerav Bhatt&quot;                          
## [79] &quot;n.o.calypso&quot;                           
## [80] &quot;Robert W. Griffith&quot;                    
## [81] &quot;Diver initials BDS&quot;                    
## [82] &quot;deSylva, Donald&quot;                       
## 
## $depth
##  [1]    NA 25.00 27.00  4.60 21.60 10.00 18.00 21.00  9.00 15.00 12.00 22.00
## [13] 13.00  5.50  9.50  7.20  5.00 19.00 11.40 19.50 11.20 15.40 15.95  4.80
## [25]  9.60 13.50 20.70 12.80 14.00  1.80 12.50  9.75 21.20  3.00 15.60  9.30
## [37]  7.00  8.00 23.70  5.30  6.00 16.00 23.40 11.00  2.70  6.35 12.70 21.35
## [49] 20.00 35.00 21.50  8.50  9.10 23.00 16.20  8.80 20.15 18.95  9.20 17.00
## [61] 17.80 10.15 14.20 21.30 10.60 11.30  9.70 30.00 14.65 12.25  8.65  5.45
## [73] 19.40 20.60 19.20 28.00 11.60 25.70 17.05 24.40  6.85 21.95 24.85 21.90
## [85]  9.90  9.40 16.50 14.55 22.65 22.20  3.10
## 
## $locality
##  [1] NA                                                               
##  [2] &quot;Toku&quot;                                                           
##  [3] &quot;Manila, Philippines&quot;                                            
##  [4] &quot;Viti Levu Island; W of Rat-Tail Passage&quot;                        
##  [5] &quot;South Indian Ocean, 700 metres north of Hantsambu, off Itsandra&quot;
##  [6] &quot;the lagoon in Tanjung Duwata&quot;                                   
##  [7] &quot;Umagai&quot;                                                         
##  [8] &quot;Flora Reef, Coral Sea&quot;                                          
##  [9] &quot;Nakayukui&quot;                                                      
## [10] &quot;Indoneshia Ambon I. S coast Latsuhalat&quot;                         
## [11] &quot;Kochchikade, Sri Lanka&quot;                                         
## [12] &quot;East of Kangokuiwa, Io-sima&quot;                                    
## 
## $habitat
##  [1] NA                                               
##  [2] &quot;Forereef : RRB : Reef Rubble&quot;                   
##  [3] &quot;Forereef : AGR : Aggregate Reef&quot;                
##  [4] &quot;Forereef : PAV : Pavement&quot;                      
##  [5] &quot;Forereef : UNK : Unknown&quot;                       
##  [6] &quot;Forereef : MIX : Mixed Habitats&quot;                
##  [7] &quot;Shallow coral reef : Forereef&quot;                  
##  [8] &quot;ZZZ&quot;                                            
##  [9] &quot;Forereef : PSC : Pavement with Sand Channels&quot;   
## [10] &quot;Forereef : ROB : Rock/Boulder&quot;                  
## [11] &quot;Forereef : SCR : Sand with Scattered Coral/Rock&quot;
## [12] &quot;Forereef : PPR : Pavement with Patch Reefs&quot;     
## [13] &quot;Forereef : SAG : Spur and Groove&quot;               
## [14] &quot;Protected Slope : AGR : Aggregate Reef&quot;</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co"># aplicar filtros</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>dori_obis_ok <span class="ot">&lt;-</span> dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NO_DEPTH,ON_LAND&quot;</span>, <span class="st">&quot;ON_LAND&quot;</span>, <span class="st">&quot;DEPTH_EXCEEDS_BATH,ON_LAND&quot;</span>),</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Caribbean Sea&quot;</span>, <span class="st">&quot;atlantique&quot;</span>))</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dori_obis_ok, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/check-dori1-2.png" width="672" /></p>
<p>Ainda temos ocorrências no Atlântico, então vamos limpar isso e
plotar o mapa novamente.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>dori_obis_final <span class="ot">&lt;-</span> dori_obis_ok <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>  <span class="fu">filter</span>(decimalLongitude <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span> decimalLongitude <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">100</span>)</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dori_obis_final, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb42-10"><a href="#cb42-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/check-dori2-1.png" width="672" /></p>
<p>Parece tudo ok, e chegamos a 253 ocorrências potenciais.</p>
<p>Por fim, vamos unir todas as ocorrências, checar se existem
duplicatas e plotar o resultado final.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="co"># unir GBIF e OBIS</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="co"># ver diferencas</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(dori_gbif_ok), <span class="fu">names</span>(dori_obis_ok))</span></code></pre></div>
<pre><code>## [1] &quot;acceptedScientificName&quot; &quot;issues&quot;</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(dori_obis_final), <span class="fu">names</span>(dori_obis_final))</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dori_gbif_ok <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">repo =</span> <span class="fu">paste0</span>(<span class="st">&quot;gbif&quot;</span>, <span class="fu">row.names</span>(.))), </span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a>                      dori_obis_final <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">repo =</span> <span class="fu">paste0</span>(<span class="st">&quot;obis&quot;</span>, <span class="fu">row.names</span>(.)))) <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">&quot;repo&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(decimalLongitude, decimalLatitude, depth) <span class="sc">%&gt;%</span> </span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb47-8"><a href="#cb47-8" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;occ&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-9"><a href="#cb47-9" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">&quot;occ&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;datasetName&quot;</span>, <span class="st">&quot;rn&quot;</span>), <span class="at">sep =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-10"><a href="#cb47-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scientificName =</span> <span class="st">&quot;Paracanthurus hepatus&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-11"><a href="#cb47-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>rn)</span>
<span id="cb47-12"><a href="#cb47-12" tabindex="-1"></a></span>
<span id="cb47-13"><a href="#cb47-13" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" tabindex="-1"></a><span class="co"># mapear ocorrencias</span></span>
<span id="cb47-15"><a href="#cb47-15" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb47-16"><a href="#cb47-16" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb47-17"><a href="#cb47-17" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb47-18"><a href="#cb47-18" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb47-19"><a href="#cb47-19" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> all_data, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> datasetName)) <span class="sc">+</span></span>
<span id="cb47-20"><a href="#cb47-20" tabindex="-1"></a>  <span class="co">#theme(legend.title = element_blank()) +</span></span>
<span id="cb47-21"><a href="#cb47-21" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/gbif-obis-1.png" width="672" />
<br><br></p>
<p>O último passo é guardarmos os dados baixados e tratados para
economizar tempo no próximo uso, mas o mais importante já está
registrado, o passo-a-passo de como chegamos até os dados usados nas
análises.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">write.csv</span>(all_data, <span class="st">&quot;data/occ_GBIF-OBIS_par_hepa.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="extra-classificação-automática-de-pontos"
class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> EXTRA:
Classificação automática de pontos</h3>
<div id="função-caseira" class="section level4" number="3.3.2.1">
<h4><span class="header-section-number">3.3.2.1</span> Função
‘caseira’</h4>
<p>Podemos usar outras ferramentas mais refinadas para nos ajudar a
detectar ocorrências suspeitas, como as encontradas nos pacotes
<code>CoordinateCleaner</code>, <code>obistools</code>,
<code>scrubr</code> e <code>biogeo</code>. Além disso, podemos criar
nossas próprias funções para auxiliar nessa tarefa.</p>
<p>Abaixo, vamos utilizar os dados baixados do <code>GBIF</code> antes
da limpeza já realizada acima. Aqui vou começar a exemplificar com uma
função simples criada por mim. Esta função utiliza as coordenadas para
calcular o centróide (ponto médio de todas as ocorrências) e, a partir
dele, a distância de cada ponto até o centróide. Esse princípio se
baseia em propriedades de conectividade de populações contíguas, então
quanto mais distantes (neste caso as muito distantes) maior a chance de
termos uma ocorrência suspeita da mesma espécie. <em>Atenção: isso é
apenas uma ferramenta para classificar as ocorrências! A decisão de
filtrar ou não os pontos suspeitos vai depender do seu conhecimento ou
da literatura a respeito dos habitats e regiões de ocorrência da
espécie-alvo</em>.</p>
<p>Inicialmente, vamos carregar a função <code>flag_outlier</code>. E,
em seguida, aplicaremos a função e vamos plotar um mapa para avaliar as
ocorrências com <em>flag</em> de <em>outlier</em>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="co"># funcao para classificar ocorrencias suspeitas</span></span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a>flag_outlier <span class="ot">&lt;-</span> <span class="cf">function</span>(df, species){</span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a>  </span>
<span id="cb49-4"><a href="#cb49-4" tabindex="-1"></a>  <span class="co"># funcao para classificar ocorrencias suspeitas</span></span>
<span id="cb49-5"><a href="#cb49-5" tabindex="-1"></a>  <span class="co"># baseada no calculo do centroide de todas ocorrencias</span></span>
<span id="cb49-6"><a href="#cb49-6" tabindex="-1"></a>  <span class="co"># indica como &#39;check&#39; as ocorrencias que tem distancias até o centroide</span></span>
<span id="cb49-7"><a href="#cb49-7" tabindex="-1"></a>  <span class="co"># acima do 90th quantil (default) das distancias calculadas</span></span>
<span id="cb49-8"><a href="#cb49-8" tabindex="-1"></a>  </span>
<span id="cb49-9"><a href="#cb49-9" tabindex="-1"></a>  dados <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb49-10"><a href="#cb49-10" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(scientificName <span class="sc">==</span> species); </span>
<span id="cb49-11"><a href="#cb49-11" tabindex="-1"></a>  </span>
<span id="cb49-12"><a href="#cb49-12" tabindex="-1"></a>  dados2 <span class="ot">&lt;-</span> geosphere<span class="sc">::</span><span class="fu">distVincentyEllipsoid</span>(</span>
<span id="cb49-13"><a href="#cb49-13" tabindex="-1"></a>    dados <span class="sc">%&gt;%</span></span>
<span id="cb49-14"><a href="#cb49-14" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">centr_lon =</span> <span class="fu">median</span>(decimalLongitude),</span>
<span id="cb49-15"><a href="#cb49-15" tabindex="-1"></a>                <span class="at">centr_lat =</span> <span class="fu">median</span>(decimalLatitude)),</span>
<span id="cb49-16"><a href="#cb49-16" tabindex="-1"></a>    dados <span class="sc">%&gt;%</span> </span>
<span id="cb49-17"><a href="#cb49-17" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(decimalLongitude, decimalLatitude)</span>
<span id="cb49-18"><a href="#cb49-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-19"><a href="#cb49-19" tabindex="-1"></a>    <span class="fu">bind_cols</span>(dados) <span class="sc">%&gt;%</span> </span>
<span id="cb49-20"><a href="#cb49-20" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">dist_centroid =</span> <span class="st">&#39;...1&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-21"><a href="#cb49-21" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">flag =</span> <span class="fu">ifelse</span>(dist_centroid <span class="sc">&lt;</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.90</span>), <span class="st">&quot;OK&quot;</span>,</span>
<span id="cb49-22"><a href="#cb49-22" tabindex="-1"></a>                         <span class="fu">ifelse</span>(dist_centroid <span class="sc">&gt;=</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.90</span>) <span class="sc">&amp;</span> dist_centroid <span class="sc">&lt;</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.95</span>), <span class="st">&quot;check &gt; Q90&quot;</span>,</span>
<span id="cb49-23"><a href="#cb49-23" tabindex="-1"></a>                                <span class="fu">ifelse</span>(dist_centroid <span class="sc">&gt;=</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.95</span>), <span class="st">&quot;check &gt; Q95&quot;</span>, <span class="st">&quot;OK&quot;</span>))))</span>
<span id="cb49-24"><a href="#cb49-24" tabindex="-1"></a>  </span>
<span id="cb49-25"><a href="#cb49-25" tabindex="-1"></a>    <span class="co"># mutate(flag = ifelse(dist_centroid &gt; quantile(dist_centroid, probs = prob), &quot;check&quot;, &quot;OK&quot;))</span></span>
<span id="cb49-26"><a href="#cb49-26" tabindex="-1"></a>  </span>
<span id="cb49-27"><a href="#cb49-27" tabindex="-1"></a>  <span class="fu">print</span>(dados2)</span>
<span id="cb49-28"><a href="#cb49-28" tabindex="-1"></a>  </span>
<span id="cb49-29"><a href="#cb49-29" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="co"># classificar ocorrências</span></span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>marcados <span class="ot">&lt;-</span> dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, decimalLongitude, decimalLatitude, datasetName) <span class="sc">%&gt;%</span> </span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a>  <span class="fu">flag_outlier</span>(., <span class="at">species =</span> <span class="st">&quot;Paracanthurus hepatus (Linnaeus, 1766)&quot;</span>)</span>
<span id="cb50-7"><a href="#cb50-7" tabindex="-1"></a>  </span>
<span id="cb50-8"><a href="#cb50-8" tabindex="-1"></a><span class="co"># mapa</span></span>
<span id="cb50-9"><a href="#cb50-9" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb50-10"><a href="#cb50-10" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb50-11"><a href="#cb50-11" tabindex="-1"></a>    <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb50-12"><a href="#cb50-12" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb50-13"><a href="#cb50-13" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> marcados, </span>
<span id="cb50-14"><a href="#cb50-14" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, </span>
<span id="cb50-15"><a href="#cb50-15" tabindex="-1"></a>                   <span class="at">color =</span> flag)) <span class="sc">+</span></span>
<span id="cb50-16"><a href="#cb50-16" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb50-17"><a href="#cb50-17" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb50-18"><a href="#cb50-18" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/occ-1.png" width="672" />
<br><br></p>
<p>Podemos notar no mapa acima que as ocorrencias acima do 90ésimo
quantil são muito similares às já filtradas acima com base no
<code>waterBody</code>, mas se já não tivéssemos a informação da
ocorrência restrita da espécie ao Indo-Pacífico, já poderíamos
desconfiar destas ocorrências tão longe, os <em>outliers</em>.
Investigando o datasetName destas ocorrências com <em>flags</em> também
chegaríamos a mesma conclusão de excluir os dados associados ao
<code>Diveboard - Scuba diving citizen science</code> e sem valor de
<code>datasetName</code>. <br><br></p>
<p>Por fim, vamos testar o pacote <code>CoordinateCleaner</code>. Nele
devemos especificar os campos correspondentes na função
<code>clean_coordinates</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>flags <span class="ot">&lt;-</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>  <span class="fu">clean_coordinates</span>(</span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a>    <span class="at">x =</span> marcados,</span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a>    <span class="at">lon =</span> <span class="st">&quot;decimalLongitude&quot;</span>,</span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>    <span class="at">lat =</span> <span class="st">&quot;decimalLatitude&quot;</span>,</span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a>    <span class="at">species =</span> <span class="st">&quot;scientificName&quot;</span>,</span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a>    <span class="at">tests =</span> <span class="fu">c</span>(<span class="st">&quot;equal&quot;</span>, <span class="st">&quot;gbif&quot;</span>,</span>
<span id="cb51-8"><a href="#cb51-8" tabindex="-1"></a>              <span class="st">&quot;zeros&quot;</span>, <span class="st">&quot;seas&quot;</span>)</span>
<span id="cb51-9"><a href="#cb51-9" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Reading layer `ne_50m_land&#39; from data source 
##   `/private/var/folders/xx/6x1gs2p90qs1n_41pc68sd0m0000gn/T/Rtmpg8fujL/ne_50m_land.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 1420 features and 3 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -180 ymin: -89.99893 xmax: 180 ymax: 83.59961
## Geodetic CRS:  WGS 84</code></pre>
<p><br><br></p>
<p>Em seguida, verificamos os <em>outliers</em>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a>    <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> marcados <span class="sc">%&gt;%</span> </span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a>                 <span class="fu">filter</span>(flag <span class="sc">!=</span> <span class="st">&quot;OK&quot;</span>), </span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, </span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a>                   <span class="at">color =</span> datasetName)) <span class="sc">+</span></span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/outliers-1.png" width="672" />
<br><br></p>
<p>Moral da história, sempre temos que conferir todos os dados, mas as
ferramentas ajudam muito nesta tarefa! ***</p>
<ul class="pager">
<!--this is the style of the button-->
<li>
<a href="atividade2.html">Anterior</a>
</li>
<li>
<a href="#">Topo</a>
</li>
<!--This button takes me to the table of contents-->
<li>
<a href="atividade4.html">Próxima</a>
</li>
</ul>
</div>
</div>
</div>
</div>

<p>
    <i>Colabore, compartilhe, e cite as fontes!</i>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
