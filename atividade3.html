<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Atividade 3</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ciência Colaborativa</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="aulas.html">
    <span class="fas fa-book"></span>
     
    Aulas
  </a>
</li>
<li>
  <a href="materiais.html">
    <span class="fa fa-folder fa-lg"></span>
     
    Materiais
  </a>
</li>
<li>
  <a href="atividades.html">
    <span class="fas fa-chart-bar"></span>
     
    Atividades
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cammcordeiro/ciencia_colab">
    <span class="fab fa-github"></span>
     
    GitHub Repo
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<style>
body {
text-align: justify}
</style>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<div id="atividade-3" class="section level1 unnumbered">
<h1 class="unnumbered">Atividade 3</h1>
<div id="acesso-a-bancos-de-dados-abertos" class="section level2"
number="0.1">
<h2><span class="header-section-number">3.1</span> Acesso a bancos de
dados abertos</h2>
<p>O acesso pode ser feito de diferentes formas, seja diretamente no
website do repositório, utilizando-se pacotes específicos que acessam os
repositórios via R ou Python, ou através de API (Application Programming
Interface). Nesta última opção, o repositório é acessado por outro
aplicativo ou serviço web para automatização de tarefas, seja em
servidor local ou remoto, mas requer conhecimento de programação em Java
e outras linguagens e não será tratado aqui.</p>
<p>Nesta atividade, temos como objetivo acessar um repositório de dados
de ocorrência de espécies, inspecionar os dados, avaliar sua qualidade e
fazer um mapa com as ocorrências.</p>
<p>Para iniciar, vamos escolher um repositório e uma espécie de
interesse. Vamos iniciar com uma única espécie para facilitar as demais
etapas.</p>
<p>O <a href="https://www.gbif.org/">GBIF (<em>Global Biodiversity
Information Facility</em>)</a> é o maior repositório de ocorrências da
biodiversidade da atualidade, então será nossa opção de repositório. No
entanto, o <a href="https://obis.org/">OBIS (<em>Ocean Biodiversity
Information System</em>)</a> é um repositório dedicado às espécies
marinhas e espelhado no GBIF. Assim, espera-se que algumas ocorrências
sejam duplicadas nos dois repositórios.</p>
<div id="exemplo-finding-dori" class="section level3" number="0.1.1">
<h3><span class="header-section-number">3.1.1</span> Exemplo:
<em>Finding Dori</em></h3>
<p>A espécie-alvo será o peixe marinho <em>Paracanthurus hepatus</em>,
também conhecido como <em>Blue Tang</em> e, mais recentemente como
<strong>Dori</strong>!.</p>
<center>
<img src= "figs/dori.png" style= "width:60%">
</center>
<p>Nosso primeiro exemplor será com as ocorrencias do
<strong>GBIF</strong> e, para tal, vamos utilizar o pacote
<code>rgbif</code>.</p>
<hr />
</div>
<div id="gbif" class="section level3" number="0.1.2">
<h3><span class="header-section-number">3.1.2</span>
<strong>GBIF</strong></h3>
<p>Vamos fazer uso do pacote <code>tidyverse</code> para manipular dos
dados, então vamos carregar este pacote e o <code>rgbif</code>.</p>
<p>É importante explorar as funções do pacote e pode-se fazer isto
usando o comando <code>?rgbif</code> e, para ler sobre uma função em
particular basta colocar <code>?</code> em frente ao nome da função. Se
o pacote não estiver carregado ou instalada é preciso usar
<code>??</code>.</p>
<p>A função <code>occ_data</code> faz uma busca simplificada das
ocorrências no repositório do <strong>GBIF</strong> por meio do nome
científico, número de identificação, país e outros. Neste caso, vamos
procurar diretamente pelo nome da espécie-alvo. Outros atributos podem
ser adicionados à função para refinar a busca, leia o material de ajuda
da função para ter uma ideia. Vamos aproveitar alguns destes atributos e
selecionar apenas ocorrências que possuem coordenadas e sem problemas
geoespaciais.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar funcoes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>?occ_data</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># baixar ocorrencias</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>dori_gbif <span class="ot">&lt;-</span> <span class="fu">occ_data</span>(<span class="at">scientificName =</span> <span class="st">&quot;Paracanthurus hepatus&quot;</span>, </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">hasCoordinate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">hasGeospatialIssue=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensoes</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dori_gbif)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dori_gbif<span class="sc">$</span>data)</span></code></pre></div>
<pre><code>## [1] 500 154</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar campos</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span> names</span></code></pre></div>
<pre><code>##   [1] &quot;key&quot;                                
##   [2] &quot;scientificName&quot;                     
##   [3] &quot;decimalLatitude&quot;                    
##   [4] &quot;decimalLongitude&quot;                   
##   [5] &quot;issues&quot;                             
##   [6] &quot;datasetKey&quot;                         
##   [7] &quot;publishingOrgKey&quot;                   
##   [8] &quot;installationKey&quot;                    
##   [9] &quot;publishingCountry&quot;                  
##  [10] &quot;protocol&quot;                           
##  [11] &quot;lastCrawled&quot;                        
##  [12] &quot;lastParsed&quot;                         
##  [13] &quot;crawlId&quot;                            
##  [14] &quot;hostingOrganizationKey&quot;             
##  [15] &quot;basisOfRecord&quot;                      
##  [16] &quot;occurrenceStatus&quot;                   
##  [17] &quot;lifeStage&quot;                          
##  [18] &quot;taxonKey&quot;                           
##  [19] &quot;kingdomKey&quot;                         
##  [20] &quot;phylumKey&quot;                          
##  [21] &quot;classKey&quot;                           
##  [22] &quot;orderKey&quot;                           
##  [23] &quot;familyKey&quot;                          
##  [24] &quot;genusKey&quot;                           
##  [25] &quot;speciesKey&quot;                         
##  [26] &quot;acceptedTaxonKey&quot;                   
##  [27] &quot;acceptedScientificName&quot;             
##  [28] &quot;kingdom&quot;                            
##  [29] &quot;phylum&quot;                             
##  [30] &quot;order&quot;                              
##  [31] &quot;family&quot;                             
##  [32] &quot;genus&quot;                              
##  [33] &quot;species&quot;                            
##  [34] &quot;genericName&quot;                        
##  [35] &quot;specificEpithet&quot;                    
##  [36] &quot;taxonRank&quot;                          
##  [37] &quot;taxonomicStatus&quot;                    
##  [38] &quot;iucnRedListCategory&quot;                
##  [39] &quot;dateIdentified&quot;                     
##  [40] &quot;coordinateUncertaintyInMeters&quot;      
##  [41] &quot;stateProvince&quot;                      
##  [42] &quot;year&quot;                               
##  [43] &quot;month&quot;                              
##  [44] &quot;day&quot;                                
##  [45] &quot;eventDate&quot;                          
##  [46] &quot;modified&quot;                           
##  [47] &quot;lastInterpreted&quot;                    
##  [48] &quot;references&quot;                         
##  [49] &quot;license&quot;                            
##  [50] &quot;isInCluster&quot;                        
##  [51] &quot;inCluster&quot;                          
##  [52] &quot;geodeticDatum&quot;                      
##  [53] &quot;class&quot;                              
##  [54] &quot;countryCode&quot;                        
##  [55] &quot;country&quot;                            
##  [56] &quot;rightsHolder&quot;                       
##  [57] &quot;identifier&quot;                         
##  [58] &quot;http://unknown.org/nick&quot;            
##  [59] &quot;verbatimEventDate&quot;                  
##  [60] &quot;datasetName&quot;                        
##  [61] &quot;gbifID&quot;                             
##  [62] &quot;collectionCode&quot;                     
##  [63] &quot;verbatimLocality&quot;                   
##  [64] &quot;occurrenceID&quot;                       
##  [65] &quot;taxonID&quot;                            
##  [66] &quot;recordedBy&quot;                         
##  [67] &quot;catalogNumber&quot;                      
##  [68] &quot;institutionCode&quot;                    
##  [69] &quot;eventTime&quot;                          
##  [70] &quot;identifiedBy&quot;                       
##  [71] &quot;http://unknown.org/captive&quot;         
##  [72] &quot;identificationID&quot;                   
##  [73] &quot;occurrenceRemarks&quot;                  
##  [74] &quot;networkKeys&quot;                        
##  [75] &quot;coordinatePrecision&quot;                
##  [76] &quot;institutionKey&quot;                     
##  [77] &quot;eventID&quot;                            
##  [78] &quot;acceptedNameUsage&quot;                  
##  [79] &quot;dynamicProperties&quot;                  
##  [80] &quot;http://unknown.org/taxonRankID&quot;     
##  [81] &quot;vernacularName&quot;                     
##  [82] &quot;otherCatalogNumbers&quot;                
##  [83] &quot;locationRemarks&quot;                    
##  [84] &quot;taxonConceptID&quot;                     
##  [85] &quot;http://unknown.org/species&quot;         
##  [86] &quot;samplingProtocol&quot;                   
##  [87] &quot;identificationRemarks&quot;              
##  [88] &quot;nameAccordingTo&quot;                    
##  [89] &quot;higherGeography&quot;                    
##  [90] &quot;locality&quot;                           
##  [91] &quot;language&quot;                           
##  [92] &quot;type&quot;                               
##  [93] &quot;higherClassification&quot;               
##  [94] &quot;individualCount&quot;                    
##  [95] &quot;depth&quot;                              
##  [96] &quot;depthAccuracy&quot;                      
##  [97] &quot;waterBody&quot;                          
##  [98] &quot;sampleSizeUnit&quot;                     
##  [99] &quot;sampleSizeValue&quot;                    
## [100] &quot;habitat&quot;                            
## [101] &quot;institutionID&quot;                      
## [102] &quot;islandGroup&quot;                        
## [103] &quot;dataGeneralizations&quot;                
## [104] &quot;georeferencedBy&quot;                    
## [105] &quot;maximumDistanceAboveSurfaceInMeters&quot;
## [106] &quot;island&quot;                             
## [107] &quot;georeferenceProtocol&quot;               
## [108] &quot;verbatimDepth&quot;                      
## [109] &quot;ownerInstitutionCode&quot;               
## [110] &quot;datasetID&quot;                          
## [111] &quot;elevation&quot;                          
## [112] &quot;elevationAccuracy&quot;                  
## [113] &quot;rights&quot;                             
## [114] &quot;georeferenceSources&quot;                
## [115] &quot;projectId&quot;                          
## [116] &quot;programmeAcronym&quot;                   
## [117] &quot;continent&quot;                          
## [118] &quot;organismQuantity&quot;                   
## [119] &quot;organismQuantityType&quot;               
## [120] &quot;endDayOfYear&quot;                       
## [121] &quot;county&quot;                             
## [122] &quot;locationAccordingTo&quot;                
## [123] &quot;startDayOfYear&quot;                     
## [124] &quot;associatedReferences&quot;               
## [125] &quot;identificationVerificationStatus&quot;   
## [126] &quot;footprintWKT&quot;                       
## [127] &quot;originalNameUsage&quot;                  
## [128] &quot;recordNumber&quot;                       
## [129] &quot;collectionKey&quot;                      
## [130] &quot;fieldNumber&quot;                        
## [131] &quot;preparations&quot;                       
## [132] &quot;collectionID&quot;                       
## [133] &quot;http://unknown.org/language&quot;        
## [134] &quot;http://unknown.org/rights&quot;          
## [135] &quot;http://unknown.org/rightsHolder&quot;    
## [136] &quot;materialSampleID&quot;                   
## [137] &quot;disposition&quot;                        
## [138] &quot;municipality&quot;                       
## [139] &quot;eventRemarks&quot;                       
## [140] &quot;locationID&quot;                         
## [141] &quot;bibliographicCitation&quot;              
## [142] &quot;identificationReferences&quot;           
## [143] &quot;georeferenceVerificationStatus&quot;     
## [144] &quot;verbatimSRS&quot;                        
## [145] &quot;verbatimCoordinateSystem&quot;           
## [146] &quot;nomenclaturalCode&quot;                  
## [147] &quot;name&quot;                               
## [148] &quot;parentEventID&quot;                      
## [149] &quot;samplingEffort&quot;                     
## [150] &quot;previousIdentifications&quot;            
## [151] &quot;acceptedNameUsageID&quot;                
## [152] &quot;associatedSequences&quot;                
## [153] &quot;parentNameUsageID&quot;                  
## [154] &quot;organismID&quot;</code></pre>
<p>Acima, vemos que o conjunto de dados tem ocorrências (uma por linha)
e variáveis. As variáveis podem ser utilizadas para filtrar as
ocorrências de acordo com o objetivo, além de fornecerem diversos dados
a respeito das ocorrências, incluindo dados dos amostradores e
detentores dos direitos. Vale notar que o conjunto de dados retornado
pelo <strong>GBIF</strong> não é um <code>data frame</code> simples, mas
sim um <code>list</code> que contém um conjunto de
<code>data frames</code>. Para acessar estes <code>data frames</code> é
necessário usar o operador <code>$</code>.</p>
</div>
</div>
<div id="problemas-reportados" class="section level2" number="0.2">
<h2><span class="header-section-number">3.2</span> Problemas
reportados</h2>
<p>Um dos campos mais úteis dos dados é a coluna <code>issues</code>,
pois ela indica problema já identificados pelo validador automático do
repositório. Os problemas (<em>issues</em>) possuem um código que pode
ser conferido pela função <code>gbif_issues</code>. Ao usar a função não
é preciso indicar nenhum atributo, pois ela retornará um dataframe com
as abreviações usadas e a descrição dos problemas catalogados no
GBIF.</p>
<pre><code>##           code                                             issue
## 1          bri                           BASIS_OF_RECORD_INVALID
## 2          ccm                        CONTINENT_COUNTRY_MISMATCH
## 3          cdc                CONTINENT_DERIVED_FROM_COORDINATES
## 4        conti                                 CONTINENT_INVALID
## 5         cdiv                                COORDINATE_INVALID
## 6        cdout                           COORDINATE_OUT_OF_RANGE
## 7        cdrep                            COORDINATE_REPROJECTED
## 8       cdrepf                    COORDINATE_REPROJECTION_FAILED
## 9       cdreps                COORDINATE_REPROJECTION_SUSPICIOUS
## 10     cdround                                COORDINATE_ROUNDED
## 11     cucdmis                       COUNTRY_COORDINATE_MISMATCH
## 12        cudc                  COUNTRY_DERIVED_FROM_COORDINATES
## 13        cuiv                                   COUNTRY_INVALID
## 14         cum                                  COUNTRY_MISMATCH
## 15      depmms                             DEPTH_MIN_MAX_SWAPPED
## 16       depnn                                 DEPTH_NON_NUMERIC
## 17     depnmet                                  DEPTH_NOT_METRIC
## 18      depunl                                    DEPTH_UNLIKELY
## 19       elmms                         ELEVATION_MIN_MAX_SWAPPED
## 20        elnn                             ELEVATION_NON_NUMERIC
## 21      elnmet                              ELEVATION_NOT_METRIC
## 22       elunl                                ELEVATION_UNLIKELY
## 23      gass84                      GEODETIC_DATUM_ASSUMED_WGS84
## 24      gdativ                            GEODETIC_DATUM_INVALID
## 25     iddativ                           IDENTIFIED_DATE_INVALID
## 26    iddatunl                          IDENTIFIED_DATE_UNLIKELY
## 27      mdativ                             MODIFIED_DATE_INVALID
## 28     mdatunl                            MODIFIED_DATE_UNLIKELY
## 29    muldativ                           MULTIMEDIA_DATE_INVALID
## 30    muluriiv                            MULTIMEDIA_URI_INVALID
## 31   preneglat                         PRESUMED_NEGATED_LATITUDE
## 32   preneglon                        PRESUMED_NEGATED_LONGITUDE
## 33     preswcd                       PRESUMED_SWAPPED_COORDINATE
## 34      rdativ                             RECORDED_DATE_INVALID
## 35       rdatm                            RECORDED_DATE_MISMATCH
## 36     rdatunl                            RECORDED_DATE_UNLIKELY
## 37    refuriiv                            REFERENCES_URI_INVALID
## 38    txmatfuz                                 TAXON_MATCH_FUZZY
## 39     txmathi                            TAXON_MATCH_HIGHERRANK
## 40    txmatnon                                  TAXON_MATCH_NONE
## 41   typstativ                               TYPE_STATUS_INVALID
## 42      zerocd                                   ZERO_COORDINATE
## 43        cdpi                      COORDINATE_PRECISION_INVALID
## 44       cdumi             COORDINATE_UNCERTAINTY_METERS_INVALID
## 45       indci                          INDIVIDUAL_COUNT_INVALID
## 46      interr                              INTERPRETATION_ERROR
## 47       iccos INDIVIDUAL_COUNT_CONFLICTS_WITH_OCCURRENCE_STATUS
## 48       osiic  OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT
## 49         osu                      OCCURRENCE_STATUS_UNPARSABLE
## 50       geodi                        GEOREFERENCED_DATE_INVALID
## 51       geodu                       GEOREFERENCED_DATE_UNLIKELY
## 52      ambcol                              AMBIGUOUS_COLLECTION
## 53     ambinst                             AMBIGUOUS_INSTITUTION
## 54     colmafu                            COLLECTION_MATCH_FUZZY
## 55     colmano                             COLLECTION_MATCH_NONE
## 56     incomis                   INSTITUTION_COLLECTION_MISMATCH
## 57      inmafu                           INSTITUTION_MATCH_FUZZY
## 58      inmano                            INSTITUTION_MATCH_NONE
## 59     osifbor   OCCURRENCE_STATUS_INFERRED_FROM_BASIS_OF_RECORD
## 60     diffown                       DIFFERENT_OWNER_INSTITUTION
## 61   taxmatagg                             TAXON_MATCH_AGGREGATE
## 62    fpsrsinv                             FOOTPRINT_SRS_INVALID
## 63    fpwktinv                             FOOTPRINT_WKT_INVALID
## 64         anm                             ACCEPTED_NAME_MISSING
## 65        annu                          ACCEPTED_NAME_NOT_UNIQUE
## 66      anuidi                    ACCEPTED_NAME_USAGE_ID_INVALID
## 67    aitidinv                            ALT_IDENTIFIER_INVALID
## 68        bbmn                               BACKBONE_MATCH_NONE
## 69    basauthm                          BASIONYM_AUTHOR_MISMATCH
## 70     bibrinv                             BIB_REFERENCE_INVALID
## 71       chsun                                    CHAINED_SYNOYM
## 72      clasna                        CLASSIFICATION_NOT_APPLIED
## 73     clasroi                 CLASSIFICATION_RANK_ORDER_INVALID
## 74  conbascomb                  CONFLICTING_BASIONYM_COMBINATION
## 75      desinv                               DESCRIPTION_INVALID
## 76      disinv                              DISTRIBUTION_INVALID
## 77         hom                                           HOMONYM
## 78        minv                                MULTIMEDIA_INVALID
## 79         npm                              NAME_PARENT_MISMATCH
## 80          ns                                        NO_SPECIES
## 81       nsinv                      NOMENCLATURAL_STATUS_INVALID
## 82       onder                             ORIGINAL_NAME_DERIVED
## 83        onnu                          ORIGINAL_NAME_NOT_UNIQUE
## 84    onuidinv                    ORIGINAL_NAME_USAGE_ID_INVALID
## 85          ov                              ORTHOGRAPHIC_VARIANT
## 86          pc                                      PARENT_CYCLE
## 87        pnnu                            PARENT_NAME_NOT_UNIQUE
## 88    pnuidinv                      PARENT_NAME_USAGE_ID_INVALID
## 89          pp                                PARTIALLY_PARSABLE
## 90         pbg                            PUBLISHED_BEFORE_GENUS
## 91     rankinv                                      RANK_INVALID
## 92     relmiss                              RELATIONSHIP_MISSING
## 93       scina                         SCIENTIFIC_NAME_ASSEMBLED
## 94     spprinv                           SPECIES_PROFILE_INVALID
## 95    taxstinv                          TAXONOMIC_STATUS_INVALID
## 96    taxstmis                         TAXONOMIC_STATUS_MISMATCH
## 97      unpars                                        UNPARSABLE
## 98 vernnameinv                           VERNACULAR_NAME_INVALID
## 99  backmatagg                          BACKBONE_MATCH_AGGREGATE
##                                                                                                                                                              description
## 1                                                           The given basis of record is impossible to interpret or seriously different from the recommended vocabulary.
## 2                                                                                                                 The interpreted continent and country do not match up.
## 3                                                                            The interpreted continent is based on the coordinates, not the verbatim string information.
## 4                                                                                                                                Uninterpretable continent values found.
## 5                                                                                                Coordinate value given in some form but GBIF is unable to interpret it.
## 6                                                                                                  Coordinate has invalid lat/lon values out of their decimal max range.
## 7                                                                         The original coordinate was successfully reprojected from a different geodetic datum to WGS84.
## 8                                                                The given decimal latitude and longitude could not be reprojected to WGS84 based on the provided datum.
## 9                          Indicates successful coordinate reprojection according to provided datum, but which results in a datum shift larger than 0.1 decimal degrees.
## 10                                                                                                               Original coordinate modified by rounding to 5 decimals.
## 11                                                                                         The interpreted occurrence coordinates fall outside of the indicated country.
## 12                                                                             The interpreted country is based on the coordinates, not the verbatim string information.
## 13                                                                                                                                 Uninterpretable country values found.
## 14                                                                                        Interpreted country for dwc:country and dwc:countryCode contradict each other.
## 15                                                                                                                                               Set if supplied min&gt;max
## 16                                                                                                                                   Set if depth is a non numeric value
## 17                                                                     Set if supplied depth is not given in the metric system, for example using feet instead of meters
## 18                                                                                                                      Set if depth is larger than 11.000m or negative.
## 19                                                                                                                                   Set if supplied min &gt; max elevation
## 20                                                                                                                               Set if elevation is a non numeric value
## 21                                                                 Set if supplied elevation is not given in the metric system, for example using feet instead of meters
## 22                                                                                      Set if elevation is above the troposphere (17km) or below 11km (Mariana Trench).
## 23                              Indicating that the interpreted coordinates assume they are based on WGS84 datum as the datum was either not indicated or interpretable.
## 24                                                                                                                    The geodetic datum given could not be interpreted.
## 25                                                                                      The date given for dwc:dateIdentified is invalid and cant be interpreted at all.
## 26                                                                                The date given for dwc:dateIdentified is in the future or before Linnean times (1700).
## 27                                                              A (partial) invalid date is given for dc:modified, such as a non existing date, invalid zero month, etc.
## 28                                                                                         The date given for dc:modified is in the future or predates unix time (1970).
## 29                                                                                                       An invalid date is given for dc:created of a multimedia object.
## 30                                                                                                                      An invalid uri is given for a multimedia object.
## 31                                                                                                            Latitude appears to be negated, e.g. 32.3 instead of -32.3
## 32                                                                                                           Longitude appears to be negated, e.g. 32.3 instead of -32.3
## 33                                                                                                                          Latitude and longitude appear to be swapped.
## 34                                                                              A (partial) invalid date is given, such as a non existing date, invalid zero month, etc.
## 35                                                           The recording date specified as the eventDate string and the individual year, month, day are contradicting.
## 36                        The recording date is highly unlikely, falling either into the future or represents a very old date before 1600 that predates modern taxonomy.
## 37                                                                                                                            An invalid uri is given for dc:references.
## 38                                                                                   Matching to the taxonomic backbone can only be done using a fuzzy, non exact match.
## 39                                                                     Matching to the taxonomic backbone can only be done on a higher rank and not the scientific name.
## 40       Matching to the taxonomic backbone cannot be done cause there was no match at all or several matches with too little information to keep them apart (homonyms).
## 41                                                              The given type status is impossible to interpret or seriously different from the recommended vocabulary.
## 42                                                                                       Coordinate is the exact 0/0 coordinate, often indicating a bad null coordinate.
## 43                                                                                                             Indicates an invalid or very unlikely coordinatePrecision
## 44                                                                                                        Indicates an invalid or very unlikely dwc:uncertaintyInMeters.
## 45                                                                                                                  Individual count value not parsable into an integer.
## 46                                                                                An error occurred during interpretation, leaving the record interpretation incomplete.
## 47                                                                                         Example: individual count value &gt; 0, but occurrence status is absent and etc.
## 48                                                                                                        Occurrence status was inferred from the individual count value
## 49                                                                                                         Occurrence status value can&#39;t be assigned to OccurrenceStatus
## 50                                                                                  The date given for dwc:georeferencedDate is invalid and can&#39;t be interpreted at all.
## 51                                                                             The date given for dwc:georeferencedDate is in the future or before Linnean times (1700).
## 52                                                                                                   The given collection matches with more than 1 GrSciColl collection.
## 53                                                                                                 The given institution matches with more than 1 GrSciColl institution.
## 54                                                                                                   The given collection was fuzzily matched to a GrSciColl collection.
## 55                                                                                               The given collection couldn&#39;t be matched with any GrSciColl collection.
## 56                                                                                                     The collection matched doesn&#39;t belong to the institution matched.
## 57                                                                                                 The given institution was fuzzily matched to a GrSciColl institution.
## 58                                                                                             The given institution couldn&#39;t be matched with any GrSciColl institution.
## 59                                                                                                                  Occurrence status was inferred from basis of records
## 60 The given owner institution is different than the given institution. Therefore we assume it doesn&#39;t belong to the institution and we don&#39;t link it to the occurrence.
## 61                Matching to the taxonomic backbone can only be done on a species level, but the occurrence was in fact considered a broader species aggregate/complex.
## 62                                                                                                 The Footprint Spatial Reference System given could not be interpreted
## 63                                                                                                          The Footprint Well-Known-Text given could not be interpreted
## 64                                                                                                                                     Synonym lacking an accepted name.
## 65                                                                               Synonym has a verbatim accepted name which is not unique and refers to several records.
## 66                                                                                                          The value for dwc:acceptedNameUsageID could not be resolved.
## 67                                                                          At least one alternative identifier extension record attached to this name usage is invalid.
## 68                                                                                                                 Name usage could not be matched to the GBIF backbone.
## 69                                                                     The authorship of the original name does not match the authorship in brackets of the actual name.
## 70                                                                         At least one bibliographic reference extension record attached to this name usage is invalid.
## 71                                                                                   If a synonym points to another synonym as its accepted taxon the chain is resolved.
## 72                                                                                               The denormalized classification could not be applied to the name usage.
## 73                                                                    The given ranks of the names in the classification hierarchy do not follow the hierarchy of ranks.
## 74                                                                                 There have been more than one accepted name in a homotypical basionym group of names.
## 75                                                                                     At least one description extension record attached to this name usage is invalid.
## 76                                                                                    At least one distribution extension record attached to this name usage is invalid.
## 77                                                   A not synonymized homonym exists for this name in some other backbone source which have been ignored at build time.
## 78                                                                                      At least one multimedia extension record attached to this name usage is invalid.
## 79                                               The (accepted) bi/trinomial name does not match the parent name and should be recombined into the parent genus/species.
## 80                                                           The group (currently only genera are tested) are lacking any accepted species GBIF backbone specific issue.
## 81                                                                                                                      dwc:nomenclaturalStatus could not be interpreted
## 82                     Record has a original name (basionym) relationship which was derived from name &amp; authorship comparison, but did not exist explicitly in the data.
## 83                                                                     Record has a verbatim original name (basionym) which is not unique and refers to several records.
## 84                                                                                                          The value for dwc:originalNameUsageID could not be resolved.
## 85                                                                                                              A potential orthographic variant exists in the backbone.
## 86                                                                                 The child parent classification resulted into a cycle that needed to be resolved/cut.
## 87                                                                                  Record has a verbatim parent name which is not unique and refers to several records.
## 88                                                                                                            The value for dwc:parentNameUsageID could not be resolved.
## 89                                    The beginning of the scientific name string was parsed, but there is additional information in the string that was not understood.
## 90                                                                                            A bi/trinomial name published earlier than the parent genus was published.
## 91                                                                                                                                dwc:taxonRank could not be interpreted
## 92                                                                                                   There were problems representing all name usage relationships, i.e.
## 93                                                                     The scientific name was assembled from the individual name parts and not given as a whole string.
## 94                                                                                 At least one species profile extension record attached to this name usage is invalid.
## 95                                                                                                                          dwc:taxonomicStatus could not be interpreted
## 96                                                                                                                                                        no description
## 97                                                                   The scientific name string could not be parsed at all, but appears to be a parsable name type, i.e.
## 98                                                                                 At least one vernacular name extension record attached to this name usage is invalid.
## 99                                                     Name usage could only be matched to a GBIF backbone species, but was in fact a broader species aggregate/complex.
##          type
## 1  occurrence
## 2  occurrence
## 3  occurrence
## 4  occurrence
## 5  occurrence
## 6  occurrence
## 7  occurrence
## 8  occurrence
## 9  occurrence
## 10 occurrence
## 11 occurrence
## 12 occurrence
## 13 occurrence
## 14 occurrence
## 15 occurrence
## 16 occurrence
## 17 occurrence
## 18 occurrence
## 19 occurrence
## 20 occurrence
## 21 occurrence
## 22 occurrence
## 23 occurrence
## 24 occurrence
## 25 occurrence
## 26 occurrence
## 27 occurrence
## 28 occurrence
## 29 occurrence
## 30 occurrence
## 31 occurrence
## 32 occurrence
## 33 occurrence
## 34 occurrence
## 35 occurrence
## 36 occurrence
## 37 occurrence
## 38 occurrence
## 39 occurrence
## 40 occurrence
## 41 occurrence
## 42 occurrence
## 43 occurrence
## 44 occurrence
## 45 occurrence
## 46 occurrence
## 47 occurrence
## 48 occurrence
## 49 occurrence
## 50 occurrence
## 51 occurrence
## 52 occurrence
## 53 occurrence
## 54 occurrence
## 55 occurrence
## 56 occurrence
## 57 occurrence
## 58 occurrence
## 59 occurrence
## 60 occurrence
## 61 occurrence
## 62 occurrence
## 63 occurrence
## 64       name
## 65       name
## 66       name
## 67       name
## 68       name
## 69       name
## 70       name
## 71       name
## 72       name
## 73       name
## 74       name
## 75       name
## 76       name
## 77       name
## 78       name
## 79       name
## 80       name
## 81       name
## 82       name
## 83       name
## 84       name
## 85       name
## 86       name
## 87       name
## 88       name
## 89       name
## 90       name
## 91       name
## 92       name
## 93       name
## 94       name
## 95       name
## 96       name
## 97       name
## 98       name
## 99       name</code></pre>
<p>Para checar os <code>issues</code> indicados na base baixada é
necessário um pequeno tratamento, uma vez que algumas ocorrências
possuem múltiplos problemas. Assim, utilizamos a função
<code>strsplit</code> para individualizar os <code>issues</code> e poder
conferí-los.</p>
<pre><code>##        code                                            issue
## 1     conti                                CONTINENT_INVALID
## 2    cdreps               COORDINATE_REPROJECTION_SUSPICIOUS
## 3   cdround                               COORDINATE_ROUNDED
## 4      cudc                 COUNTRY_DERIVED_FROM_COORDINATES
## 5       cum                                 COUNTRY_MISMATCH
## 6    gass84                     GEODETIC_DATUM_ASSUMED_WGS84
## 7    gdativ                           GEODETIC_DATUM_INVALID
## 8  refuriiv                           REFERENCES_URI_INVALID
## 9     osiic OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT
## 10  colmafu                           COLLECTION_MATCH_FUZZY
## 11  incomis                  INSTITUTION_COLLECTION_MISMATCH
## 12   inmafu                          INSTITUTION_MATCH_FUZZY
## 13 fpwktinv                            FOOTPRINT_WKT_INVALID
##                                                                                                                                      description
## 1                                                                                                        Uninterpretable continent values found.
## 2  Indicates successful coordinate reprojection according to provided datum, but which results in a datum shift larger than 0.1 decimal degrees.
## 3                                                                                        Original coordinate modified by rounding to 5 decimals.
## 4                                                      The interpreted country is based on the coordinates, not the verbatim string information.
## 5                                                                 Interpreted country for dwc:country and dwc:countryCode contradict each other.
## 6       Indicating that the interpreted coordinates assume they are based on WGS84 datum as the datum was either not indicated or interpretable.
## 7                                                                                             The geodetic datum given could not be interpreted.
## 8                                                                                                     An invalid uri is given for dc:references.
## 9                                                                                 Occurrence status was inferred from the individual count value
## 10                                                                           The given collection was fuzzily matched to a GrSciColl collection.
## 11                                                                             The collection matched doesn&#39;t belong to the institution matched.
## 12                                                                         The given institution was fuzzily matched to a GrSciColl institution.
## 13                                                                                  The Footprint Well-Known-Text given could not be interpreted
##          type
## 1  occurrence
## 2  occurrence
## 3  occurrence
## 4  occurrence
## 5  occurrence
## 6  occurrence
## 7  occurrence
## 8  occurrence
## 9  occurrence
## 10 occurrence
## 11 occurrence
## 12 occurrence
## 13 occurrence</code></pre>
<p>A maioria dos problemas reportados é relacionado com discrepancias
entre informações indicadas pelos autores e as levantadas pelo algoritmo
de checagem, mas nenhum parece invalidar as ocorrências, por
enquanto.</p>
<p>Prosseguimos selecionando algumas variáveis que serão úteis para a
validação dos dados e futuras análises, como coordenadas, profundidade,
nome da base de dados etc.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="ot">&lt;-</span> dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, acceptedScientificName, decimalLatitude, decimalLongitude,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>         issues, waterBody, basisOfRecord, occurrenceStatus, rightsHolder, </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>         datasetName, recordedBy, depth, locality, habitat) </span></code></pre></div>
<p>Note que temos 500 ocorrências, no entanto, vamos ver quantas são
únicas aplicando a função <code>distinct</code> do pacote
<code>dplyr</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() </span></code></pre></div>
<p>No fim, observamos que ficamos com 378 ocorrências agora, e isso
acontece por causa de diferenças em colunas que, neste caso, não serão
usadas para o objetivo desta prática.</p>
<p>Para identificar todos os valores únicos presented nos dados, vamos
aplicar a função <code>unique</code> a cada coluna com um <em>loop</em>
na função <code>lapply</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar niveis dos fatores</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(dori_gbif1, unique)</span></code></pre></div>
<pre><code>## $scientificName
## [1] &quot;Paracanthurus hepatus (Linnaeus, 1766)&quot;
## [2] &quot;BOLD:AAC3227&quot;                          
## [3] &quot;BOLD:AAT9935&quot;                          
## 
## $acceptedScientificName
## [1] &quot;Paracanthurus hepatus (Linnaeus, 1766)&quot;
## [2] &quot;BOLD:AAC3227&quot;                          
## [3] &quot;BOLD:AAT9935&quot;                          
## 
## $decimalLatitude
##   [1] -33.800169 -30.202839 -27.400000 -28.611278  -4.656524 -17.636875
##   [7]  25.015492   2.728201  -6.353158  22.319095  28.169633 -14.663600
##  [13]   4.595825 -18.287067 -13.647350  -8.349668  22.680278 -28.196141
##  [19]  26.189035  -2.244373  -8.727807  -2.204717 -30.204320 -24.113638
##  [25]  15.022028  -5.816751  -5.840112  27.388889 -28.611482 -24.116345
##  [31] -17.076469 -17.077753 -10.423094 -29.927833 -10.393100  -8.481814
##  [37]  -8.612647   1.615687  13.522638  13.518570   4.116129   0.186880
##  [43]   0.798243 -28.611023   6.384268 -16.428461  27.328333  -4.714799
##  [49] -16.767523   4.109330 -21.151370 -23.817600 -29.929429  -4.279653
##  [55] -24.110377  -0.584608 -17.575953  14.865178  14.838945  13.282353
##  [61]  18.169705  18.090721  18.144987  14.108882  14.169204  15.274841
##  [67]  15.052066  14.927633  15.010917  15.192456  14.924998 -27.535837
##  [73]  18.093946  18.050178  18.085108  15.134210  15.111052  15.113834
##  [79]  16.718400  25.752000  -2.757490  13.686601  -5.820478   4.121438
##  [85] -21.170370 -21.205960 -21.205150 -21.035070 -21.233100 -21.073840
##  [91] -21.239710  -2.260250  -2.249608 -14.273857 -17.076470 -16.783458
##  [97] -21.349500 -21.484390 -16.657679 -25.288066  30.487778  -8.400000
## [103] -21.319020  24.306446  -4.321165 -17.068420  -8.689442 -14.235900
## [109] -21.366690 -21.371320 -21.370350  26.291180   1.872135   0.187242
## [115]   0.190310   0.191557   0.822466   0.820899 -17.116486 -17.070283
## [121] -17.062497 -14.151863 -14.224068 -14.278573 -14.279030 -14.241373
## [127] -14.285210 -14.273254  16.135100 -21.660010 -21.991250   6.382461
## [133] -27.532000  24.436835  -5.611260 -27.525900 -15.484300  -8.537167
## [139]  -8.475600  -4.530000  -5.304400  24.472500 -12.872840  23.212100
## [145]  -4.714922 -21.015540 -21.015000   6.986900   7.134422 -27.520850
## [151] -27.523100 -17.408093 -21.058230  14.843660  18.149654  14.201462
## [157]  15.269845  15.261225  15.275189  15.268836  15.256714  15.282955
## [163]  15.275694  15.116363  14.934944  15.276654  15.281291  15.003307
## [169]  -4.292379  -8.636633  17.591924  26.237900  24.455000 -23.322967
## [175] -23.890883  -8.349183  -8.277300  13.230371  -8.505400 -24.112880
## [181]  13.522800 -14.529133 -21.160690 -29.447500 -14.681537 -27.529900
## [187] -27.538681  -6.456933 -29.930400 -30.202300   5.550000  18.437700
## [193] -23.247900 -21.851700 -21.897300 -21.248000 -20.976700 -17.827500
## [199] -16.931600  -8.583764 -12.217000  27.510000  19.292300 -21.371260
## [205] -21.372000 -21.365210  16.383300 -17.092612 -17.100688   0.194956
## [211]   0.195480   0.190741  -8.556720 -26.822600  -6.634620  -8.277000
## [217]  25.821500 -14.523517   3.352720  39.284700 -27.533300 -27.524900
## [223] -12.085451 -24.111530  19.675859  18.049572  15.110629  16.710502
## [229]  15.105225  15.091283  14.952465  15.255971  14.931544  20.748400
## [235]  14.864917  14.847157  15.077733  15.069572  15.086594  15.055609
## [241] -29.923100 -30.017600  16.324900 -23.796683 -23.848667 -23.745917
## [247] -21.150000 -21.146900 -18.846000   0.206550   0.190290   0.193110
## [253] -14.652800 -14.652770 -28.611000 -27.413500 -27.413510  25.034300
## [259] -10.429600 -10.428100   2.285408  -4.313293  12.601900  20.307600
## [265]   5.864600 -29.930440 -30.206662  15.273530  15.254217  15.268808
## [271]  15.004243   5.883700   5.875800  18.811222  17.607530 -29.933100
## [277] -29.912700 -30.201900 -29.912740 -29.933083  -8.277800  16.320100
## [283]   0.197000 -22.843333 -22.835000 -13.500000 -22.840000 -30.201700
## [289] -30.207000 -30.204300 -29.923140 -30.205030 -30.201670 -30.207010
## [295] -20.843860 -14.651927   7.366017  15.176020  17.586930 -21.060000
## [301] -21.059999 -10.446286 -21.349080   0.190850  14.246000  14.250000
## [307] -27.490000   7.117000   7.120000
## 
## $decimalLongitude
##   [1]  151.30166  153.26505  153.56667  153.62837   39.36794  148.44080
##   [7]  122.00093   72.97009   39.30729  114.16936  129.29053  145.66355
##  [13]  118.86434  147.69919  144.10688  116.06586  121.49028  153.57911
##  [19]  127.40389  130.55572  115.54442  130.56772  153.26482  152.70748
##  [25]  145.57996   39.38253   39.46530  128.52111  153.62856  152.70794
##  [31]  179.11049  179.10984  105.66871  153.38925  105.66045  119.52971
##  [37]  158.20064  124.73795  120.97290  120.99116  118.63001 -176.46176
##  [43] -176.62003  153.62923 -162.46472  145.99662  128.55778   39.37970
##  [49]  179.94055  118.62500   35.08851   35.40329  153.39147   55.72781
##  [55]  152.71023  130.63281  178.98593  145.56811  145.53007  144.76383
##  [61]  145.79179  145.76129  145.75369  145.16840  145.28545  145.79259
##  [67]  145.65608  145.63037  145.58553  145.70396  145.64574   32.67988
##  [73]  145.74479  145.70588  145.72653  145.67886  145.70275  145.69897
##  [79]  145.77638  141.47400  150.71890  120.91363   39.38162  118.63332
##  [85]   55.27931   55.27962   55.27898   55.21433   55.29266   55.22368
##  [91]   55.30145  130.64465  130.62375 -169.49334  179.11049  179.92354
##  [97]   55.46860   35.45493  146.02884  152.90847  130.15250  119.35000
## [103]   35.50786  124.09048   55.86569  179.10468  119.57251 -178.17400
## [109]   55.65609   55.68264   55.73661  126.78845 -157.42781 -176.46102
## [115] -176.45731 -176.48886 -176.62678 -176.62671  179.10813  179.10590
## [121]  179.09860 -169.61060 -169.51954 -170.54882 -170.54739 -170.67885
## [127] -170.54548 -170.50510  -61.77100   35.42359   35.38154 -162.42674
## [133]   32.68670  123.79669  132.74726   32.68540  147.10760  119.60195
## [139]  119.55653  131.65190  131.99690  122.96361   45.27593  -81.18580
## [145]   39.37488   55.23410   55.23405  134.21884  134.22094   32.68732
## [151]   32.68600 -179.05644   55.21915  145.56591  145.81155  145.26090
## [157]  145.78511  145.82889  145.82971  145.83191  145.81463  145.80272
## [163]  145.79354  145.69629  145.65172  145.82731  145.80069  145.67423
## [169]   55.86796  119.71143  145.81372  -80.00000  -81.85830  151.98242
## [175]  152.43017  116.05110  115.59450  144.64386  157.99209  152.71402
## [181]  120.99300  145.58833   55.83662  159.05390  145.43811   32.68800
## [187]   32.67879   71.25228  153.38980  153.26580   73.45000  -69.69920
## [193]  155.56720  153.52120  153.53760  155.76360  154.34530  148.50350
## [199]  149.99040  119.60596  123.00390   34.18600  -81.10510   55.54613
## [205]   55.54547   55.53040  -86.40000  179.09921  179.12516 -176.48664
## [211] -176.48669 -176.48881  125.50000   32.88350   39.23600  115.59400
## [217]  -77.93170  145.58198   72.43150  -76.60830   32.68090   32.68440
## [223]   96.87765  152.71830  145.40914  145.70552  145.70190  145.76719
## [229]  145.72023  145.75022  145.61942  145.72341  145.63004  -86.88900
## [235]  145.58005  145.56905  145.65842  145.65610  145.65793  145.59721
## [241]  153.38810  153.26920  -86.57990  152.30293  152.38175  152.28250
## [247]   55.83000   55.82176   36.32800 -176.47949 -176.45685 -176.45694
## [253]  145.45050  153.62830  153.52520  153.62831  153.52519  -77.39630
## [259]  105.66810  105.66580  118.24362   55.86585  -70.05770  -87.01840
## [265]   95.26880  153.38984  153.26605  145.79122  145.75177  145.83218
## [271]  145.58672   95.25900   95.25970  145.67677  145.81530  153.39260
## [277]  153.38340  153.26760  153.38342  153.39256  115.59460  -86.64170
## [283] -176.48620   35.55833   35.55100   47.95000   35.55000   47.95000
## [289]  153.26640  153.26530  153.26480  153.38809  153.26635  153.26527
## [295]  165.41826  145.45101  134.61270  145.78762  145.81808   55.22000
## [301]   55.22000  105.57552   55.46472 -176.48893  120.47900  120.47900
## [307]  120.48000   32.70000   79.80800   79.80800   79.81000
## 
## $issues
##  [1] &quot;cdround&quot;                             &quot;cudc&quot;                               
##  [3] &quot;cdround,cudc&quot;                        &quot;incomis,inmafu&quot;                     
##  [5] &quot;&quot;                                    &quot;cdround,gass84,incomis,inmafu&quot;      
##  [7] &quot;cudc,gass84,gdativ,refuriiv&quot;         &quot;cdreps&quot;                             
##  [9] &quot;osiic&quot;                               &quot;cdround,gass84&quot;                     
## [11] &quot;gass84,incomis,inmafu&quot;               &quot;cum,gass84&quot;                         
## [13] &quot;cum,gass84,fpwktinv&quot;                 &quot;gass84&quot;                             
## [15] &quot;cdround,cudc,gass84,gdativ,refuriiv&quot; &quot;fpwktinv&quot;                           
## [17] &quot;cdround,gass84,fpwktinv&quot;             &quot;conti,cdround,gass84,osiic,colmafu&quot; 
## [19] &quot;cudc,gass84,osiic&quot;                   &quot;cudc,fpwktinv&quot;                      
## 
## $waterBody
##  [1] NA                                         
##  [2] &quot;North Pacific Ocean&quot;                      
##  [3] &quot;Celebes Sea&quot;                              
##  [4] &quot;South Pacific Ocean&quot;                      
##  [5] &quot;Flores Sea&quot;                               
##  [6] &quot;Pacific&quot;                                  
##  [7] &quot;Caribbean Sea&quot;                            
##  [8] &quot;Gulf of Mexico&quot;                           
##  [9] &quot;Atlantic Ocean&quot;                           
## [10] &quot;Verde Island&quot;                             
## [11] &quot;La Caleta&quot;                                
## [12] &quot;Red Sea&quot;                                  
## [13] &quot;Carribean&quot;                                
## [14] &quot;Banda Sea&quot;                                
## [15] &quot;Indian Ocean&quot;                             
## [16] &quot;IndianOcean&quot;                              
## [17] &quot;Laut Bali&quot;                                
## [18] &quot;Royal Caribbean&quot;                          
## [19] &quot;Laccadive Sea&quot;                            
## [20] &quot;Baltimore, MD&quot;                            
## [21] &quot;Carribean Sea&quot;                            
## [22] &quot;South China and Eastern Archipelagic Seas&quot;
## 
## $basisOfRecord
## [1] &quot;HUMAN_OBSERVATION&quot;  &quot;PRESERVED_SPECIMEN&quot; &quot;MATERIAL_SAMPLE&quot;   
## [4] &quot;OBSERVATION&quot;       
## 
## $occurrenceStatus
## [1] &quot;PRESENT&quot;
## 
## $rightsHolder
##  [1] &quot;Peter&quot;               &quot;Jens Sommer-Knudsen&quot; &quot;Nigel Marsh&quot;        
##  [4] &quot;Michal&quot;              &quot;Wasini Tour Guide&quot;   &quot;John Sear&quot;          
##  [7] &quot;顏水蛭&quot;              &quot;David R&quot;             &quot;Victor HOYEAU&quot;      
## [10] &quot;Hao Sen Liu&quot;         &quot;chloisf&quot;             &quot;Alastair Freeman&quot;   
## [13] &quot;Daniela Kupschus&quot;    &quot;Sophie Duc&quot;          &quot;tracc&quot;              
## [16] NA                    &quot;Jacek Pietruszewski&quot; &quot;calvin1976&quot;         
## [19] &quot;joseph_dibattista&quot;   &quot;kfa&quot;                 &quot;desertnaturalist&quot;   
## [22] &quot;Matthew Bokach&quot;      &quot;Josh Moloney&quot;        &quot;Zack&quot;               
## [25] &quot;GF&quot;                  &quot;Chen Zhi&quot;            &quot;Joanne&quot;             
## [28] &quot;warrencameron&quot;       &quot;Mark Rosenstein&quot;     &quot;hokoonwong&quot;         
## [31] &quot;Robin Laws-Wall&quot;     &quot;blackdogto&quot;          &quot;craigjhowe&quot;         
## [34] &quot;Lesley Clements&quot;     &quot;Adelma Hills&quot;        &quot;Albert Kang&quot;        
## [37] &quot;Roxanne Lazarus&quot;     &quot;Cameron&quot;             &quot;mwamlavya&quot;          
## [40] &quot;Diveboard&quot;           &quot;Ian Shaw&quot;            &quot;Geoff Shuetrim&quot;     
## [43] &quot;nahpets&quot;             &quot;Mathew Zappa&quot;        &quot;Tony Strazzari&quot;     
## [46] &quot;Francesco Ricciardi&quot; &quot;Joachim Louis&quot;       &quot;João D&#39;Andretta&quot;    
## [49] &quot;bja2800dk&quot;           &quot;Michael Long&quot;        &quot;Geir Drange&quot;        
## [52] &quot;Christian Doedt&quot;     &quot;Carmelo López Abad&quot;  &quot;cindyjay&quot;           
## [55] &quot;RLS&quot;                 &quot;Ewout Knoester&quot;      &quot;Paolo Mazzei&quot;       
## [58] &quot;rowanwattpringle&quot;    &quot;jeyre&quot;               &quot;brudermann&quot;         
## [61] &quot;msr&quot;                 &quot;Karen Willshaw&quot;      &quot;ninjawil&quot;           
## [64] &quot;gernotkunz&quot;          &quot;Richard Ling&quot;        &quot;SAIAB&quot;              
## [67] &quot;juju98&quot;              &quot;sea-kangaroo&quot;        &quot;tony rebelo&quot;        
## 
## $datasetName
## [1] &quot;iNaturalist research-grade observations&quot;                                                                                                                                                                                                
## [2] NA                                                                                                                                                                                                                                       
## [3] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands&quot;                                          
## [4] &quot;Diveboard - Scuba diving citizen science&quot;                                                                                                                                                                                               
## [5] &quot;Instituto Nacional de Investigação Pesqueira&quot;                                                                                                                                                                                           
## [6] &quot;NMNH Extant Biology&quot;                                                                                                                                                                                                                    
## [7] &quot;NMNH Material Samples (USNM)&quot;                                                                                                                                                                                                           
## [8] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009&quot;
## [9] &quot;Ocean Genome Legacy Collection&quot;                                                                                                                                                                                                         
## 
## $recordedBy
##   [1] &quot;Peter&quot;                                                                                                                           
##   [2] &quot;Jens Sommer-Knudsen&quot;                                                                                                             
##   [3] &quot;Nigel Marsh&quot;                                                                                                                     
##   [4] &quot;Michal&quot;                                                                                                                          
##   [5] &quot;Wasini Tour Guide&quot;                                                                                                               
##   [6] &quot;John Sear&quot;                                                                                                                       
##   [7] &quot;顏水蛭&quot;                                                                                                                          
##   [8] &quot;David R&quot;                                                                                                                         
##   [9] &quot;Victor HOYEAU&quot;                                                                                                                   
##  [10] &quot;Hao Sen Liu&quot;                                                                                                                     
##  [11] &quot;chloisf&quot;                                                                                                                         
##  [12] &quot;Alastair Freeman&quot;                                                                                                                
##  [13] &quot;Daniela Kupschus&quot;                                                                                                                
##  [14] &quot;Sophie Duc&quot;                                                                                                                      
##  [15] &quot;tracc&quot;                                                                                                                           
##  [16] NA                                                                                                                                
##  [17] &quot;Jacek Pietruszewski&quot;                                                                                                             
##  [18] &quot;calvin1976&quot;                                                                                                                      
##  [19] &quot;joseph_dibattista&quot;                                                                                                               
##  [20] &quot;kfa&quot;                                                                                                                             
##  [21] &quot;desertnaturalist&quot;                                                                                                                
##  [22] &quot;Matthew Bokach&quot;                                                                                                                  
##  [23] &quot;Josh Moloney&quot;                                                                                                                    
##  [24] &quot;Zack&quot;                                                                                                                            
##  [25] &quot;GF&quot;                                                                                                                              
##  [26] &quot;Chen Zhi&quot;                                                                                                                        
##  [27] &quot;Joanne&quot;                                                                                                                          
##  [28] &quot;warrencameron&quot;                                                                                                                   
##  [29] &quot;Mark Rosenstein&quot;                                                                                                                 
##  [30] &quot;hokoonwong&quot;                                                                                                                      
##  [31] &quot;Robin Laws-Wall&quot;                                                                                                                 
##  [32] &quot;blackdogto&quot;                                                                                                                      
##  [33] &quot;craigjhowe&quot;                                                                                                                      
##  [34] &quot;Lesley Clements&quot;                                                                                                                 
##  [35] &quot;Adelma Hills&quot;                                                                                                                    
##  [36] &quot;Albert Kang&quot;                                                                                                                     
##  [37] &quot;Diver initials CC&quot;                                                                                                               
##  [38] &quot;Diver initials TCW&quot;                                                                                                              
##  [39] &quot;Diver initials LMG&quot;                                                                                                              
##  [40] &quot;Roxanne Lazarus&quot;                                                                                                                 
##  [41] &quot;Diver initials JWM&quot;                                                                                                              
##  [42] &quot;Cameron&quot;                                                                                                                         
##  [43] &quot;mwamlavya&quot;                                                                                                                       
##  [44] &quot;Thomas Chardon&quot;                                                                                                                  
##  [45] &quot;Simão Elias Mupengo&quot;                                                                                                             
##  [46] &quot;Açúrcio Belmiro Cumbane&quot;                                                                                                         
##  [47] &quot;Ian Shaw&quot;                                                                                                                        
##  [48] &quot;539637721&quot;                                                                                                                       
##  [49] &quot;Geoff Shuetrim&quot;                                                                                                                  
##  [50] &quot;nahpets&quot;                                                                                                                         
##  [51] &quot;Diver initials VAB&quot;                                                                                                              
##  [52] &quot;Diver initials PMA&quot;                                                                                                              
##  [53] &quot;Diver initials RMW&quot;                                                                                                              
##  [54] &quot;Diver initials JPZ&quot;                                                                                                              
##  [55] &quot;Diver initials ARP&quot;                                                                                                              
##  [56] &quot;Diver initials KDG&quot;                                                                                                              
##  [57] &quot;Mathew Zappa&quot;                                                                                                                    
##  [58] &quot;Tony Strazzari&quot;                                                                                                                  
##  [59] &quot;Francesco Ricciardi&quot;                                                                                                             
##  [60] &quot;Joachim Louis&quot;                                                                                                                   
##  [61] &quot;João D&#39;Andretta&quot;                                                                                                                 
##  [62] &quot;Nicet J.B., Pinault M.,Wickel J., Bigot L.,C. Bourmaud,Mulochau T., Zubia M., Conand C., Poupin,M. Schleyer,Benon P., G. Malfait&quot;
##  [63] &quot;|RNMR, IRD, université de La Réunion&quot;                                                                                            
##  [64] &quot;Rangel de Jesus&quot;                                                                                                                 
##  [65] &quot;bja2800dk&quot;                                                                                                                       
##  [66] &quot;xavier, tristan (haustral plongée)&quot;                                                                                              
##  [67] &quot;Jorge Fichane Zibane&quot;                                                                                                            
##  [68] &quot;Michael Long&quot;                                                                                                                    
##  [69] &quot;Foster, Kenneth&quot;                                                                                                                 
##  [70] &quot;Sebastien Rezzonico&quot;                                                                                                             
##  [71] &quot;Herculano Patricio&quot;                                                                                                              
##  [72] &quot;Isaias Jeckson Elija&quot;                                                                                                            
##  [73] &quot;Geir Drange&quot;                                                                                                                     
##  [74] &quot;J. Williams &amp; S. Planes&quot;                                                                                                         
##  [75] &quot;Nicet JB., Pinault M., Wickel J., Bigot L., Mulochau T., Zubia M., Conand C., Poupin J., Barrère A., Quod, J.P., Benon P&quot;        
##  [76] &quot;Diver initials JMA&quot;                                                                                                              
##  [77] &quot;Diver initials AEG&quot;                                                                                                              
##  [78] &quot;Diver initials JMM&quot;                                                                                                              
##  [79] &quot;Christian Doedt&quot;                                                                                                                 
##  [80] &quot;Diver initials KCL&quot;                                                                                                              
##  [81] &quot;Diver initials KS&quot;                                                                                                               
##  [82] &quot;Diver initials EMD&quot;                                                                                                              
##  [83] &quot;Marie&quot;                                                                                                                           
##  [84] &quot;Gil Zaqueu Maquene&quot;                                                                                                              
##  [85] &quot;Silva Carlos Mondlane&quot;                                                                                                           
##  [86] &quot;Diver initials EC&quot;                                                                                                               
##  [87] &quot;Sam Hansen&quot;                                                                                                                      
##  [88] &quot;Carmelo López Abad&quot;                                                                                                              
##  [89] &quot;cindyjay&quot;                                                                                                                        
##  [90] &quot;lisa hengelein&quot;                                                                                                                  
##  [91] &quot;JS&quot;                                                                                                                              
##  [92] &quot;JPS&quot;                                                                                                                             
##  [93] &quot;TPC&quot;                                                                                                                             
##  [94] &quot;Maguelone GRATEAU, Henri GRATEAU (ESSOR)&quot;                                                                                        
##  [95] &quot;David Bishop&quot;                                                                                                                    
##  [96] &quot;Ewout Knoester&quot;                                                                                                                  
##  [97] &quot;seastung&quot;                                                                                                                        
##  [98] &quot;Pieterjl&quot;                                                                                                                        
##  [99] &quot;angelique tourret (o sea bleu)&quot;                                                                                                  
## [100] &quot;Diver initials KSM&quot;                                                                                                              
## [101] &quot;Diver initials IDW&quot;                                                                                                              
## [102] &quot;Paolo Mazzei&quot;                                                                                                                    
## [103] &quot;Morgan&quot;                                                                                                                          
## [104] &quot;Jyore&quot;                                                                                                                           
## [105] &quot;IVS&quot;                                                                                                                             
## [106] &quot;Viriato José Mutelecanamba&quot;                                                                                                      
## [107] &quot;Christina Estrup&quot;                                                                                                                
## [108] &quot;RSS&quot;                                                                                                                             
## [109] &quot;Hoggett, Anne&quot;                                                                                                                   
## [110] &quot;rowanwattpringle&quot;                                                                                                                
## [111] &quot;jeyre&quot;                                                                                                                           
## [112] &quot;Rowan Watt-Pringle&quot;                                                                                                              
## [113] &quot;Gaither, Michelle R.; Wagner, Daniel&quot;                                                                                            
## [114] &quot;NAD&quot;                                                                                                                             
## [115] &quot;brudermann&quot;                                                                                                                      
## [116] &quot;Breezy&quot;                                                                                                                          
## [117] &quot;WCB&quot;                                                                                                                             
## [118] &quot;GJE&quot;                                                                                                                             
## [119] &quot;RJE&quot;                                                                                                                             
## [120] &quot;GER&quot;                                                                                                                             
## [121] &quot;msr&quot;                                                                                                                             
## [122] &quot;AJG&quot;                                                                                                                             
## [123] &quot;Ilya Bychkov&quot;                                                                                                                    
## [124] &quot;Alf&quot;                                                                                                                             
## [125] &quot;Sean Shrum&quot;                                                                                                                      
## [126] &quot;Diver initials MON&quot;                                                                                                              
## [127] &quot;Joao Sarmento&quot;                                                                                                                   
## [128] &quot;Cam&quot;                                                                                                                             
## [129] &quot;Shiko&quot;                                                                                                                           
## [130] &quot;Ryan Lee&quot;                                                                                                                        
## [131] &quot;Haydee Osorio&quot;                                                                                                                   
## [132] &quot;Steven Lawson&quot;                                                                                                                   
## [133] &quot;Bruno Amim&quot;                                                                                                                      
## [134] &quot;Anonymous&quot;                                                                                                                       
## [135] &quot;Elodie&quot;                                                                                                                          
## [136] &quot;Sea Escapes&quot;                                                                                                                     
## [137] &quot;Karen Willshaw&quot;                                                                                                                  
## [138] &quot;Diver initials SCM&quot;                                                                                                              
## [139] &quot;Diver initials MF&quot;                                                                                                               
## [140] &quot;Diver initials MKM&quot;                                                                                                              
## [141] &quot;()&quot;                                                                                                                              
## [142] &quot;João Luís Dramane&quot;                                                                                                               
## [143] &quot;Diver initials KMO&quot;                                                                                                              
## [144] &quot;Diver initials JLG&quot;                                                                                                              
## [145] &quot;TJA&quot;                                                                                                                             
## [146] &quot;AS&quot;                                                                                                                              
## [147] &quot;Rémi Forget&quot;                                                                                                                     
## [148] &quot;MLD&quot;                                                                                                                             
## [149] &quot;ninjawil&quot;                                                                                                                        
## [150] &quot;gernotkunz&quot;                                                                                                                      
## [151] &quot;Mike&quot;                                                                                                                            
## [152] &quot;JWG&quot;                                                                                                                             
## [153] &quot;AR&quot;                                                                                                                              
## [154] &quot;Richard Ling&quot;                                                                                                                    
## [155] &quot;TRD&quot;                                                                                                                             
## [156] &quot;T. Hunter&quot;                                                                                                                       
## [157] &quot;A.D. Connell&quot;                                                                                                                    
## [158] &quot;Serge Planes, Nicolas Hubert, Henrich Bruggemann&quot;                                                                                
## [159] &quot;JRA&quot;                                                                                                                             
## [160] &quot;MS&quot;                                                                                                                              
## [161] &quot;juju98&quot;                                                                                                                          
## [162] &quot;Curtis, Lynda&quot;                                                                                                                   
## [163] &quot;Noel  Wangunu&quot;                                                                                                                   
## [164] &quot;sea-kangaroo&quot;                                                                                                                    
## [165] &quot;Daniel Yanke&quot;                                                                                                                    
## [166] &quot;tony rebelo&quot;                                                                                                                     
## 
## $depth
##  [1]     NA 20.700  5.450 10.600 20.000 11.745 13.500 16.500 15.400 11.400
## [11] 23.700 20.600 24.400 14.200 24.850  9.700  9.200  8.650 12.800 14.650
## [21] 12.700  9.300  4.800 20.150 14.550 23.400 21.300 21.350 12.250 21.000
## [31] 16.200 15.600 21.900 22.650  9.100 12.540  8.750  1.250 23.000 19.200
## [41] 18.950  6.850  6.350 15.950 17.800 18.000  9.000  8.500 13.000  9.400
## [51]  9.500 22.200 10.770  9.900  9.600 15.000 10.000 22.000 21.950 11.200
## [61] 21.200 21.500 19.400  5.300  8.800 17.050 11.600 11.000  5.500  7.200
## [71] 21.600 19.500  8.990  5.330 12.000 14.480  6.000  5.000  8.735  9.070
## [81]  7.000 12.500  8.000  4.900  6.095  2.285 25.700 27.000  7.470 19.000
## [91]  4.420  8.840 13.715  3.000  1.000  2.000 14.000 17.000
## 
## $locality
##  [1] NA                                                                                                      
##  [2] &quot;west of Tamina, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan&quot;            
##  [3] &quot;off Yakomo, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan&quot;                
##  [4] &quot;Hanging Gardens&quot;                                                                                       
##  [5] &quot;Govuro Mar Aberto&quot;                                                                                     
##  [6] &quot;Jangamo Estuário&quot;                                                                                      
##  [7] &quot;Curieuse Island&quot;                                                                                       
##  [8] &quot;Japan, Ogasawara Is., Kazan Is. (Volcano Is.), Kita-Iwo-jima I., northeastern coast&quot;                   
##  [9] &quot;Maxixe Estuário&quot;                                                                                       
## [10] &quot;Inhassoro MAI&quot;                                                                                         
## [11] &quot;3 Pulgul St, Urangan QLD 4655, Australia&quot;                                                              
## [12] &quot;Urasoko, Kuchierabujima,Yakushima, Kumage-gun, Kuchierabu-jima island, Osumi Islands, Kagoshima, Japan&quot;
## [13] &quot;Crystal Rock, Komodo National Park&quot;                                                                    
## [14] &quot;Morrumbene Estuário&quot;                                                                                   
## [15] &quot;Inhassoro MAII&quot;                                                                                        
## [16] &quot;Wallis and Futuna, Futuna Island, exposed rocks off north point, exposed rocky reef and channels.&quot;     
## [17] &quot;Futuna, Wallis and Futuna, Futuna Island, exposed rocks of&quot;                                            
## [18] &quot;Aquarium&quot;                                                                                              
## [19] &quot;Vilankulo MA II&quot;                                                                                       
## [20] &quot;Sodwana Bay, Bikini South&quot;                                                                             
## [21] &quot;Sodwana Bay, Caves &amp; Overhangs&quot;                                                                        
## [22] &quot;Bougainville Reef Lagoon East&quot;                                                                         
## [23] &quot;Pulau Kasiui SW&quot;                                                                                       
## [24] &quot;Kanar Yapas&quot;                                                                                           
## [25] &quot;Umabana, Yonaguni, Yonaguni, Yaeyama-gun, Yonaguni-jima island, Yaeyama Islands, Okinawa, Japan&quot;       
## [26] &quot;Claraboyas Reef&quot;                                                                                       
## [27] &quot;Bikini&quot;                                                                                                
## [28] &quot;Sodwana Bay&quot;                                                                                           
## [29] &quot;Sunkist Reef&quot;                                                                                          
## [30] &quot;Rock Key (Reef)&quot;                                                                                       
## [31] &quot;Paradise House reef&quot;                                                                                   
## [32] &quot;Vilankulo MA I&quot;                                                                                        
## [33] &quot;The Atoll&quot;                                                                                             
## [34] &quot;Wreck 1&quot;                                                                                               
## [35] &quot;Lizard Island, Queensland&quot;                                                                             
## [36] &quot;Sodwana Bay, Bikini&quot;                                                                                   
## [37] &quot;Chagos Archipelago, Great Chagos Bank&quot;                                                                 
## [38] &quot;Elbow Cave Mooring N Solitary Is&quot;                                                                      
## [39] &quot;South Boulder Wall&quot;                                                                                    
## [40] &quot;Los Paisanitos&quot;                                                                                        
## [41] &quot;Cato East&quot;                                                                                             
## [42] &quot;Saumarez SW Islet&quot;                                                                                     
## [43] &quot;Saumarez SW reef cay&quot;                                                                                  
## [44] &quot;Kenn Reef rubble&quot;                                                                                      
## [45] &quot;Frederick Ridge Rock&quot;                                                                                  
## [46] &quot;Flinders Reef Bommie&quot;                                                                                  
## [47] &quot;Chilcott Islet SW inner reef&quot;                                                                          
## [48] &quot;Surge Crest East&quot;                                                                                      
## [49] &quot;Temple&quot;                                                                                                
## [50] &quot;Playing Field&quot;                                                                                         
## [51] &quot;40 Foot Wall&quot;                                                                                          
## [52] &quot;Dili Rock East&quot;                                                                                        
## [53] &quot;Steps&quot;                                                                                                 
## [54] &quot;Sistersreef&quot;                                                                                           
## [55] &quot;Coral Garden&quot;                                                                                          
## [56] &quot;Coco Cay&quot;                                                                                              
## [57] &quot;Rangali Madivaru&quot;                                                                                      
## [58] &quot;National Aquarium&quot;                                                                                     
## [59] &quot;1, Sodwana Main Road&quot;                                                                                  
## [60] &quot;Bikini, Sodwana&quot;                                                                                       
## [61] &quot;Cerebros&quot;                                                                                              
## [62] &quot;Anemone Bay N Solitary Is&quot;                                                                             
## [63] &quot;Manta Mooring NW Solitary Is&quot;                                                                          
## [64] &quot;Overheat Reef&quot;                                                                                         
## [65] &quot;Gazelas Mar Aberto&quot;                                                                                    
## [66] &quot;Turtle Beach&quot;                                                                                          
## [67] &quot;Anemone mooring Julien Rocks&quot;                                                                          
## [68] &quot;Shag Rock&quot;                                                                                             
## [69] &quot;Flying Fish Cove Boat Ramp&quot;                                                                            
## [70] &quot;Smith Point&quot;                                                                                           
## [71] &quot;Antilla Wreck&quot;                                                                                         
## [72] &quot;Columbia&quot;                                                                                              
## [73] &quot;Lhok Weng&quot;                                                                                             
## [74] &quot;rubiah island&quot;                                                                                         
## [75] &quot;South End Nth Solitary&quot;                                                                                
## [76] &quot;Fish Soup&quot;                                                                                             
## [77] &quot;Cleaner Station&quot;                                                                                       
## [78] &quot;Opposite Mimpi Resort&quot;                                                                                 
## [79] &quot;Light House&quot;                                                                                           
## [80] &quot;Pomene&quot;                                                                                                
## [81] &quot;Ouest, Nosy Be, Nosy-Kivindry&quot;                                                                         
## [82] &quot;Antananarivo, Ouest, Nosy Be, Nosy-Kivindry&quot;                                                           
## [83] &quot;North Boulder Wall S Solitary Is&quot;                                                                      
## [84] &quot;Buchanans Wall&quot;                                                                                        
## [85] &quot;The Gantry S Solitary Is&quot;                                                                              
## [86] &quot;Lizard Island Group&quot;                                                                                   
## [87] &quot;Ouest, St Gilles, Canyon&quot;                                                                              
## [88] &quot;Manila, 257 Quirino ave. Tambo P que&quot;                                                                  
## [89] &quot;Manila, Philippines&quot;                                                                                   
## [90] &quot;Manila&quot;                                                                                                
## [91] &quot;Kochchikade, NO 331 Sarath Wattha&quot;                                                                     
## [92] &quot;Kochchikade, Sri Lanka&quot;                                                                                
## [93] &quot;Western&quot;                                                                                               
## 
## $habitat
##  [1] NA                                            
##  [2] &quot;Forereef : ROB : Rock/Boulder&quot;               
##  [3] &quot;Forereef : SAG : Spur and Groove&quot;            
##  [4] &quot;Protected Slope : AGR : Aggregate Reef&quot;      
##  [5] &quot;Forereef : AGR : Aggregate Reef&quot;             
##  [6] &quot;Forereef : PSC : Pavement with Sand Channels&quot;
##  [7] &quot;Forereef : PAV : Pavement&quot;                   
##  [8] &quot;Forereef : PPR : Pavement with Patch Reefs&quot;  
##  [9] &quot;Forereef : RRB : Reef Rubble&quot;                
## [10] &quot;Coral Reef&quot;                                  
## [11] &quot;Forereef : MIX : Mixed Habitats&quot;             
## [12] &quot;Forereef : UNK : Unknown&quot;                    
## [13] &quot;Shallow coral reef : Forereef&quot;</code></pre>
</div>
<div id="problemas-não-reportados" class="section level2" number="0.3">
<h2><span class="header-section-number">3.3</span> Problemas não
reportados</h2>
<p>Agora iniciamos o processo de checagem mais fina que não é realizada
pelo algoritmo, por apresentar especificidades que vão além de sua
programação. Inicialmente, podemos verificar se as coordenadas são
válidas (e.g., latitudes &gt; 90 ou longitude &gt; 180) utilizando
funções dos pacotes <a
href="https://docs.ropensci.org/CoordinateCleaner/index.html"><code>CoordinateCleaner</code></a>
e <a
href="https://brunobrr.github.io/bdc/index.html"><code>bcd</code></a>.
Clicando nos links dos pacotes vocês podem checar diversas outras
funcionalidades oferecidas.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bdc)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(CoordinateCleaner)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># checar coordenadas válidas</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>check_pf <span class="ot">&lt;-</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  bdc<span class="sc">::</span><span class="fu">bdc_coordinates_outOfRange</span>(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dori_gbif1,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> <span class="st">&quot;decimalLatitude&quot;</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">lon =</span> <span class="st">&quot;decimalLongitude&quot;</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># checar coordenadas válidas e próximas a capitais (muitas vezes as coordenadas são erroneamente associadas a capitais dos países)</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>cl <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(acceptedScientificName, decimalLatitude, decimalLongitude) <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">decimallongitude =</span> decimalLongitude,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">decimallatitude =</span> decimalLatitude,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">scientificName =</span> acceptedScientificName) <span class="sc">%&gt;%</span> </span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">val =</span> <span class="fu">cc_val</span>(., <span class="at">value =</span> <span class="st">&quot;flagged&quot;</span>),</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">sea =</span> <span class="fu">cc_sea</span>(., <span class="at">value =</span> <span class="st">&quot;flagged&quot;</span>),</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">capital =</span> <span class="fu">cc_cap</span>(., <span class="at">value =</span> <span class="st">&quot;flagged&quot;</span>))</span></code></pre></div>
<pre><code>## OGR data source with driver: ESRI Shapefile 
## Source: &quot;/private/var/folders/xx/6x1gs2p90qs1n_41pc68sd0m0000gn/T/RtmpmFmLU1&quot;, layer: &quot;ne_110m_land&quot;
## with 127 features
## It has 3 fields</code></pre>
<p>Na imagem abaixo podemos dar uma rápida conferida nos alertas
indicados pelas funções. Não tivemos nenhuma coordenada inválida, mas
algumas ocorrências parecem estar muito próximas a capitais. No entanto,
todas as capitais estão em terra e, nesse caso, temos que investigar se
as ocorrências estão em terra (lembre-se a Dori vive no mar!) ou apenas
próximas a países insulares.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar coordenadas com flags</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># capitais (padrão é um raio de 10km)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>cl <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">decimalLongitude =</span> decimallongitude,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">decimalLatitude =</span> decimallatitude) <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  bdc<span class="sc">::</span><span class="fu">bdc_quickmap</span>(., <span class="at">col_to_map =</span> <span class="st">&quot;capital&quot;</span>)  </span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>cl <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">decimalLongitude =</span> decimallongitude,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">decimalLatitude =</span> decimallatitude) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  bdc<span class="sc">::</span><span class="fu">bdc_quickmap</span>(., <span class="at">col_to_map =</span> <span class="st">&quot;sea&quot;</span>)  </span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<p>Uma maneira fácil de excluir dados em terra é checar a distribuição
das ocorrências em relação às regiões oceanográficas indicadas nos dados
(<code>waterBody</code>). Isso vale apenas para o OBIS, mas se o
objetivo é avaliar espécies terrestres, basta excluir as espécies com
<em>flags</em> <strong>TRUE</strong> na coluna <em>sea</em> criada pela
função <code>cc_sea</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># investigar niveis suspeitos</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(waterBody) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code></pre></div>
<pre><code>##  [1] NA                                         
##  [2] &quot;North Pacific Ocean&quot;                      
##  [3] &quot;Celebes Sea&quot;                              
##  [4] &quot;South Pacific Ocean&quot;                      
##  [5] &quot;Flores Sea&quot;                               
##  [6] &quot;Pacific&quot;                                  
##  [7] &quot;Caribbean Sea&quot;                            
##  [8] &quot;Gulf of Mexico&quot;                           
##  [9] &quot;Atlantic Ocean&quot;                           
## [10] &quot;Verde Island&quot;                             
## [11] &quot;La Caleta&quot;                                
## [12] &quot;Red Sea&quot;                                  
## [13] &quot;Carribean&quot;                                
## [14] &quot;Banda Sea&quot;                                
## [15] &quot;Indian Ocean&quot;                             
## [16] &quot;IndianOcean&quot;                              
## [17] &quot;Laut Bali&quot;                                
## [18] &quot;Royal Caribbean&quot;                          
## [19] &quot;Laccadive Sea&quot;                            
## [20] &quot;Baltimore, MD&quot;                            
## [21] &quot;Carribean Sea&quot;                            
## [22] &quot;South China and Eastern Archipelagic Seas&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># waterBody</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(waterBody) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">occ =</span> <span class="fu">length</span>(scientificName)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(occ, <span class="at">y=</span>waterBody)) <span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>) </span></code></pre></div>
<p><img src="atividade3_files/figure-html/coords1-1.png" width="672" /></p>
<p>Aparentemente, esta espécie tem sido reportada no mundo todo. Com o
sucesso da animação <em>Procurando Nemo</em>, já temos uma ideia de que
a <strong>Dori</strong> tem ocorrência nas águas Australianas, mas
podemos acessar bancos de dados especializados para checar estas
informações. No caso de peixes (Osteichthyes e Chondrichthyes) o <a
href="https://fishbase.org"><em>FishBase</em></a> é a fonte mais
atualizada de informações deste grupo. Depois desta confirmação, podemos
suspeitar das ocorrências indicadas no Atlântico e, o tratamento mais
rigoroso é a exclusão de qualquer ocorrência suspeita.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fonte das regioes erradas</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Atlantic Ocean&quot;</span>, <span class="st">&quot;Carribean&quot;</span>, <span class="st">&quot;Royal Caribbean&quot;</span>, <span class="st">&quot;Carribean Sea&quot;</span>, <span class="st">&quot;Bonaire&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(datasetName)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   datasetName                             
##   &lt;chr&gt;                                   
## 1 Diveboard - Scuba diving citizen science</code></pre>
<p>Alguma característica destas ocorrências do Atlântico podem dar
pistas de como continuar filtrando os resultados. Neste caso, abaixo
podemos ver que, ao investigarmos um programa de ciência específico de
identificação realizada por mergulhadores amadores, notamos que este
concentra a maior parte das suspeitas. Assim, é melhor ser conservador e
remover todas as ocorrências associadas a tal programa.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 25 ocorrencias</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(datasetName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Diveboard - Scuba diving citizen science&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 25 × 14
##    scientificName       acceptedScienti… decimalLatitude decimalLongitude issues
##    &lt;chr&gt;                &lt;chr&gt;                      &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt; 
##  1 Paracanthurus hepat… Paracanthurus h…            4.11            119.  cdreps
##  2 Paracanthurus hepat… Paracanthurus h…           -8.4             119.  cdreps
##  3 Paracanthurus hepat… Paracanthurus h…           16.1             -61.8 cdreps
##  4 Paracanthurus hepat… Paracanthurus h…           23.2             -81.2 cdreps
##  5 Paracanthurus hepat… Paracanthurus h…           26.2             -80   cdreps
##  6 Paracanthurus hepat… Paracanthurus h…           24.5             -81.9 cdreps
##  7 Paracanthurus hepat… Paracanthurus h…           13.5             121.  cdreps
##  8 Paracanthurus hepat… Paracanthurus h…           18.4             -69.7 cdreps
##  9 Paracanthurus hepat… Paracanthurus h…           27.5              34.2 cdreps
## 10 Paracanthurus hepat… Paracanthurus h…           19.3             -81.1 cdreps
## # … with 15 more rows, and 9 more variables: waterBody &lt;chr&gt;,
## #   basisOfRecord &lt;chr&gt;, occurrenceStatus &lt;chr&gt;, rightsHolder &lt;chr&gt;,
## #   datasetName &lt;chr&gt;, recordedBy &lt;chr&gt;, depth &lt;dbl&gt;, locality &lt;chr&gt;,
## #   habitat &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar todas do dataset suspeito</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>dori_gbif_ok <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>datasetName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Diveboard - Scuba diving citizen science&quot;</span>))</span></code></pre></div>
<p>Agora não vemos mais nenhuma ocorrência no Atlântico!</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapdata)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">&#39;world&#39;</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># checar pontos</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dori_gbif_ok, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Podemos usar a profundidade como outro critério, pois esta espécie é
associada apenas a recifes rasos segundo o <strong>FishBase</strong>. E
parece tudo ok.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar profundidade</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>dori_gbif_ok <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> depth, <span class="at">fill =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() </span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<hr />
<div id="obis" class="section level3" number="0.3.1">
<h3><span class="header-section-number">3.3.1</span>
<strong>OBIS</strong></h3>
<p>Agora vamos fazer os mesmos procedimentos com os dados do
<strong>OBIS</strong>, utilizando o pacote <code>robis</code> e a função
<code>occurrence</code> deste pacote.</p>
<ol style="list-style-type: decimal">
<li>Baixar as ocorrências</li>
</ol>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## OBIS</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>dori_obis <span class="ot">&lt;-</span> robis<span class="sc">::</span><span class="fu">occurrence</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Checar os dados</li>
</ol>
<p>Temos variáveis com os mesmos nomes, pois ambos usam o sistema
<code>DwC</code>, mas os problemas reportados neste caso são indicados
na coluna <code>flags</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar dados</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dori_obis)</span></code></pre></div>
<pre><code>##   [1] &quot;infraphylum&quot;                        
##   [2] &quot;country&quot;                            
##   [3] &quot;date_year&quot;                          
##   [4] &quot;scientificNameID&quot;                   
##   [5] &quot;scientificName&quot;                     
##   [6] &quot;dropped&quot;                            
##   [7] &quot;gigaclassid&quot;                        
##   [8] &quot;aphiaID&quot;                            
##   [9] &quot;decimalLatitude&quot;                    
##  [10] &quot;subclassid&quot;                         
##  [11] &quot;gigaclass&quot;                          
##  [12] &quot;infraphylumid&quot;                      
##  [13] &quot;phylumid&quot;                           
##  [14] &quot;familyid&quot;                           
##  [15] &quot;catalogNumber&quot;                      
##  [16] &quot;occurrenceStatus&quot;                   
##  [17] &quot;basisOfRecord&quot;                      
##  [18] &quot;terrestrial&quot;                        
##  [19] &quot;modified&quot;                           
##  [20] &quot;maximumDepthInMeters&quot;               
##  [21] &quot;id&quot;                                 
##  [22] &quot;parvphylum&quot;                         
##  [23] &quot;order&quot;                              
##  [24] &quot;organismQuantity&quot;                   
##  [25] &quot;dataset_id&quot;                         
##  [26] &quot;decimalLongitude&quot;                   
##  [27] &quot;collectionCode&quot;                     
##  [28] &quot;date_end&quot;                           
##  [29] &quot;speciesid&quot;                          
##  [30] &quot;occurrenceID&quot;                       
##  [31] &quot;date_start&quot;                         
##  [32] &quot;genus&quot;                              
##  [33] &quot;organismQuantityType&quot;               
##  [34] &quot;eventDate&quot;                          
##  [35] &quot;brackish&quot;                           
##  [36] &quot;absence&quot;                            
##  [37] &quot;taxonRank&quot;                          
##  [38] &quot;genusid&quot;                            
##  [39] &quot;originalScientificName&quot;             
##  [40] &quot;marine&quot;                             
##  [41] &quot;minimumDepthInMeters&quot;               
##  [42] &quot;subphylumid&quot;                        
##  [43] &quot;institutionCode&quot;                    
##  [44] &quot;wrims&quot;                              
##  [45] &quot;date_mid&quot;                           
##  [46] &quot;class&quot;                              
##  [47] &quot;orderid&quot;                            
##  [48] &quot;footprintWKT&quot;                       
##  [49] &quot;geodeticDatum&quot;                      
##  [50] &quot;kingdom&quot;                            
##  [51] &quot;classid&quot;                            
##  [52] &quot;phylum&quot;                             
##  [53] &quot;depth&quot;                              
##  [54] &quot;species&quot;                            
##  [55] &quot;subphylum&quot;                          
##  [56] &quot;subclass&quot;                           
##  [57] &quot;family&quot;                             
##  [58] &quot;kingdomid&quot;                          
##  [59] &quot;parvphylumid&quot;                       
##  [60] &quot;node_id&quot;                            
##  [61] &quot;flags&quot;                              
##  [62] &quot;sss&quot;                                
##  [63] &quot;shoredistance&quot;                      
##  [64] &quot;sst&quot;                                
##  [65] &quot;bathymetry&quot;                         
##  [66] &quot;institutionID&quot;                      
##  [67] &quot;municipality&quot;                       
##  [68] &quot;recordNumber&quot;                       
##  [69] &quot;locality&quot;                           
##  [70] &quot;stateProvince&quot;                      
##  [71] &quot;parentNameUsageID&quot;                  
##  [72] &quot;organismID&quot;                         
##  [73] &quot;collectionID&quot;                       
##  [74] &quot;continent&quot;                          
##  [75] &quot;eventID&quot;                            
##  [76] &quot;scientificNameAuthorship&quot;           
##  [77] &quot;eventRemarks&quot;                       
##  [78] &quot;taxonID&quot;                            
##  [79] &quot;vernacularName&quot;                     
##  [80] &quot;locationRemarks&quot;                    
##  [81] &quot;countryCode&quot;                        
##  [82] &quot;identifiedBy&quot;                       
##  [83] &quot;datasetName&quot;                        
##  [84] &quot;taxonomicStatus&quot;                    
##  [85] &quot;waterBody&quot;                          
##  [86] &quot;specificEpithet&quot;                    
##  [87] &quot;locationID&quot;                         
##  [88] &quot;datasetID&quot;                          
##  [89] &quot;occurrenceRemarks&quot;                  
##  [90] &quot;associatedSequences&quot;                
##  [91] &quot;associatedReferences&quot;               
##  [92] &quot;dateIdentified&quot;                     
##  [93] &quot;bibliographicCitation&quot;              
##  [94] &quot;coordinateUncertaintyInMeters&quot;      
##  [95] &quot;rightsHolder&quot;                       
##  [96] &quot;type&quot;                               
##  [97] &quot;license&quot;                            
##  [98] &quot;recordedBy&quot;                         
##  [99] &quot;year&quot;                               
## [100] &quot;individualCount&quot;                    
## [101] &quot;language&quot;                           
## [102] &quot;day&quot;                                
## [103] &quot;month&quot;                              
## [104] &quot;samplingProtocol&quot;                   
## [105] &quot;samplingEffort&quot;                     
## [106] &quot;startDayOfYear&quot;                     
## [107] &quot;habitat&quot;                            
## [108] &quot;references&quot;                         
## [109] &quot;verbatimEventDate&quot;                  
## [110] &quot;sampleSizeUnit&quot;                     
## [111] &quot;georeferencedBy&quot;                    
## [112] &quot;maximumDistanceAboveSurfaceInMeters&quot;
## [113] &quot;island&quot;                             
## [114] &quot;ownerInstitutionCode&quot;               
## [115] &quot;islandGroup&quot;                        
## [116] &quot;dataGeneralizations&quot;                
## [117] &quot;georeferenceProtocol&quot;               
## [118] &quot;verbatimDepth&quot;                      
## [119] &quot;sampleSizeValue&quot;                    
## [120] &quot;coordinatePrecision&quot;                
## [121] &quot;fieldNumber&quot;                        
## [122] &quot;dynamicProperties&quot;                  
## [123] &quot;preparations&quot;                       
## [124] &quot;lifeStage&quot;                          
## [125] &quot;parentEventID&quot;                      
## [126] &quot;sex&quot;                                
## [127] &quot;georeferenceRemarks&quot;                
## [128] &quot;minimumElevationInMeters&quot;           
## [129] &quot;maximumElevationInMeters&quot;           
## [130] &quot;eventTime&quot;                          
## [131] &quot;county&quot;                             
## [132] &quot;otherCatalogNumbers&quot;                
## [133] &quot;verbatimLatitude&quot;                   
## [134] &quot;higherClassification&quot;               
## [135] &quot;verbatimLongitude&quot;                  
## [136] &quot;endDayOfYear&quot;                       
## [137] &quot;footprintSRS&quot;                       
## [138] &quot;georeferencedDate&quot;                  
## [139] &quot;higherGeography&quot;                    
## [140] &quot;namePublishedInID&quot;                  
## [141] &quot;disposition&quot;                        
## [142] &quot;originalNameUsage&quot;                  
## [143] &quot;accessRights&quot;                       
## [144] &quot;associatedMedia&quot;                    
## [145] &quot;acceptedNameUsage&quot;                  
## [146] &quot;typeStatus&quot;                         
## [147] &quot;verbatimCoordinates&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="ot">&lt;-</span> dori_obis <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, decimalLatitude, decimalLongitude, bathymetry,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>         flags, waterBody, basisOfRecord, occurrenceStatus, rightsHolder, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>         datasetName, recordedBy, depth, locality, habitat) <span class="sc">%&gt;%</span> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"># check problemas reportados (flags)</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(flags)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##   flags                     
##   &lt;chr&gt;                     
## 1 &lt;NA&gt;                      
## 2 NO_DEPTH                  
## 3 NO_DEPTH,ON_LAND          
## 4 DEPTH_EXCEEDS_BATH        
## 5 ON_LAND,DEPTH_EXCEEDS_BATH
## 6 ON_LAND                   
## 7 ON_LAND,NO_DEPTH</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check NA em datasetName</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">is.na</span>(datasetName)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(waterBody)</span></code></pre></div>
<pre><code>## # A tibble: 12 × 1
##    waterBody             
##    &lt;chr&gt;                 
##  1 &lt;NA&gt;                  
##  2 Oceania               
##  3 Pacific Ocean         
##  4 Asia                  
##  5 Africa                
##  6 Indian                
##  7 indien                
##  8 North America Atlantic
##  9 Pacific               
## 10 pacifique             
## 11 atlantique            
## 12 North America</code></pre>
<p>Aqui usamos as <code>flags</code> para filtrar ocorrências em terra,
além de remover dados sem nome de <em>dataset</em> (não temos como
checar a origem adequadamente, então podemos tratar como suspeitos),
filtrar ocorrências no Atlântico e verificar a profundidade
reportada.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># depth ok</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;North America Atlantic&quot;</span>, <span class="st">&quot;atlantique&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> depth, <span class="at">fill =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() </span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar niveis</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;North America Atlantic&quot;</span>, <span class="st">&quot;atlantique&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(., unique)</span></code></pre></div>
<pre><code>## $scientificName
## [1] &quot;Paracanthurus hepatus&quot;
## 
## $decimalLatitude
##   [1]  14.2460003  15.2612250  15.0777326  14.9315443  20.9260006   0.1868800
##   [7]   0.1915569  14.8471569  18.1697050  13.2303711  15.2735300   0.1882000
##  [13]   0.1902900  18.0501780  14.8436598  15.2812907   0.1908500 -14.2790305
##  [19]  15.0695718   7.1170001  -6.8000000  15.1052253   0.2065500  14.2014619
##  [25]  15.2688078   0.1872420  15.0865944  15.0033074  15.1110520   0.1949556
##  [31]  15.0520660  15.2829550  14.9524648  15.1924560  15.0912826  14.1692040
##  [37]  14.1088820   0.7982430 -14.2738570  18.1449870  14.8649172 -14.1518635
##  [43]  -8.4156407  14.9276330  24.8008330  15.1138340  16.7184000  13.2823530
##  [49]  -6.0790000   2.1641140  15.1163631 -14.2240685  14.9249980  15.2766544
##  [55]  15.0042435  15.2748410   0.1903102  18.0939460  14.8389450   0.8208993
##  [61]  15.2542167  15.2567141  14.9349439  -8.4180000  17.5869300  15.1342100
##  [67] -18.1486000   6.3842680 -14.2413730  15.2688363   0.1970000 -17.1836910
##  [73]  15.0556089   0.8224659 -14.2785729 -11.6506000  15.2756939  -8.4465079
##  [79]  18.0907210  15.2698445   0.1907412  15.2751892  16.7105020  -3.7833333
##  [85]  15.2559710  18.1496535  15.0109170  18.8112216   6.3824613  14.8651780
##  [91]  11.9460900   0.1989000 -14.2732544   0.1931100  -8.6047191   0.1954804
##  [97]  -8.3627887  18.0851080  15.1760200  17.6075300 -14.2852098  19.6758593
## [103]  24.7975000  15.1106289  18.0495721  17.5919243
## 
## $decimalLongitude
##   [1]  120.47900  145.82889  145.65842  145.63004 -156.45300 -176.46176
##   [7] -176.48886  145.56905  145.79179  144.64385  145.79122 -176.48273
##  [13] -176.45685  145.70588  145.56591  145.80070 -176.48893 -170.54739
##  [19]  145.65610   79.80800   39.25000  145.72023 -176.47949  145.26090
##  [25]  145.83218 -176.46102  145.65793  145.67423  145.70275 -176.48664
##  [31]  145.65608  145.80272  145.61942  145.70396  145.75022  145.28545
##  [37]  145.16840 -176.62003 -169.49334  145.75369  145.58005 -169.61060
##  [43]  127.31111  145.63037  141.28583  145.69897  145.77638  144.76383
##  [49]  106.83700  118.64584  145.69629 -169.51954  145.64574  145.82731
##  [55]  145.58672  145.79259 -176.45731  145.74479  145.53007 -176.62671
##  [61]  145.75177  145.81463  145.65172  127.30900  145.81808  145.67886
##  [67]  178.37900 -162.46472 -170.67885  145.83191 -176.48620  146.29102
##  [73]  145.59720 -176.62678 -170.54882   43.25720  145.79354  127.32029
##  [79]  145.76129  145.78511 -176.48881  145.82971  145.76719  128.12500
##  [85]  145.72341  145.81155  145.58553  145.67677 -162.42674  145.56811
##  [91]  -66.68072 -176.48500 -170.50510 -176.45694  125.21931 -176.48669
##  [97]  127.10333  145.72653  145.78762  145.81530 -170.54548  145.40914
## [103]  141.29083  145.70190  145.70552  145.81372
## 
## $bathymetry
##  [1]  292.00   35.00   75.00  -17.00   29.00   33.00  266.00   91.00    1.00
## [10]  181.00   -4.00   -1.00  264.00   47.00  -61.00 -109.00  -10.00   15.00
## [19]  -22.00   -2.00  122.00   52.00  -16.00  -15.00  -42.00  -28.00   17.00
## [28]    7.00  141.00  -27.00  170.00   -7.00  -26.00   56.00  111.00   28.00
## [37]    9.00   55.00   -3.00  132.00   63.00  -24.00  -72.00  -12.00   26.00
## [46]  322.00    3.00  -19.00   88.00  -37.00  -66.00   14.00    2.00   38.00
## [55]    3.12   -8.00  -13.00  -52.00  151.00   19.00   96.00  -71.00  218.00
## [64]  126.00
## 
## $flags
## [1] &quot;NO_DEPTH&quot;           NA                   &quot;DEPTH_EXCEEDS_BATH&quot;
## [4] &quot;NO_DEPTH,ON_LAND&quot;   &quot;ON_LAND&quot;           
## 
## $waterBody
## [1] &quot;South China and Eastern Archipelagic Seas&quot;
## [2] &quot;North Pacific Ocean&quot;                      
## [3] &quot;Pacific Ocean&quot;                            
## [4] &quot;South Pacific Ocean&quot;                      
## [5] &quot;Indian Ocean&quot;                             
## [6] NA                                         
## [7] &quot;Coral Sea&quot;                                
## 
## $basisOfRecord
## [1] &quot;PreservedSpecimen&quot; &quot;HumanObservation&quot; 
## 
## $occurrenceStatus
## [1] &quot;present&quot; NA        &quot;Present&quot;
## 
## $rightsHolder
## [1] NA                             &quot;Canadian Museum of Nature&quot;   
## [3] &quot;Bernice Pauahi Bishop Museum&quot;
## 
## $datasetName
## [1] &quot;Ocean Genome Legacy Collection&quot;                                                                                                                                                                                                         
## [2] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands&quot;                                          
## [3] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009&quot;
## [4] &quot;Fish&quot;                                                                                                                                                                                                                                   
## [5] &quot;Asia-Pacific Dataset&quot;                                                                                                                                                                                                                   
## [6] &quot;Bishop Museum Fish Specimens&quot;                                                                                                                                                                                                           
## [7] &quot;Fish collection of National Museum of Nature and Science&quot;                                                                                                                                                                               
## [8] &quot;MMM_ALR_FISH&quot;                                                                                                                                                                                                                           
## [9] &quot;Pacific Reef Assessment and Monitoring Program: Rapid Ecological Assessments of Fish Large-Area Stationary Point Count Surveys (SPC) at Coral Reef Sites across the Pacific Ocean from 2000 to 2007&quot;                                    
## 
## $recordedBy
##  [1] NA                             &quot;Diver initials KSM&quot;          
##  [3] &quot;Diver initials EMD&quot;           &quot;Diver initials VAB&quot;          
##  [5] &quot;Diver initials TCW&quot;           &quot;Diver initials LMG&quot;          
##  [7] &quot;Diver initials MF&quot;            &quot;Diver initials PMA&quot;          
##  [9] &quot;Diver initials KMO&quot;           &quot;Diver initials RMW&quot;          
## [11] &quot;Diver initials EC&quot;            &quot;Diver initials IDW&quot;          
## [13] &quot;Diver initials MKM&quot;           &quot;Macaulay, A.J.&quot;              
## [15] &quot;Diver initials SCM&quot;           &quot;Diver initials JLG&quot;          
## [17] &quot;Diver initials KDG&quot;           &quot;Diver initials MON&quot;          
## [19] &quot;Diver initials JMM&quot;           &quot;Diver initials JPZ&quot;          
## [21] &quot;Diver initials KCL&quot;           &quot;Diver initials KS&quot;           
## [23] &quot;Diver initials CC&quot;            &quot;Diver initials AEG&quot;          
## [25] &quot;Diver initials JMA&quot;           &quot;Diver initials JWM&quot;          
## [27] &quot;Diver initials ARP&quot;           &quot;Jamie Hopkins&quot;               
## [29] &quot;Youngman, Dr. Philip Merrill&quot; &quot;F. Martin&quot;                   
## [31] &quot;Diver initials BDS&quot;          
## 
## $depth
##  [1]    NA 15.60 13.00 11.00 20.70  6.35 23.70 12.00 10.00 19.00 21.30 22.00
## [13] 15.00 21.00 11.20 23.00 20.00 21.60 16.20  7.00 12.80 15.40 27.00 11.60
## [25]  4.80 25.70  9.30 24.85  5.45  9.10 14.20 17.80  2.70 13.50 21.90 22.65
## [37]  9.70 11.40  5.00  8.80  9.00 20.15  3.00  9.20 18.95 23.40  7.20 14.00
## [49]  5.50 17.05  4.60 17.00  1.80 10.60  9.40 19.40  9.60  6.85  8.65 15.95
## [61]  8.50 19.20 18.00  5.30 10.15 20.60 21.20 21.50 12.70 12.50 21.95 14.55
## [73]  9.90 14.65 22.20  3.10 21.35  9.75 24.40 12.25  9.50 16.50 19.50
## 
## $locality
##  [1] &quot;Manila, Philippines&quot;                                                            
##  [2] NA                                                                               
##  [3] &quot;Kochchikade, Sri Lanka&quot;                                                         
##  [4] &quot;Fungu Yasini, southwest reef, 8 kilometres north of north tip of Bongovo Island&quot;
##  [5] &quot;offshore reef, Io-sima&quot;                                                         
##  [6] &quot;the lagoon in Tanjung Duwata&quot;                                                   
##  [7] &quot;Viti Levu Island; W of Rat-Tail Passage&quot;                                        
##  [8] &quot;Flora Reef, Coral Sea&quot;                                                          
##  [9] &quot;South Indian Ocean, 700 metres north of Hantsambu, off Itsandra&quot;                
## [10] &quot;Indoneshia Ambon I. S coast Latsuhalat&quot;                                         
## [11] &quot;Gran Roque. Archipiélago Los Roques&quot;                                            
## [12] &quot;East of Kangokuiwa, Io-sima&quot;                                                    
## 
## $habitat
##  [1] NA                                               
##  [2] &quot;Forereef : SAG : Spur and Groove&quot;               
##  [3] &quot;Forereef : PAV : Pavement&quot;                      
##  [4] &quot;Forereef : ROB : Rock/Boulder&quot;                  
##  [5] &quot;Forereef : AGR : Aggregate Reef&quot;                
##  [6] &quot;Shallow coral reef : Forereef&quot;                  
##  [7] &quot;Forereef : UNK : Unknown&quot;                       
##  [8] &quot;Forereef : MIX : Mixed Habitats&quot;                
##  [9] &quot;Forereef : RRB : Reef Rubble&quot;                   
## [10] &quot;Forereef : PPR : Pavement with Patch Reefs&quot;     
## [11] &quot;Forereef : PSC : Pavement with Sand Channels&quot;   
## [12] &quot;Protected Slope : AGR : Aggregate Reef&quot;         
## [13] &quot;Forereef : SCR : Sand with Scattered Coral/Rock&quot;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ok</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>dori_obis_ok <span class="ot">&lt;-</span> dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;North America Atlantic&quot;</span>, <span class="st">&quot;atlantique&quot;</span>, <span class="cn">NA</span>)) </span></code></pre></div>
<p>Podemos usar um mapa para verificar melhor as ocorrências também.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dori_obis_ok, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Parece tudo ok, e chegamos a 139 ocorrências potenciais.</p>
<p>Por fim, vamos unir todas as ocorrências, checar se existem
duplicatas e plotar o resultado final.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unir GBIF e OBIS</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ver diferencas</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(dori_gbif_ok), <span class="fu">names</span>(dori_obis_ok))</span></code></pre></div>
<pre><code>## [1] &quot;acceptedScientificName&quot; &quot;issues&quot;</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(dori_obis_ok), <span class="fu">names</span>(dori_gbif_ok))</span></code></pre></div>
<pre><code>## [1] &quot;bathymetry&quot; &quot;flags&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dori_gbif_ok <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">repo =</span> <span class="fu">paste0</span>(<span class="st">&quot;gbif&quot;</span>, <span class="fu">row.names</span>(.))), </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                      dori_obis_ok <span class="sc">%&gt;%</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">repo =</span> <span class="fu">paste0</span>(<span class="st">&quot;obis&quot;</span>, <span class="fu">row.names</span>(.)))) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">&quot;repo&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(decimalLongitude, decimalLatitude, depth) <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;occ&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">&quot;occ&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;datasetName&quot;</span>, <span class="st">&quot;rn&quot;</span>), <span class="at">sep =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scientificName =</span> <span class="st">&quot;Paracanthurus hepatus&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>rn)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="co"># mapear ocorrencias</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> all_data, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> datasetName)) <span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#theme(legend.title = element_blank()) +</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-13-1.png" width="672" />
<br><br></p>
<p>O último passo é guardarmos os dados baixados e tratados para
economizar tempo no próximo uso, mas o mais importante já está
registrado, o passo-a-passo de como chegamos até os dados usados nas
análises.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(all_data, <span class="st">&quot;data/occ_GBIF-OBIS_par_hepa.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="extra-classificação-automática-de-pontos"
class="section level3" number="0.3.2">
<h3><span class="header-section-number">3.3.2</span> EXTRA:
Classificação automática de pontos</h3>
<div id="função-caseira" class="section level4" number="0.3.2.1">
<h4><span class="header-section-number">3.3.2.1</span> Função
‘caseira’</h4>
<p>Podemos usar outras ferramentas mais refinadas para nos ajudar a
detectar ocorrências suspeitas, como as encontradas nos pacotes
<code>CoordinateCleaner</code>, <code>obistools</code>,
<code>scrubr</code> e <code>biogeo</code>. Além disso, podemos criar
nossas próprias funções para auxiliar nessa tarefa.</p>
<p>Abaixo, vamos utilizar os dados baixados do <code>GBIF</code> antes
da limpeza já realizada acima. Aqui vou começar a exemplificar com uma
função simples criada por mim. Esta função utiliza as coordenadas para
calcular o centróide (ponto médio de todas as ocorrências) e, a partir
dele, a distância de cada ponto até o centróide. Esse princípio se
baseia em propriedades de conectividade de populações contíguas, então
quanto mais distantes (neste caso as muito distantes) maior a chance de
termos uma ocorrência suspeita da mesma espécie. <em>Atenção: isso é
apenas uma ferramenta para classificar as ocorrências! A decisão de
filtrar ou não os pontos suspeitos vai depender do seu conhecimento ou
da literatura a respeito dos habitats e regiões de ocorrência da
espécie-alvo</em>.</p>
<p>Inicialmente, vamos carregar a função <code>flag_outlier</code>. E,
em seguida, aplicaremos a função e vamos plotar um mapa para avaliar as
ocorrências com <em>flag</em> de <em>outlier</em>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcao para classificar ocorrencias suspeitas</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>flag_outlier <span class="ot">&lt;-</span> <span class="cf">function</span>(df, species){</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># funcao para classificar ocorrencias suspeitas</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># baseada no calculo do centroide de todas ocorrencias</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># indica como &#39;check&#39; as ocorrencias que tem distancias até o centroide</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># acima do 90th quantil (default) das distancias calculadas</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  dados <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(scientificName <span class="sc">==</span> species); </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  dados2 <span class="ot">&lt;-</span> geosphere<span class="sc">::</span><span class="fu">distVincentyEllipsoid</span>(</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    dados <span class="sc">%&gt;%</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">centr_lon =</span> <span class="fu">median</span>(decimalLongitude),</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">centr_lat =</span> <span class="fu">median</span>(decimalLatitude)),</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    dados <span class="sc">%&gt;%</span> </span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(decimalLongitude, decimalLatitude)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_cols</span>(dados) <span class="sc">%&gt;%</span> </span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">dist_centroid =</span> <span class="st">&#39;...1&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">flag =</span> <span class="fu">ifelse</span>(dist_centroid <span class="sc">&lt;</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.9</span>), <span class="st">&quot;OK&quot;</span>,</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(dist_centroid <span class="sc">&gt;=</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.90</span>) <span class="sc">&amp;</span> dist_centroid <span class="sc">&lt;</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.95</span>), <span class="st">&quot;check &gt; Q90&quot;</span>,</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">ifelse</span>(dist_centroid <span class="sc">&gt;=</span> <span class="fu">quantile</span>(dist_centroid, <span class="at">probs =</span> <span class="fl">0.95</span>), <span class="st">&quot;check &gt; Q95&quot;</span>, <span class="st">&quot;OK&quot;</span>))))</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># mutate(flag = ifelse(dist_centroid &gt; quantile(dist_centroid, probs = prob), &quot;check&quot;, &quot;OK&quot;))</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(dados2)</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># classificar ocorrências</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>marcados <span class="ot">&lt;-</span> dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, decimalLongitude, decimalLatitude, datasetName) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flag_outlier</span>(., <span class="st">&quot;Paracanthurus hepatus (Linnaeus, 1766)&quot;</span>)</span></code></pre></div>
<pre><code>##     dist_centroid                         scientificName decimalLongitude
## 1       3563226.0 Paracanthurus hepatus (Linnaeus, 1766)        151.30166
## 2       3418949.5 Paracanthurus hepatus (Linnaeus, 1766)        153.26505
## 3       3249122.8 Paracanthurus hepatus (Linnaeus, 1766)        153.56667
## 4       3334855.3 Paracanthurus hepatus (Linnaeus, 1766)        153.62837
## 5      10030643.0 Paracanthurus hepatus (Linnaeus, 1766)         39.36794
## 6       2235634.4 Paracanthurus hepatus (Linnaeus, 1766)        148.44080
## 7       3787713.7 Paracanthurus hepatus (Linnaeus, 1766)        122.00093
## 8       6463062.4 Paracanthurus hepatus (Linnaeus, 1766)         72.97009
## 9      10010150.1 Paracanthurus hepatus (Linnaeus, 1766)         39.30729
## 10      3807244.6 Paracanthurus hepatus (Linnaeus, 1766)        114.16936
## 11      4033594.2 Paracanthurus hepatus (Linnaeus, 1766)        129.29053
## 12      1832862.7 Paracanthurus hepatus (Linnaeus, 1766)        145.66355
## 13      1896593.8 Paracanthurus hepatus (Linnaeus, 1766)        118.86434
## 14      2197612.0 Paracanthurus hepatus (Linnaeus, 1766)        147.69919
## 15      1636129.5 Paracanthurus hepatus (Linnaeus, 1766)        144.10688
## 16      1551687.1 Paracanthurus hepatus (Linnaeus, 1766)        116.06586
## 17      3552263.0 Paracanthurus hepatus (Linnaeus, 1766)        121.49028
## 18      3302956.2 Paracanthurus hepatus (Linnaeus, 1766)        153.57911
## 19      3824638.4 Paracanthurus hepatus (Linnaeus, 1766)        127.40389
## 20       668610.1 Paracanthurus hepatus (Linnaeus, 1766)        130.55572
## 21      1609081.7 Paracanthurus hepatus (Linnaeus, 1766)        115.54442
## 22       673075.0 Paracanthurus hepatus (Linnaeus, 1766)        130.56772
## 23      3419039.5 Paracanthurus hepatus (Linnaeus, 1766)        153.26482
## 24      2972527.1 Paracanthurus hepatus (Linnaeus, 1766)        152.70748
## 25      3088334.0 Paracanthurus hepatus (Linnaeus, 1766)        145.57996
## 26     10010492.9 Paracanthurus hepatus (Linnaeus, 1766)         39.38253
## 27     10001049.6 Paracanthurus hepatus (Linnaeus, 1766)         39.46530
## 28      3949928.4 Paracanthurus hepatus (Linnaeus, 1766)        128.52111
## 29      3334883.6 Paracanthurus hepatus (Linnaeus, 1766)        153.62856
## 30      2972727.0 Paracanthurus hepatus (Linnaeus, 1766)        152.70794
## 31      5392116.2 Paracanthurus hepatus (Linnaeus, 1766)        179.11049
## 32      5392056.8 Paracanthurus hepatus (Linnaeus, 1766)        179.10984
## 33      2699287.4 Paracanthurus hepatus (Linnaeus, 1766)        105.66871
## 34      3408415.1 Paracanthurus hepatus (Linnaeus, 1766)        153.38925
## 35      2700022.1 Paracanthurus hepatus (Linnaeus, 1766)        105.66045
## 36      1170166.5 Paracanthurus hepatus (Linnaeus, 1766)        119.52971
## 37      3088211.5 Paracanthurus hepatus (Linnaeus, 1766)        158.20064
## 38      1248152.8 Paracanthurus hepatus (Linnaeus, 1766)        124.73795
## 39      2615622.0 Paracanthurus hepatus (Linnaeus, 1766)        120.97290
## 40      2614426.6 Paracanthurus hepatus (Linnaeus, 1766)        120.99116
## 41      1874776.8 Paracanthurus hepatus (Linnaeus, 1766)        118.63001
## 42      5994986.4 Paracanthurus hepatus (Linnaeus, 1766)       -176.46176
## 43      5990077.4 Paracanthurus hepatus (Linnaeus, 1766)       -176.62003
## 44      3334904.3 Paracanthurus hepatus (Linnaeus, 1766)        153.62923
## 45      7652686.7 Paracanthurus hepatus (Linnaeus, 1766)       -162.46472
## 46      1943191.1 Paracanthurus hepatus (Linnaeus, 1766)        145.99662
## 47      3943051.7 Paracanthurus hepatus (Linnaeus, 1766)        128.55778
## 48     10028420.7 Paracanthurus hepatus (Linnaeus, 1766)         39.37970
## 49      5478129.9 Paracanthurus hepatus (Linnaeus, 1766)        179.94055
## 50      1874607.1 Paracanthurus hepatus (Linnaeus, 1766)        118.62500
## 51     10207898.4 Paracanthurus hepatus (Linnaeus, 1766)         35.08851
## 52     10126716.7 Paracanthurus hepatus (Linnaeus, 1766)         35.40329
## 53      3408693.0 Paracanthurus hepatus (Linnaeus, 1766)        153.39147
## 54      8237332.1 Paracanthurus hepatus (Linnaeus, 1766)         55.72781
## 55      2972569.8 Paracanthurus hepatus (Linnaeus, 1766)        152.71023
## 56       852310.6 Paracanthurus hepatus (Linnaeus, 1766)        130.63281
## 57      5383009.1 Paracanthurus hepatus (Linnaeus, 1766)        178.98593
## 58      3073312.2 Paracanthurus hepatus (Linnaeus, 1766)        145.56811
## 59      3068598.8 Paracanthurus hepatus (Linnaeus, 1766)        145.53007
## 60      2879910.1 Paracanthurus hepatus (Linnaeus, 1766)        144.76383
## 61      3392606.0 Paracanthurus hepatus (Linnaeus, 1766)        145.79179
## 62      3383473.8 Paracanthurus hepatus (Linnaeus, 1766)        145.76129
## 63      3388158.9 Paracanthurus hepatus (Linnaeus, 1766)        145.75369
## 64      2979974.4 Paracanthurus hepatus (Linnaeus, 1766)        145.16840
## 65      2992665.6 Paracanthurus hepatus (Linnaeus, 1766)        145.28545
## 66      3124331.5 Paracanthurus hepatus (Linnaeus, 1766)        145.79259
## 67      3095709.1 Paracanthurus hepatus (Linnaeus, 1766)        145.65608
## 68      3082804.7 Paracanthurus hepatus (Linnaeus, 1766)        145.63037
## 69      3087659.0 Paracanthurus hepatus (Linnaeus, 1766)        145.58553
## 70      3111424.4 Paracanthurus hepatus (Linnaeus, 1766)        145.70396
## 71      3083505.0 Paracanthurus hepatus (Linnaeus, 1766)        145.64574
## 72     10322714.8 Paracanthurus hepatus (Linnaeus, 1766)         32.67988
## 73      3382858.1 Paracanthurus hepatus (Linnaeus, 1766)        145.74479
## 74      3376572.2 Paracanthurus hepatus (Linnaeus, 1766)        145.70588
## 75      3381009.8 Paracanthurus hepatus (Linnaeus, 1766)        145.72653
## 76      3104585.4 Paracanthurus hepatus (Linnaeus, 1766)        145.67886
## 77      3103930.2 Paracanthurus hepatus (Linnaeus, 1766)        145.70275
## 78      3103953.3 Paracanthurus hepatus (Linnaeus, 1766)        145.69897
## 79      3256108.1 Paracanthurus hepatus (Linnaeus, 1766)        145.77638
## 80      3959217.4 Paracanthurus hepatus (Linnaeus, 1766)        141.47400
## 81      2358248.7 Paracanthurus hepatus (Linnaeus, 1766)        150.71890
## 82      2634819.4 Paracanthurus hepatus (Linnaeus, 1766)        120.91363
## 83     10010533.1 Paracanthurus hepatus (Linnaeus, 1766)         39.38162
## 84      1874955.2 Paracanthurus hepatus (Linnaeus, 1766)        118.63332
## 85      8123679.5 Paracanthurus hepatus (Linnaeus, 1766)         55.27931
## 86      8123473.9 Paracanthurus hepatus (Linnaeus, 1766)         55.27962
## 87      8123544.2 Paracanthurus hepatus (Linnaeus, 1766)         55.27898
## 88      8131093.4 Paracanthurus hepatus (Linnaeus, 1766)         55.21433
## 89      8121989.7 Paracanthurus hepatus (Linnaeus, 1766)         55.29266
## 90      8129929.0 Paracanthurus hepatus (Linnaeus, 1766)         55.22368
## 91      8121046.1 Paracanthurus hepatus (Linnaeus, 1766)         55.30145
## 92       667591.0 Paracanthurus hepatus (Linnaeus, 1766)        130.64465
## 93       668579.0 Paracanthurus hepatus (Linnaeus, 1766)        130.62375
## 94      6606671.4 Paracanthurus hepatus (Linnaeus, 1766)       -169.49334
## 95      5392116.1 Paracanthurus hepatus (Linnaeus, 1766)        179.11049
## 96      5476426.3 Paracanthurus hepatus (Linnaeus, 1766)        179.92354
## 97      8103197.2 Paracanthurus hepatus (Linnaeus, 1766)         55.46860
## 98     10164286.7 Paracanthurus hepatus (Linnaeus, 1766)         35.45493
## 99      1957417.7 Paracanthurus hepatus (Linnaeus, 1766)        146.02884
## 100     3060729.2 Paracanthurus hepatus (Linnaeus, 1766)        152.90847
## 101     4289473.7 Paracanthurus hepatus (Linnaeus, 1766)        130.15250
## 102     1189940.4 Paracanthurus hepatus (Linnaeus, 1766)        119.35000
## 103    10161891.1 Paracanthurus hepatus (Linnaeus, 1766)         35.50786
## 104     3664199.6 Paracanthurus hepatus (Linnaeus, 1766)        124.09048
## 105     8221563.5 Paracanthurus hepatus (Linnaeus, 1766)         55.86569
## 106     5391437.2 Paracanthurus hepatus (Linnaeus, 1766)        179.10468
## 107     1165811.6 Paracanthurus hepatus (Linnaeus, 1766)        119.57251
## 108     5669989.4 Paracanthurus hepatus (Linnaeus, 1766)       -178.17400
## 109     5669989.4 Paracanthurus hepatus (Linnaeus, 1766)       -178.17400
## 110     8083688.5 Paracanthurus hepatus (Linnaeus, 1766)         55.65609
## 111     8080916.4 Paracanthurus hepatus (Linnaeus, 1766)         55.68264
## 112     8075328.0 Paracanthurus hepatus (Linnaeus, 1766)         55.73661
## 113     3841645.6 Paracanthurus hepatus (Linnaeus, 1766)        126.78845
## 114     8114344.2 Paracanthurus hepatus (Linnaeus, 1766)       -157.42781
## 115     5995074.4 Paracanthurus hepatus (Linnaeus, 1766)       -176.46102
## 116     5995542.1 Paracanthurus hepatus (Linnaeus, 1766)       -176.45731
## 117     5992111.0 Paracanthurus hepatus (Linnaeus, 1766)       -176.48886
## 118     5989841.4 Paracanthurus hepatus (Linnaeus, 1766)       -176.62678
## 119     5989816.2 Paracanthurus hepatus (Linnaeus, 1766)       -176.62671
## 120     5392176.7 Paracanthurus hepatus (Linnaeus, 1766)        179.10813
## 121     5391580.8 Paracanthurus hepatus (Linnaeus, 1766)        179.10590
## 122     5390746.3 Paracanthurus hepatus (Linnaeus, 1766)        179.09860
## 123     6594329.0 Paracanthurus hepatus (Linnaeus, 1766)       -169.61060
## 124     6603970.2 Paracanthurus hepatus (Linnaeus, 1766)       -169.51954
## 125     6492794.1 Paracanthurus hepatus (Linnaeus, 1766)       -170.54882
## 126     6492947.7 Paracanthurus hepatus (Linnaeus, 1766)       -170.54739
## 127     6478839.8 Paracanthurus hepatus (Linnaeus, 1766)       -170.67885
## 128     6493141.6 Paracanthurus hepatus (Linnaeus, 1766)       -170.54548
## 129     6497522.1 Paracanthurus hepatus (Linnaeus, 1766)       -170.50510
## 130    18464973.6 Paracanthurus hepatus (Linnaeus, 1766)        -61.77100
## 131    10164276.6 Paracanthurus hepatus (Linnaeus, 1766)         35.42359
## 132    10162494.1 Paracanthurus hepatus (Linnaeus, 1766)         35.38154
## 133     7656766.3 Paracanthurus hepatus (Linnaeus, 1766)       -162.42674
## 134    10322133.3 Paracanthurus hepatus (Linnaeus, 1766)         32.68670
## 135     3684219.0 Paracanthurus hepatus (Linnaeus, 1766)        123.79669
## 136      411237.6 Paracanthurus hepatus (Linnaeus, 1766)        132.74726
## 137    10322387.2 Paracanthurus hepatus (Linnaeus, 1766)         32.68540
## 138     2010449.8 Paracanthurus hepatus (Linnaeus, 1766)        147.10760
## 139     1162264.3 Paracanthurus hepatus (Linnaeus, 1766)        119.60195
## 140     1167208.7 Paracanthurus hepatus (Linnaeus, 1766)        119.55653
## 141      446331.7 Paracanthurus hepatus (Linnaeus, 1766)        131.65190
## 142      386820.5 Paracanthurus hepatus (Linnaeus, 1766)        131.99690
## 143     3706089.9 Paracanthurus hepatus (Linnaeus, 1766)        122.96361
## 144     9263759.6 Paracanthurus hepatus (Linnaeus, 1766)         45.27593
## 145    16298878.9 Paracanthurus hepatus (Linnaeus, 1766)        -81.18580
## 146    10028948.0 Paracanthurus hepatus (Linnaeus, 1766)         39.37488
## 147     8129138.1 Paracanthurus hepatus (Linnaeus, 1766)         55.23410
## 148     8129146.0 Paracanthurus hepatus (Linnaeus, 1766)         55.23405
## 149     1747188.4 Paracanthurus hepatus (Linnaeus, 1766)        134.21884
## 150     1763009.1 Paracanthurus hepatus (Linnaeus, 1766)        134.22094
## 151    10322306.7 Paracanthurus hepatus (Linnaeus, 1766)         32.68732
## 152    10322387.7 Paracanthurus hepatus (Linnaeus, 1766)         32.68600
## 153     5589075.2 Paracanthurus hepatus (Linnaeus, 1766)       -179.05644
## 154     8130477.1 Paracanthurus hepatus (Linnaeus, 1766)         55.21915
## 155     3071217.9 Paracanthurus hepatus (Linnaeus, 1766)        145.56591
## 156     3391819.9 Paracanthurus hepatus (Linnaeus, 1766)        145.81155
## 157     2994082.7 Paracanthurus hepatus (Linnaeus, 1766)        145.26090
## 158     3123420.4 Paracanthurus hepatus (Linnaeus, 1766)        145.78511
## 159     3125304.6 Paracanthurus hepatus (Linnaeus, 1766)        145.82889
## 160     3126626.4 Paracanthurus hepatus (Linnaeus, 1766)        145.82971
## 161     3126182.0 Paracanthurus hepatus (Linnaeus, 1766)        145.83191
## 162     3124023.8 Paracanthurus hepatus (Linnaeus, 1766)        145.81463
## 163     3125688.1 Paracanthurus hepatus (Linnaeus, 1766)        145.80272
## 164     3124467.3 Paracanthurus hepatus (Linnaeus, 1766)        145.79354
## 165     3104020.4 Paracanthurus hepatus (Linnaeus, 1766)        145.69629
## 166     3084776.5 Paracanthurus hepatus (Linnaeus, 1766)        145.65172
## 167     3126613.6 Paracanthurus hepatus (Linnaeus, 1766)        145.82731
## 168     3125413.1 Paracanthurus hepatus (Linnaeus, 1766)        145.80069
## 169     3092375.9 Paracanthurus hepatus (Linnaeus, 1766)        145.67423
## 170     8221722.0 Paracanthurus hepatus (Linnaeus, 1766)         55.86796
## 171     1150392.0 Paracanthurus hepatus (Linnaeus, 1766)        119.71143
## 172     3339621.5 Paracanthurus hepatus (Linnaeus, 1766)        145.81372
## 173    16270227.5 Paracanthurus hepatus (Linnaeus, 1766)        -80.00000
## 174    16183439.7 Paracanthurus hepatus (Linnaeus, 1766)        -81.85830
## 175     2863310.6 Paracanthurus hepatus (Linnaeus, 1766)        151.98242
## 176     2935487.7 Paracanthurus hepatus (Linnaeus, 1766)        152.43017
## 177     1553313.7 Paracanthurus hepatus (Linnaeus, 1766)        116.05110
## 178     1603729.2 Paracanthurus hepatus (Linnaeus, 1766)        115.59450
## 179     2867764.2 Paracanthurus hepatus (Linnaeus, 1766)        144.64386
## 180     3065575.6 Paracanthurus hepatus (Linnaeus, 1766)        157.99209
## 181     2973043.7 Paracanthurus hepatus (Linnaeus, 1766)        152.71402
## 182     2614777.7 Paracanthurus hepatus (Linnaeus, 1766)        120.99300
## 183     1820001.2 Paracanthurus hepatus (Linnaeus, 1766)        145.58833
## 184     8065897.6 Paracanthurus hepatus (Linnaeus, 1766)         55.83662
## 185     3821437.5 Paracanthurus hepatus (Linnaeus, 1766)        159.05390
## 186     1810932.9 Paracanthurus hepatus (Linnaeus, 1766)        145.43811
## 187    10322051.2 Paracanthurus hepatus (Linnaeus, 1766)         32.68800
## 188    10322760.9 Paracanthurus hepatus (Linnaeus, 1766)         32.67879
## 189    10322051.2 Paracanthurus hepatus (Linnaeus, 1766)         32.68800
## 190     6500544.5 Paracanthurus hepatus (Linnaeus, 1766)         71.25228
## 191     3408638.8 Paracanthurus hepatus (Linnaeus, 1766)        153.38980
## 192     3418965.9 Paracanthurus hepatus (Linnaeus, 1766)        153.26580
## 193     6477666.2 Paracanthurus hepatus (Linnaeus, 1766)         73.45000
## 194    17605480.3 Paracanthurus hepatus (Linnaeus, 1766)        -69.69920
## 195     3178085.7 Paracanthurus hepatus (Linnaeus, 1766)        155.56720
## 196     2920146.6 Paracanthurus hepatus (Linnaeus, 1766)        153.52120
## 197     2923974.5 Paracanthurus hepatus (Linnaeus, 1766)        153.53760
## 198     3100980.9 Paracanthurus hepatus (Linnaeus, 1766)        155.76360
## 199     2954299.8 Paracanthurus hepatus (Linnaeus, 1766)        154.34530
## 200     2250704.5 Paracanthurus hepatus (Linnaeus, 1766)        148.50350
## 201     2355923.9 Paracanthurus hepatus (Linnaeus, 1766)        149.99040
## 202     1161891.5 Paracanthurus hepatus (Linnaeus, 1766)        119.60596
## 203      896096.0 Paracanthurus hepatus (Linnaeus, 1766)        123.00390
## 204    11021858.4 Paracanthurus hepatus (Linnaeus, 1766)         34.18600
## 205    16446763.4 Paracanthurus hepatus (Linnaeus, 1766)        -81.10510
## 206     8095062.3 Paracanthurus hepatus (Linnaeus, 1766)         55.54613
## 207     8095127.3 Paracanthurus hepatus (Linnaeus, 1766)         55.54547
## 208     8096720.1 Paracanthurus hepatus (Linnaeus, 1766)         55.53040
## 209    15965397.9 Paracanthurus hepatus (Linnaeus, 1766)        -86.40000
## 210     5391043.5 Paracanthurus hepatus (Linnaeus, 1766)        179.09921
## 211     5393861.9 Paracanthurus hepatus (Linnaeus, 1766)        179.12516
## 212     5992421.7 Paracanthurus hepatus (Linnaeus, 1766)       -176.48664
## 213     5992426.5 Paracanthurus hepatus (Linnaeus, 1766)       -176.48669
## 214     5992100.3 Paracanthurus hepatus (Linnaeus, 1766)       -176.48881
## 215      513301.9 Paracanthurus hepatus (Linnaeus, 1766)        125.50000
## 216    10317750.1 Paracanthurus hepatus (Linnaeus, 1766)         32.88350
## 217    10013443.6 Paracanthurus hepatus (Linnaeus, 1766)         39.23600
## 218     1603784.9 Paracanthurus hepatus (Linnaeus, 1766)        115.59400
## 219    16474853.7 Paracanthurus hepatus (Linnaeus, 1766)        -77.93170
## 220     1819141.6 Paracanthurus hepatus (Linnaeus, 1766)        145.58198
## 221     6535575.7 Paracanthurus hepatus (Linnaeus, 1766)         72.43150
## 222    15663837.8 Paracanthurus hepatus (Linnaeus, 1766)        -76.60830
## 223    10322668.7 Paracanthurus hepatus (Linnaeus, 1766)         32.68090
## 224    10322505.2 Paracanthurus hepatus (Linnaeus, 1766)         32.68440
## 225     3668070.1 Paracanthurus hepatus (Linnaeus, 1766)         96.87765
## 226     2973331.3 Paracanthurus hepatus (Linnaeus, 1766)        152.71830
## 227     3515212.7 Paracanthurus hepatus (Linnaeus, 1766)        145.40914
## 228     3376495.1 Paracanthurus hepatus (Linnaeus, 1766)        145.70552
## 229     3103839.5 Paracanthurus hepatus (Linnaeus, 1766)        145.70190
## 230     3254840.6 Paracanthurus hepatus (Linnaeus, 1766)        145.76719
## 231     3104466.3 Paracanthurus hepatus (Linnaeus, 1766)        145.72023
## 232     3105029.6 Paracanthurus hepatus (Linnaeus, 1766)        145.75022
## 233     3084397.2 Paracanthurus hepatus (Linnaeus, 1766)        145.61942
## 234     3118401.3 Paracanthurus hepatus (Linnaeus, 1766)        145.72341
## 235     3083140.8 Paracanthurus hepatus (Linnaeus, 1766)        145.63004
## 236    15820523.9 Paracanthurus hepatus (Linnaeus, 1766)        -86.88900
## 237     3074017.9 Paracanthurus hepatus (Linnaeus, 1766)        145.58005
## 238     3071728.2 Paracanthurus hepatus (Linnaeus, 1766)        145.56905
## 239     3098191.1 Paracanthurus hepatus (Linnaeus, 1766)        145.65842
## 240     3097305.8 Paracanthurus hepatus (Linnaeus, 1766)        145.65610
## 241     3098969.0 Paracanthurus hepatus (Linnaeus, 1766)        145.65793
## 242     3092446.8 Paracanthurus hepatus (Linnaeus, 1766)        145.59721
## 243     3407993.5 Paracanthurus hepatus (Linnaeus, 1766)        153.38810
## 244     3405958.7 Paracanthurus hepatus (Linnaeus, 1766)        153.26920
## 245    15947330.3 Paracanthurus hepatus (Linnaeus, 1766)        -86.57990
## 246     2918954.3 Paracanthurus hepatus (Linnaeus, 1766)        152.30293
## 247     2928819.6 Paracanthurus hepatus (Linnaeus, 1766)        152.38175
## 248     2914186.5 Paracanthurus hepatus (Linnaeus, 1766)        152.28250
## 249     8066632.9 Paracanthurus hepatus (Linnaeus, 1766)         55.83000
## 250     8067502.1 Paracanthurus hepatus (Linnaeus, 1766)         55.82176
## 251    10121484.1 Paracanthurus hepatus (Linnaeus, 1766)         36.32800
## 252     5993435.7 Paracanthurus hepatus (Linnaeus, 1766)       -176.47949
## 253     5995591.6 Paracanthurus hepatus (Linnaeus, 1766)       -176.45685
## 254     5995637.8 Paracanthurus hepatus (Linnaeus, 1766)       -176.45694
## 255     1811022.0 Paracanthurus hepatus (Linnaeus, 1766)        145.45050
## 256     1811020.8 Paracanthurus hepatus (Linnaeus, 1766)        145.45050
## 257     3334830.7 Paracanthurus hepatus (Linnaeus, 1766)        153.62830
## 258     3246702.5 Paracanthurus hepatus (Linnaeus, 1766)        153.52520
## 259     3334831.5 Paracanthurus hepatus (Linnaeus, 1766)        153.62831
## 260     3246702.3 Paracanthurus hepatus (Linnaeus, 1766)        153.52519
## 261    16563712.9 Paracanthurus hepatus (Linnaeus, 1766)        -77.39630
## 262     2699390.8 Paracanthurus hepatus (Linnaeus, 1766)        105.66810
## 263     2699633.8 Paracanthurus hepatus (Linnaeus, 1766)        105.66580
## 264     1764059.4 Paracanthurus hepatus (Linnaeus, 1766)        118.24362
## 265     8221657.1 Paracanthurus hepatus (Linnaeus, 1766)         55.86585
## 266    17771897.5 Paracanthurus hepatus (Linnaeus, 1766)        -70.05770
## 267    15818891.2 Paracanthurus hepatus (Linnaeus, 1766)        -87.01840
## 268     4176292.2 Paracanthurus hepatus (Linnaeus, 1766)         95.26880
## 269     3408644.6 Paracanthurus hepatus (Linnaeus, 1766)        153.38984
## 270     3419297.9 Paracanthurus hepatus (Linnaeus, 1766)        153.26605
## 271     3124128.5 Paracanthurus hepatus (Linnaeus, 1766)        145.79122
## 272     3119965.9 Paracanthurus hepatus (Linnaeus, 1766)        145.75177
## 273     3126195.9 Paracanthurus hepatus (Linnaeus, 1766)        145.83218
## 274     3087122.3 Paracanthurus hepatus (Linnaeus, 1766)        145.58672
## 275     3124128.5 Paracanthurus hepatus (Linnaeus, 1766)        145.79122
## 276     4178080.4 Paracanthurus hepatus (Linnaeus, 1766)         95.25900
## 277     4177685.9 Paracanthurus hepatus (Linnaeus, 1766)         95.25970
## 278     3446911.5 Paracanthurus hepatus (Linnaeus, 1766)        145.67677
## 279     3341171.0 Paracanthurus hepatus (Linnaeus, 1766)        145.81530
## 280     3409038.3 Paracanthurus hepatus (Linnaeus, 1766)        153.39260
## 281     3406905.4 Paracanthurus hepatus (Linnaeus, 1766)        153.38340
## 282     3419069.0 Paracanthurus hepatus (Linnaeus, 1766)        153.26760
## 283     3406909.8 Paracanthurus hepatus (Linnaeus, 1766)        153.38342
## 284     3409034.2 Paracanthurus hepatus (Linnaeus, 1766)        153.39256
## 285     1603717.2 Paracanthurus hepatus (Linnaeus, 1766)        115.59460
## 286    15940872.7 Paracanthurus hepatus (Linnaeus, 1766)        -86.64170
## 287     5992511.0 Paracanthurus hepatus (Linnaeus, 1766)       -176.48620
## 288    10128945.1 Paracanthurus hepatus (Linnaeus, 1766)         35.55833
## 289    10129849.7 Paracanthurus hepatus (Linnaeus, 1766)         35.55000
## 290     8967775.3 Paracanthurus hepatus (Linnaeus, 1766)         47.95000
## 291     3418966.7 Paracanthurus hepatus (Linnaeus, 1766)        153.26640
## 292     3419267.5 Paracanthurus hepatus (Linnaeus, 1766)        153.26530
## 293     3419036.6 Paracanthurus hepatus (Linnaeus, 1766)        153.26480
## 294     3407995.6 Paracanthurus hepatus (Linnaeus, 1766)        153.38809
## 295     3419090.6 Paracanthurus hepatus (Linnaeus, 1766)        153.26482
## 296     3418960.9 Paracanthurus hepatus (Linnaeus, 1766)        153.26635
## 297     3419266.0 Paracanthurus hepatus (Linnaeus, 1766)        153.26527
## 298     4034519.2 Paracanthurus hepatus (Linnaeus, 1766)        165.41826
## 299     1811038.1 Paracanthurus hepatus (Linnaeus, 1766)        145.45101
## 300     1799241.8 Paracanthurus hepatus (Linnaeus, 1766)        134.61270
## 301     3115027.7 Paracanthurus hepatus (Linnaeus, 1766)        145.78762
## 302     3339401.7 Paracanthurus hepatus (Linnaeus, 1766)        145.81808
## 303     8130379.9 Paracanthurus hepatus (Linnaeus, 1766)         55.22000
## 304     2709608.9 Paracanthurus hepatus (Linnaeus, 1766)        105.57552
## 305     8103601.2 Paracanthurus hepatus (Linnaeus, 1766)         55.46472
## 306     5992089.8 Paracanthurus hepatus (Linnaeus, 1766)       -176.48893
## 307     2710321.8 Paracanthurus hepatus (Linnaeus, 1766)        120.47900
## 308     2710682.9 Paracanthurus hepatus (Linnaeus, 1766)        120.48000
## 309    10321722.3 Paracanthurus hepatus (Linnaeus, 1766)         32.70000
## 310     5840579.9 Paracanthurus hepatus (Linnaeus, 1766)         79.80800
## 311     5840459.6 Paracanthurus hepatus (Linnaeus, 1766)         79.81000
##     decimalLatitude
## 1        -33.800169
## 2        -30.202839
## 3        -27.400000
## 4        -28.611278
## 5         -4.656524
## 6        -17.636875
## 7         25.015492
## 8          2.728201
## 9         -6.353158
## 10        22.319095
## 11        28.169633
## 12       -14.663600
## 13         4.595825
## 14       -18.287067
## 15       -13.647350
## 16        -8.349668
## 17        22.680278
## 18       -28.196141
## 19        26.189035
## 20        -2.244373
## 21        -8.727807
## 22        -2.204717
## 23       -30.204320
## 24       -24.113638
## 25        15.022028
## 26        -5.816751
## 27        -5.840112
## 28        27.388889
## 29       -28.611482
## 30       -24.116345
## 31       -17.076469
## 32       -17.077753
## 33       -10.423094
## 34       -29.927833
## 35       -10.393100
## 36        -8.481814
## 37        -8.612647
## 38         1.615687
## 39        13.522638
## 40        13.518570
## 41         4.116129
## 42         0.186880
## 43         0.798243
## 44       -28.611023
## 45         6.384268
## 46       -16.428461
## 47        27.328333
## 48        -4.714799
## 49       -16.767523
## 50         4.109330
## 51       -21.151370
## 52       -23.817600
## 53       -29.929429
## 54        -4.279653
## 55       -24.110377
## 56        -0.584608
## 57       -17.575953
## 58        14.865178
## 59        14.838945
## 60        13.282353
## 61        18.169705
## 62        18.090721
## 63        18.144987
## 64        14.108882
## 65        14.169204
## 66        15.274841
## 67        15.052066
## 68        14.927633
## 69        15.010917
## 70        15.192456
## 71        14.924998
## 72       -27.535837
## 73        18.093946
## 74        18.050178
## 75        18.085108
## 76        15.134210
## 77        15.111052
## 78        15.113834
## 79        16.718400
## 80        25.752000
## 81        -2.757490
## 82        13.686601
## 83        -5.820478
## 84         4.121438
## 85       -21.170370
## 86       -21.205960
## 87       -21.205150
## 88       -21.035070
## 89       -21.233100
## 90       -21.073840
## 91       -21.239710
## 92        -2.260250
## 93        -2.249608
## 94       -14.273857
## 95       -17.076470
## 96       -16.783458
## 97       -21.349500
## 98       -21.484390
## 99       -16.657679
## 100      -25.288066
## 101       30.487778
## 102       -8.400000
## 103      -21.319020
## 104       24.306446
## 105       -4.321165
## 106      -17.068420
## 107       -8.689442
## 108      -14.235900
## 109      -14.235900
## 110      -21.366690
## 111      -21.371320
## 112      -21.370350
## 113       26.291180
## 114        1.872135
## 115        0.187242
## 116        0.190310
## 117        0.191557
## 118        0.822466
## 119        0.820899
## 120      -17.116486
## 121      -17.070283
## 122      -17.062497
## 123      -14.151863
## 124      -14.224068
## 125      -14.278573
## 126      -14.279030
## 127      -14.241373
## 128      -14.285210
## 129      -14.273254
## 130       16.135100
## 131      -21.660010
## 132      -21.991250
## 133        6.382461
## 134      -27.532000
## 135       24.436835
## 136       -5.611260
## 137      -27.525900
## 138      -15.484300
## 139       -8.537167
## 140       -8.475600
## 141       -4.530000
## 142       -5.304400
## 143       24.472500
## 144      -12.872840
## 145       23.212100
## 146       -4.714922
## 147      -21.015540
## 148      -21.015000
## 149        6.986900
## 150        7.134422
## 151      -27.520850
## 152      -27.523100
## 153      -17.408093
## 154      -21.058230
## 155       14.843660
## 156       18.149654
## 157       14.201462
## 158       15.269845
## 159       15.261225
## 160       15.275189
## 161       15.268836
## 162       15.256714
## 163       15.282955
## 164       15.275694
## 165       15.116363
## 166       14.934944
## 167       15.276654
## 168       15.281291
## 169       15.003307
## 170       -4.292379
## 171       -8.636633
## 172       17.591924
## 173       26.237900
## 174       24.455000
## 175      -23.322967
## 176      -23.890883
## 177       -8.349183
## 178       -8.277300
## 179       13.230371
## 180       -8.505400
## 181      -24.112880
## 182       13.522800
## 183      -14.529133
## 184      -21.160690
## 185      -29.447500
## 186      -14.681537
## 187      -27.529900
## 188      -27.538681
## 189      -27.529900
## 190       -6.456933
## 191      -29.930400
## 192      -30.202300
## 193        5.550000
## 194       18.437700
## 195      -23.247900
## 196      -21.851700
## 197      -21.897300
## 198      -21.248000
## 199      -20.976700
## 200      -17.827500
## 201      -16.931600
## 202       -8.583764
## 203      -12.217000
## 204       27.510000
## 205       19.292300
## 206      -21.371260
## 207      -21.372000
## 208      -21.365210
## 209       16.383300
## 210      -17.092612
## 211      -17.100688
## 212        0.194956
## 213        0.195480
## 214        0.190741
## 215       -8.556720
## 216      -26.822600
## 217       -6.634620
## 218       -8.277000
## 219       25.821500
## 220      -14.523517
## 221        3.352720
## 222       39.284700
## 223      -27.533300
## 224      -27.524900
## 225      -12.085451
## 226      -24.111530
## 227       19.675859
## 228       18.049572
## 229       15.110629
## 230       16.710502
## 231       15.105225
## 232       15.091283
## 233       14.952465
## 234       15.255971
## 235       14.931544
## 236       20.748400
## 237       14.864917
## 238       14.847157
## 239       15.077733
## 240       15.069572
## 241       15.086594
## 242       15.055609
## 243      -29.923100
## 244      -30.017600
## 245       16.324900
## 246      -23.796683
## 247      -23.848667
## 248      -23.745917
## 249      -21.150000
## 250      -21.146900
## 251      -18.846000
## 252        0.206550
## 253        0.190290
## 254        0.193110
## 255      -14.652800
## 256      -14.652770
## 257      -28.611000
## 258      -27.413500
## 259      -28.611000
## 260      -27.413510
## 261       25.034300
## 262      -10.429600
## 263      -10.428100
## 264        2.285408
## 265       -4.313293
## 266       12.601900
## 267       20.307600
## 268        5.864600
## 269      -29.930440
## 270      -30.206662
## 271       15.273530
## 272       15.254217
## 273       15.268808
## 274       15.004243
## 275       15.273530
## 276        5.883700
## 277        5.875800
## 278       18.811222
## 279       17.607530
## 280      -29.933100
## 281      -29.912700
## 282      -30.201900
## 283      -29.912740
## 284      -29.933083
## 285       -8.277800
## 286       16.320100
## 287        0.197000
## 288      -22.843333
## 289      -22.840000
## 290      -13.500000
## 291      -30.201700
## 292      -30.207000
## 293      -30.204300
## 294      -29.923140
## 295      -30.205030
## 296      -30.201670
## 297      -30.207010
## 298      -20.843860
## 299      -14.651927
## 300        7.366017
## 301       15.176020
## 302       17.586930
## 303      -21.059999
## 304      -10.446286
## 305      -21.349080
## 306        0.190850
## 307       14.246000
## 308       14.250000
## 309      -27.490000
## 310        7.117000
## 311        7.120000
##                                                                                                                                                                                                                                 datasetName
## 1                                                                                                                                                                                                   iNaturalist research-grade observations
## 2                                                                                                                                                                                                   iNaturalist research-grade observations
## 3                                                                                                                                                                                                   iNaturalist research-grade observations
## 4                                                                                                                                                                                                   iNaturalist research-grade observations
## 5                                                                                                                                                                                                   iNaturalist research-grade observations
## 6                                                                                                                                                                                                   iNaturalist research-grade observations
## 7                                                                                                                                                                                                   iNaturalist research-grade observations
## 8                                                                                                                                                                                                   iNaturalist research-grade observations
## 9                                                                                                                                                                                                   iNaturalist research-grade observations
## 10                                                                                                                                                                                                  iNaturalist research-grade observations
## 11                                                                                                                                                                                                  iNaturalist research-grade observations
## 12                                                                                                                                                                                                  iNaturalist research-grade observations
## 13                                                                                                                                                                                                  iNaturalist research-grade observations
## 14                                                                                                                                                                                                  iNaturalist research-grade observations
## 15                                                                                                                                                                                                                                     &lt;NA&gt;
## 16                                                                                                                                                                                                  iNaturalist research-grade observations
## 17                                                                                                                                                                                                  iNaturalist research-grade observations
## 18                                                                                                                                                                                                  iNaturalist research-grade observations
## 19                                                                                                                                                                                                  iNaturalist research-grade observations
## 20                                                                                                                                                                                                  iNaturalist research-grade observations
## 21                                                                                                                                                                                                  iNaturalist research-grade observations
## 22                                                                                                                                                                                                  iNaturalist research-grade observations
## 23                                                                                                                                                                                                  iNaturalist research-grade observations
## 24                                                                                                                                                                                                  iNaturalist research-grade observations
## 25                                                                                                                                                                                                  iNaturalist research-grade observations
## 26                                                                                                                                                                                                  iNaturalist research-grade observations
## 27                                                                                                                                                                                                  iNaturalist research-grade observations
## 28                                                                                                                                                                                                                                     &lt;NA&gt;
## 29                                                                                                                                                                                                  iNaturalist research-grade observations
## 30                                                                                                                                                                                                  iNaturalist research-grade observations
## 31                                                                                                                                                                                                  iNaturalist research-grade observations
## 32                                                                                                                                                                                                  iNaturalist research-grade observations
## 33                                                                                                                                                                                                  iNaturalist research-grade observations
## 34                                                                                                                                                                                                  iNaturalist research-grade observations
## 35                                                                                                                                                                                                  iNaturalist research-grade observations
## 36                                                                                                                                                                                                  iNaturalist research-grade observations
## 37                                                                                                                                                                                                  iNaturalist research-grade observations
## 38                                                                                                                                                                                                  iNaturalist research-grade observations
## 39                                                                                                                                                                                                  iNaturalist research-grade observations
## 40                                                                                                                                                                                                  iNaturalist research-grade observations
## 41                                                                                                                                                                                                  iNaturalist research-grade observations
## 42                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 43                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 44                                                                                                                                                                                                  iNaturalist research-grade observations
## 45                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 46                                                                                                                                                                                                  iNaturalist research-grade observations
## 47                                                                                                                                                                                                                                     &lt;NA&gt;
## 48                                                                                                                                                                                                  iNaturalist research-grade observations
## 49                                                                                                                                                                                                  iNaturalist research-grade observations
## 50                                                                                                                                                                                                 Diveboard - Scuba diving citizen science
## 51                                                                                                                                                                                             Instituto Nacional de Investigação Pesqueira
## 52                                                                                                                                                                                             Instituto Nacional de Investigação Pesqueira
## 53                                                                                                                                                                                                  iNaturalist research-grade observations
## 54                                                                                                                                                                                                                                     &lt;NA&gt;
## 55                                                                                                                                                                                                  iNaturalist research-grade observations
## 56                                                                                                                                                                                                  iNaturalist research-grade observations
## 57                                                                                                                                                                                                  iNaturalist research-grade observations
## 58                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 59                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 60                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 61                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 62                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 63                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 64                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 65                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 66                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 67                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 68                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 69                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 70                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 71                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 72                                                                                                                                                                                                  iNaturalist research-grade observations
## 73                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 74                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 75                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 76                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 77                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 78                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 79                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 80                                                                                                                                                                                                                                     &lt;NA&gt;
## 81                                                                                                                                                                                                  iNaturalist research-grade observations
## 82                                                                                                                                                                                                  iNaturalist research-grade observations
## 83                                                                                                                                                                                                  iNaturalist research-grade observations
## 84                                                                                                                                                                                                  iNaturalist research-grade observations
## 85                                                                                                                                                                                                                                     &lt;NA&gt;
## 86                                                                                                                                                                                                                                     &lt;NA&gt;
## 87                                                                                                                                                                                                                                     &lt;NA&gt;
## 88                                                                                                                                                                                                                                     &lt;NA&gt;
## 89                                                                                                                                                                                                                                     &lt;NA&gt;
## 90                                                                                                                                                                                                                                     &lt;NA&gt;
## 91                                                                                                                                                                                                                                     &lt;NA&gt;
## 92                                                                                                                                                                                                  iNaturalist research-grade observations
## 93                                                                                                                                                                                                  iNaturalist research-grade observations
## 94                                            NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 95                                                                                                                                                                                                  iNaturalist research-grade observations
## 96                                                                                                                                                                                                  iNaturalist research-grade observations
## 97                                                                                                                                                                                                                                     &lt;NA&gt;
## 98                                                                                                                                                                                             Instituto Nacional de Investigação Pesqueira
## 99                                                                                                                                                                                                  iNaturalist research-grade observations
## 100                                                                                                                                                                                                                                    &lt;NA&gt;
## 101                                                                                                                                                                                                                                    &lt;NA&gt;
## 102                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 103                                                                                                                                                                                            Instituto Nacional de Investigação Pesqueira
## 104                                                                                                                                                                                                 iNaturalist research-grade observations
## 105                                                                                                                                                                                                 iNaturalist research-grade observations
## 106                                                                                                                                                                                                 iNaturalist research-grade observations
## 107                                                                                                                                                                                                 iNaturalist research-grade observations
## 108                                                                                                                                                                                                                     NMNH Extant Biology
## 109                                                                                                                                                                                                            NMNH Material Samples (USNM)
## 110                                                                                                                                                                                                                                    &lt;NA&gt;
## 111                                                                                                                                                                                                                                    &lt;NA&gt;
## 112                                                                                                                                                                                                                                    &lt;NA&gt;
## 113                                                                                                                                                                                                 iNaturalist research-grade observations
## 114                                                                                                                                                                                                 iNaturalist research-grade observations
## 115                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 116                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 117                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 118                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 119                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 120                                                                                                                                                                                                 iNaturalist research-grade observations
## 121                                                                                                                                                                                                 iNaturalist research-grade observations
## 122                                                                                                                                                                                                 iNaturalist research-grade observations
## 123                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 124                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 125                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 126                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 127                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 128                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 129                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 130                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 131                                                                                                                                                                                            Instituto Nacional de Investigação Pesqueira
## 132                                                                                                                                                                                            Instituto Nacional de Investigação Pesqueira
## 133                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 134                                                                                                                                                                                                                                    &lt;NA&gt;
## 135                                                                                                                                                                                                 iNaturalist research-grade observations
## 136                                                                                                                                                                                                 iNaturalist research-grade observations
## 137                                                                                                                                                                                                                                    &lt;NA&gt;
## 138                                                                                                                                                                                                                                    &lt;NA&gt;
## 139                                                                                                                                                                                                 iNaturalist research-grade observations
## 140                                                                                                                                                                                                 iNaturalist research-grade observations
## 141                                                                                                                                                                                                                                    &lt;NA&gt;
## 142                                                                                                                                                                                                                                    &lt;NA&gt;
## 143                                                                                                                                                                                                                                    &lt;NA&gt;
## 144                                                                                                                                                                                                                                    &lt;NA&gt;
## 145                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 146                                                                                                                                                                                                 iNaturalist research-grade observations
## 147                                                                                                                                                                                                                                    &lt;NA&gt;
## 148                                                                                                                                                                                                                                    &lt;NA&gt;
## 149                                                                                                                                                                                                 iNaturalist research-grade observations
## 150                                                                                                                                                                                                 iNaturalist research-grade observations
## 151                                                                                                                                                                                                                                    &lt;NA&gt;
## 152                                                                                                                                                                                                                                    &lt;NA&gt;
## 153                                                                                                                                                                                                 iNaturalist research-grade observations
## 154                                                                                                                                                                                                                                    &lt;NA&gt;
## 155                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 156                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 157                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 158                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 159                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 160                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 161                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 162                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 163                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 164                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 165                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 166                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 167                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 168                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 169                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 170                                                                                                                                                                                                 iNaturalist research-grade observations
## 171                                                                                                                                                                                                 iNaturalist research-grade observations
## 172                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 173                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 174                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 175                                                                                                                                                                                                                                    &lt;NA&gt;
## 176                                                                                                                                                                                                                                    &lt;NA&gt;
## 177                                                                                                                                                                                                 iNaturalist research-grade observations
## 178                                                                                                                                                                                                                                    &lt;NA&gt;
## 179                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 180                                                                                                                                                                                                 iNaturalist research-grade observations
## 181                                                                                                                                                                                                 iNaturalist research-grade observations
## 182                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 183                                                                                                                                                                                                                                    &lt;NA&gt;
## 184                                                                                                                                                                                                                                    &lt;NA&gt;
## 185                                                                                                                                                                                                                                    &lt;NA&gt;
## 186                                                                                                                                                                                                                                    &lt;NA&gt;
## 187                                                                                                                                                                                                 iNaturalist research-grade observations
## 188                                                                                                                                                                                                 iNaturalist research-grade observations
## 189                                                                                                                                                                                                                                    &lt;NA&gt;
## 190                                                                                                                                                                                                                                    &lt;NA&gt;
## 191                                                                                                                                                                                                                                    &lt;NA&gt;
## 192                                                                                                                                                                                                                                    &lt;NA&gt;
## 193                                                                                                                                                                                                 iNaturalist research-grade observations
## 194                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 195                                                                                                                                                                                                                                    &lt;NA&gt;
## 196                                                                                                                                                                                                                                    &lt;NA&gt;
## 197                                                                                                                                                                                                                                    &lt;NA&gt;
## 198                                                                                                                                                                                                                                    &lt;NA&gt;
## 199                                                                                                                                                                                                                                    &lt;NA&gt;
## 200                                                                                                                                                                                                                                    &lt;NA&gt;
## 201                                                                                                                                                                                                                                    &lt;NA&gt;
## 202                                                                                                                                                                                                 iNaturalist research-grade observations
## 203                                                                                                                                                                                                                                    &lt;NA&gt;
## 204                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 205                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 206                                                                                                                                                                                                                                    &lt;NA&gt;
## 207                                                                                                                                                                                                                                    &lt;NA&gt;
## 208                                                                                                                                                                                                                                    &lt;NA&gt;
## 209                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 210                                                                                                                                                                                                 iNaturalist research-grade observations
## 211                                                                                                                                                                                                 iNaturalist research-grade observations
## 212                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 213                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 214                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 215                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 216                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 217                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 218                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 219                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 220                                                                                                                                                                                                                                    &lt;NA&gt;
## 221                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 222                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 223                                                                                                                                                                                                                                    &lt;NA&gt;
## 224                                                                                                                                                                                                                                    &lt;NA&gt;
## 225                                                                                                                                                                                                 iNaturalist research-grade observations
## 226                                                                                                                                                                                                 iNaturalist research-grade observations
## 227                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 228                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 229                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 230                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 231                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 232                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 233                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 234                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 235                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 236                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 237                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 238                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 239                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 240                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 241                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 242                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 243                                                                                                                                                                                                                                    &lt;NA&gt;
## 244                                                                                                                                                                                                                                    &lt;NA&gt;
## 245                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 246                                                                                                                                                                                                                                    &lt;NA&gt;
## 247                                                                                                                                                                                                                                    &lt;NA&gt;
## 248                                                                                                                                                                                                                                    &lt;NA&gt;
## 249                                                                                                                                                                                                                                    &lt;NA&gt;
## 250                                                                                                                                                                                                                                    &lt;NA&gt;
## 251                                                                                                                                                                                            Instituto Nacional de Investigação Pesqueira
## 252                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 253                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 254                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 255                                                                                                                                                                                                                                    &lt;NA&gt;
## 256                                                                                                                                                                                                                                    &lt;NA&gt;
## 257                                                                                                                                                                                                                                    &lt;NA&gt;
## 258                                                                                                                                                                                                                                    &lt;NA&gt;
## 259                                                                                                                                                                                                                                    &lt;NA&gt;
## 260                                                                                                                                                                                                                                    &lt;NA&gt;
## 261                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 262                                                                                                                                                                                                                                    &lt;NA&gt;
## 263                                                                                                                                                                                                                                    &lt;NA&gt;
## 264                                                                                                                                                                                                 iNaturalist research-grade observations
## 265                                                                                                                                                                                                 iNaturalist research-grade observations
## 266                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 267                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 268                                                                                                                                                                                                                                    &lt;NA&gt;
## 269                                                                                                                                                                                                                                    &lt;NA&gt;
## 270                                                                                                                                                                                                 iNaturalist research-grade observations
## 271                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 272                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 273                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 274                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 275 NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009
## 276                                                                                                                                                                                                                                    &lt;NA&gt;
## 277                                                                                                                                                                                                                                    &lt;NA&gt;
## 278                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 279                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 280                                                                                                                                                                                                                                    &lt;NA&gt;
## 281                                                                                                                                                                                                                                    &lt;NA&gt;
## 282                                                                                                                                                                                                                                    &lt;NA&gt;
## 283                                                                                                                                                                                                                                    &lt;NA&gt;
## 284                                                                                                                                                                                                                                    &lt;NA&gt;
## 285                                                                                                                                                                                                                                    &lt;NA&gt;
## 286                                                                                                                                                                                                Diveboard - Scuba diving citizen science
## 287                                           NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 288                                                                                                                                                                                                                                    &lt;NA&gt;
## 289                                                                                                                                                                                                                                    &lt;NA&gt;
## 290                                                                                                                                                                                                                                    &lt;NA&gt;
## 291                                                                                                                                                                                                                                    &lt;NA&gt;
## 292                                                                                                                                                                                                                                    &lt;NA&gt;
## 293                                                                                                                                                                                                                                    &lt;NA&gt;
## 294                                                                                                                                                                                                                                    &lt;NA&gt;
## 295                                                                                                                                                                                                                                    &lt;NA&gt;
## 296                                                                                                                                                                                                                                    &lt;NA&gt;
## 297                                                                                                                                                                                                                                    &lt;NA&gt;
## 298                                                                                                                                                                                                 iNaturalist research-grade observations
## 299                                                                                                                                                                                                                                    &lt;NA&gt;
## 300                                                                                                                                                                                                                                    &lt;NA&gt;
## 301 NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009
## 302 NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009
## 303                                                                                                                                                                                                                                    &lt;NA&gt;
## 304                                                                                                                                                                                                 iNaturalist research-grade observations
## 305                                                                                                                                                                                                                                    &lt;NA&gt;
## 306 NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009
## 307                                                                                                                                                                                                          Ocean Genome Legacy Collection
## 308                                                                                                                                                                                                                                    &lt;NA&gt;
## 309                                                                                                                                                                                                 iNaturalist research-grade observations
## 310                                                                                                                                                                                                          Ocean Genome Legacy Collection
## 311                                                                                                                                                                                                                                    &lt;NA&gt;
##            flag
## 1            OK
## 2            OK
## 3            OK
## 4            OK
## 5            OK
## 6            OK
## 7            OK
## 8            OK
## 9            OK
## 10           OK
## 11           OK
## 12           OK
## 13           OK
## 14           OK
## 15           OK
## 16           OK
## 17           OK
## 18           OK
## 19           OK
## 20           OK
## 21           OK
## 22           OK
## 23           OK
## 24           OK
## 25           OK
## 26           OK
## 27           OK
## 28           OK
## 29           OK
## 30           OK
## 31           OK
## 32           OK
## 33           OK
## 34           OK
## 35           OK
## 36           OK
## 37           OK
## 38           OK
## 39           OK
## 40           OK
## 41           OK
## 42           OK
## 43           OK
## 44           OK
## 45           OK
## 46           OK
## 47           OK
## 48           OK
## 49           OK
## 50           OK
## 51  check &gt; Q90
## 52           OK
## 53           OK
## 54           OK
## 55           OK
## 56           OK
## 57           OK
## 58           OK
## 59           OK
## 60           OK
## 61           OK
## 62           OK
## 63           OK
## 64           OK
## 65           OK
## 66           OK
## 67           OK
## 68           OK
## 69           OK
## 70           OK
## 71           OK
## 72  check &gt; Q90
## 73           OK
## 74           OK
## 75           OK
## 76           OK
## 77           OK
## 78           OK
## 79           OK
## 80           OK
## 81           OK
## 82           OK
## 83           OK
## 84           OK
## 85           OK
## 86           OK
## 87           OK
## 88           OK
## 89           OK
## 90           OK
## 91           OK
## 92           OK
## 93           OK
## 94           OK
## 95           OK
## 96           OK
## 97           OK
## 98  check &gt; Q90
## 99           OK
## 100          OK
## 101          OK
## 102          OK
## 103          OK
## 104          OK
## 105          OK
## 106          OK
## 107          OK
## 108          OK
## 109          OK
## 110          OK
## 111          OK
## 112          OK
## 113          OK
## 114          OK
## 115          OK
## 116          OK
## 117          OK
## 118          OK
## 119          OK
## 120          OK
## 121          OK
## 122          OK
## 123          OK
## 124          OK
## 125          OK
## 126          OK
## 127          OK
## 128          OK
## 129          OK
## 130 check &gt; Q95
## 131 check &gt; Q90
## 132 check &gt; Q90
## 133          OK
## 134 check &gt; Q90
## 135          OK
## 136          OK
## 137 check &gt; Q90
## 138          OK
## 139          OK
## 140          OK
## 141          OK
## 142          OK
## 143          OK
## 144          OK
## 145 check &gt; Q95
## 146          OK
## 147          OK
## 148          OK
## 149          OK
## 150          OK
## 151 check &gt; Q90
## 152 check &gt; Q90
## 153          OK
## 154          OK
## 155          OK
## 156          OK
## 157          OK
## 158          OK
## 159          OK
## 160          OK
## 161          OK
## 162          OK
## 163          OK
## 164          OK
## 165          OK
## 166          OK
## 167          OK
## 168          OK
## 169          OK
## 170          OK
## 171          OK
## 172          OK
## 173 check &gt; Q95
## 174 check &gt; Q95
## 175          OK
## 176          OK
## 177          OK
## 178          OK
## 179          OK
## 180          OK
## 181          OK
## 182          OK
## 183          OK
## 184          OK
## 185          OK
## 186          OK
## 187 check &gt; Q90
## 188 check &gt; Q90
## 189 check &gt; Q90
## 190          OK
## 191          OK
## 192          OK
## 193          OK
## 194 check &gt; Q95
## 195          OK
## 196          OK
## 197          OK
## 198          OK
## 199          OK
## 200          OK
## 201          OK
## 202          OK
## 203          OK
## 204 check &gt; Q95
## 205 check &gt; Q95
## 206          OK
## 207          OK
## 208          OK
## 209 check &gt; Q95
## 210          OK
## 211          OK
## 212          OK
## 213          OK
## 214          OK
## 215          OK
## 216 check &gt; Q90
## 217          OK
## 218          OK
## 219 check &gt; Q95
## 220          OK
## 221          OK
## 222 check &gt; Q95
## 223 check &gt; Q90
## 224 check &gt; Q90
## 225          OK
## 226          OK
## 227          OK
## 228          OK
## 229          OK
## 230          OK
## 231          OK
## 232          OK
## 233          OK
## 234          OK
## 235          OK
## 236 check &gt; Q95
## 237          OK
## 238          OK
## 239          OK
## 240          OK
## 241          OK
## 242          OK
## 243          OK
## 244          OK
## 245 check &gt; Q95
## 246          OK
## 247          OK
## 248          OK
## 249          OK
## 250          OK
## 251          OK
## 252          OK
## 253          OK
## 254          OK
## 255          OK
## 256          OK
## 257          OK
## 258          OK
## 259          OK
## 260          OK
## 261 check &gt; Q95
## 262          OK
## 263          OK
## 264          OK
## 265          OK
## 266 check &gt; Q95
## 267 check &gt; Q95
## 268          OK
## 269          OK
## 270          OK
## 271          OK
## 272          OK
## 273          OK
## 274          OK
## 275          OK
## 276          OK
## 277          OK
## 278          OK
## 279          OK
## 280          OK
## 281          OK
## 282          OK
## 283          OK
## 284          OK
## 285          OK
## 286 check &gt; Q95
## 287          OK
## 288          OK
## 289          OK
## 290          OK
## 291          OK
## 292          OK
## 293          OK
## 294          OK
## 295          OK
## 296          OK
## 297          OK
## 298          OK
## 299          OK
## 300          OK
## 301          OK
## 302          OK
## 303          OK
## 304          OK
## 305          OK
## 306          OK
## 307          OK
## 308          OK
## 309 check &gt; Q90
## 310          OK
## 311          OK</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapa</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> marcados, </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> flag)) <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-15-1.png" width="672" />
<br><br></p>
<p>Podemos notar no mapa acima que as ocorrencias acima do 90ésimo
quantil são muito similares às já filtradas acima com base no
<code>waterBody</code>, mas se já não tivéssemos a informação da
ocorrência restrita da espécie ao Indo-Pacífico, já poderíamos
desconfiar destas ocorrências tão longe, os <em>outliers</em>.
Investigando o datasetName destas ocorrências com <em>flags</em> também
chegaríamos a mesma conclusão de excluir os dados associados ao
<code>Diveboard - Scuba diving citizen science</code> e sem valor de
<code>datasetName</code>. <br><br></p>
</div>
<div id="pacote-scrubr" class="section level4" number="0.3.2.2">
<h4><span class="header-section-number">3.3.2.2</span> Pacote
<code>scrubr</code></h4>
<p>O pacote <code>scrubr</code> possui algumas funções úteis para
indicar problemas com coordenadas com elementos faltantes
(<code>coord_incomplete</code>), coordenadas impossíveis
(<code>coord_impossible</code>) e coordenadas duplicadas
(<code>dedup</code>). Este último é estimado em um raio de tolerância e
mais útil para análises em escala mais grosseira ou quando o informações
a serem correlacionadas estão em escala maior. Podemos inclusive
aplicá-las sequencialmente, pois o padrão das funções é excluir as
ocorrências suspeitas, mas <strong>não recomendo seguir cegamente
métodos automáticos de exclusão de dados!</strong></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;scrubr&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;scrubr&quot;</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scrubr)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># usando os dados com flag</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>data_scrubr <span class="ot">&lt;-</span> marcados <span class="sc">%&gt;%</span> </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dframe</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_impossible</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_incomplete</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_unlikely</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dedup</span>()</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="co"># mapa</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> data_scrubr, </span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), </span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> marcados <span class="sc">%&gt;%</span> </span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(flag <span class="sc">!=</span> <span class="st">&quot;OK&quot;</span>), </span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), </span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">shape =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/scrubr-1.png" width="672" />
<br><br></p>
<p>Note que as ocorrências indicadas com uma cruz foram mantidas pelo
<code>scrubr</code>, e isso reforça o papel de quem analisa em julgar os
pontos suspeitos. <br><br></p>
</div>
<div id="pacote-obistools" class="section level4" number="0.3.2.3">
<h4><span class="header-section-number">3.3.2.3</span> pacote
<code>obistools</code></h4>
<p>Vale lembrar que o <code>OBIS</code> é um repositório de dados
marinhos, então as ferramentas tem melhor uso para dados desta natureza.
Inclusive uma das funções do pacote (<code>check_onland</code>) checa
coordenadas em terra, sejam ilhas ou continentes. Aqui vamos testar a
função <code>check_outliers_species</code> que tem um princípio
semelhante à nossa função caseira <code>flag_outliers</code>, mas é
baseada no <strong>median absolute deviation (MAD)</strong> e no
<strong>interquartile range (IQR)</strong>, parâmetros que podem ser
ajustados na função. OBS: Algumas vezes pode ocorrer uma falha de
conexão com o servidor, então deve-se insistir um pouco.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;obistools&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;obistools&quot;</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(obistools)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dori_obis %&gt;% </span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   dplyr::select(decimalLongitude, decimalLatitude, scientificNameID) %&gt;% </span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   distinct() %&gt;% </span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   check_outliers_species(., report=TRUE)</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co"># usando essa configuração chegamos a valores próximos aos da limpeza manual</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>dori_obis <span class="sc">%&gt;%</span> </span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(decimalLongitude, decimalLatitude, scientificNameID) <span class="sc">%&gt;%</span> </span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">check_outliers_dataset</span>(., <span class="at">report =</span> <span class="cn">FALSE</span>, <span class="at">iqr_coef =</span> <span class="dv">1</span>, <span class="at">mad_coef =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code></pre></div>
<pre><code>## [1] 9 3</code></pre>
<p><br><br></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> marcados <span class="sc">%&gt;%</span> </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(flag <span class="sc">!=</span> <span class="st">&quot;OK&quot;</span>), </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, </span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> datasetName)) <span class="sc">+</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-17-1.png" width="672" />
<br><br></p>
<p>Por fim, vamos testar o pacote <code>CoordinateCleaner</code>. Nele
devemos especificar os campos correspondentes na função
<code>clean_coordinates</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>flags <span class="ot">&lt;-</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_coordinates</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> marcados,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lon =</span> <span class="st">&quot;decimalLongitude&quot;</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> <span class="st">&quot;decimalLatitude&quot;</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">species =</span> <span class="st">&quot;scientificName&quot;</span>,</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">tests =</span> <span class="fu">c</span>(<span class="st">&quot;equal&quot;</span>, <span class="st">&quot;gbif&quot;</span>,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;zeros&quot;</span>, <span class="st">&quot;seas&quot;</span>)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## OGR data source with driver: ESRI Shapefile 
## Source: &quot;/private/var/folders/xx/6x1gs2p90qs1n_41pc68sd0m0000gn/T/RtmpmFmLU1&quot;, layer: &quot;ne_50m_land&quot;
## with 1420 features
## It has 3 fields
## Integer64 fields read as strings:  scalerank</code></pre>
<p><br><br></p>
<p>Neste caso, nenhuma ocorrência foi marcada como suspeita. Moral da
história, sempre temos que conferir todos os dados, mas as ferramentas
ajudam muito nesta tarefa! ***</p>
</div>
</div>
</div>
</div>

<p>
    <i>Colabore, compartilhe, e cite as fontes!</i>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
