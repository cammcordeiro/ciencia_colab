<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Atividade 3</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ciência Colaborativa</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="aulas.html">
    <span class="fas fa-book"></span>
     
    Aulas
  </a>
</li>
<li>
  <a href="materiais.html">
    <span class="fas fa-folder fa-lg"></span>
     
    Materiais
  </a>
</li>
<li>
  <a href="atividades.html">
    <span class="fas fa-chart-bar"></span>
     
    Atividades
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cammcordeiro/ciencia_colab">
    <span class="fab fa-github"></span>
     
    GitHub Repo
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<style>
body {
text-align: justify}
</style>
<div id="atividade-3" class="section level1 unnumbered">
<h1 class="unnumbered">Atividade 3</h1>
<div id="acesso-a-bancos-de-dados-abertos" class="section level2" number="0.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> Acesso a bancos de dados abertos</h2>
<p>O acesso pode ser feito de diferentes formas, seja diretamente no website do repositório, utilizando-se pacotes específicos que acessam os repositórios via R ou Python, ou através de API (Application Programming Interface). Nesta última opção, o repositório é acessado por outro aplicativo ou serviço web para automatização de tarefas, seja em servidor local ou remoto, mas requer conhecimento de programação em Java e outras linguagens e não será tratado aqui.</p>
<p>Nesta atividade, temos como objetivo acessar um repositório de dados de ocorrência de espécies, inspecionar os dados, avaliar sua qualidade e fazer um mapa com as ocorrências.</p>
<p>Para iniciar, vamos escolher um repositório e uma espécie de interesse. Vamos iniciar com uma única espécie para facilitar as demais etapas.</p>
<p>O <a href="https://www.gbif.org/">GBIF (<em>Global Biodiversity Information Facility</em>)</a> é o maior repositório de ocorrências da biodiversidade da atualidade, então será nossa opção de repositório. No entanto, o <a href="https://obis.org/">OBIS (<em>Ocean Biodiversity Information System</em>)</a> é um repositório dedicado às espécies marinhas e espelhado no GBIF. Assim, espera-se que algumas ocorrências sejam duplicadas nos dois repositórios.</p>
<div id="exemplo-finding-dori" class="section level3" number="0.1.1">
<h3 number="3.1.1"><span class="header-section-number">3.1.1</span> Exemplo: <em>Finding Dori</em></h3>
<p>A espécie-alvo será o peixe marinho <em>Paracanthurus hepatus</em>, também conhecido como <em>Blue Tang</em> e, mais recentemente como <strong>Dori</strong>!.</p>
<center>
<img src= "figs/dori.png" style= "width:60%">
</center>
<p>Nosso primeiro exemplor será com as ocorrencias do <strong>GBIF</strong> e, para tal, vamos utilizar o pacote <code>rgbif</code>.</p>
<hr />
</div>
<div id="gbif" class="section level3" number="0.1.2">
<h3 number="3.1.2"><span class="header-section-number">3.1.2</span> <strong>GBIF</strong></h3>
<p>Vamos fazer uso do pacote <code>tidyverse</code> para manipular dos dados, então vamos carregar este pacote e o <code>rgbif</code>.</p>
<p>É importante explorar as funções do pacote e pode-se fazer isto usando o comando <code>?rgbif</code> e, para ler sobre uma função em particular basta colocar <code>?</code> em frente ao nome da função. Se o pacote não estiver carregado ou instalada é preciso usar <code>??</code>.</p>
<p>A função <code>occ_data</code> faz uma busca simplificada das ocorrências no repositório do <strong>GBIF</strong> por meio do nome científico, número de identificação, país e outros. Neste caso, vamos procurar diretamente pelo nome da espécie-alvo. Outros atributos podem ser adicionados à função para refinar a busca, leia o material de ajuda da função para ter uma ideia. Vamos aproveitar alguns destes atributos e selecionar apenas ocorrências que possuem coordenadas e sem problemas geoespaciais.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar funcoes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>?occ_data</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># baixar ocorrencias</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>dori_gbif <span class="ot">&lt;-</span> <span class="fu">occ_data</span>(<span class="at">scientificName =</span> <span class="st">&quot;Paracanthurus hepatus&quot;</span>, </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">hasCoordinate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">hasGeospatialIssue=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensoes</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dori_gbif)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dori_gbif<span class="sc">$</span>data)</span></code></pre></div>
<pre><code>## [1] 500 150</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar campos</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span> names</span></code></pre></div>
<pre><code>##   [1] &quot;key&quot;                                              
##   [2] &quot;scientificName&quot;                                   
##   [3] &quot;decimalLatitude&quot;                                  
##   [4] &quot;decimalLongitude&quot;                                 
##   [5] &quot;issues&quot;                                           
##   [6] &quot;datasetKey&quot;                                       
##   [7] &quot;publishingOrgKey&quot;                                 
##   [8] &quot;installationKey&quot;                                  
##   [9] &quot;publishingCountry&quot;                                
##  [10] &quot;protocol&quot;                                         
##  [11] &quot;lastCrawled&quot;                                      
##  [12] &quot;lastParsed&quot;                                       
##  [13] &quot;crawlId&quot;                                          
##  [14] &quot;hostingOrganizationKey&quot;                           
##  [15] &quot;basisOfRecord&quot;                                    
##  [16] &quot;occurrenceStatus&quot;                                 
##  [17] &quot;taxonKey&quot;                                         
##  [18] &quot;kingdomKey&quot;                                       
##  [19] &quot;phylumKey&quot;                                        
##  [20] &quot;classKey&quot;                                         
##  [21] &quot;orderKey&quot;                                         
##  [22] &quot;familyKey&quot;                                        
##  [23] &quot;genusKey&quot;                                         
##  [24] &quot;speciesKey&quot;                                       
##  [25] &quot;acceptedTaxonKey&quot;                                 
##  [26] &quot;acceptedScientificName&quot;                           
##  [27] &quot;kingdom&quot;                                          
##  [28] &quot;phylum&quot;                                           
##  [29] &quot;order&quot;                                            
##  [30] &quot;family&quot;                                           
##  [31] &quot;genus&quot;                                            
##  [32] &quot;species&quot;                                          
##  [33] &quot;genericName&quot;                                      
##  [34] &quot;specificEpithet&quot;                                  
##  [35] &quot;taxonRank&quot;                                        
##  [36] &quot;taxonomicStatus&quot;                                  
##  [37] &quot;iucnRedListCategory&quot;                              
##  [38] &quot;dateIdentified&quot;                                   
##  [39] &quot;coordinateUncertaintyInMeters&quot;                    
##  [40] &quot;stateProvince&quot;                                    
##  [41] &quot;year&quot;                                             
##  [42] &quot;month&quot;                                            
##  [43] &quot;day&quot;                                              
##  [44] &quot;eventDate&quot;                                        
##  [45] &quot;modified&quot;                                         
##  [46] &quot;lastInterpreted&quot;                                  
##  [47] &quot;references&quot;                                       
##  [48] &quot;license&quot;                                          
##  [49] &quot;isInCluster&quot;                                      
##  [50] &quot;geodeticDatum&quot;                                    
##  [51] &quot;class&quot;                                            
##  [52] &quot;countryCode&quot;                                      
##  [53] &quot;country&quot;                                          
##  [54] &quot;rightsHolder&quot;                                     
##  [55] &quot;identifier&quot;                                       
##  [56] &quot;http://unknown.org/nick&quot;                          
##  [57] &quot;verbatimEventDate&quot;                                
##  [58] &quot;datasetName&quot;                                      
##  [59] &quot;verbatimLocality&quot;                                 
##  [60] &quot;collectionCode&quot;                                   
##  [61] &quot;gbifID&quot;                                           
##  [62] &quot;occurrenceID&quot;                                     
##  [63] &quot;taxonID&quot;                                          
##  [64] &quot;recordedBy&quot;                                       
##  [65] &quot;catalogNumber&quot;                                    
##  [66] &quot;http://unknown.org/occurrenceDetails&quot;             
##  [67] &quot;institutionCode&quot;                                  
##  [68] &quot;rights&quot;                                           
##  [69] &quot;eventTime&quot;                                        
##  [70] &quot;identifiedBy&quot;                                     
##  [71] &quot;identificationID&quot;                                 
##  [72] &quot;occurrenceRemarks&quot;                                
##  [73] &quot;lifeStage&quot;                                        
##  [74] &quot;networkKeys&quot;                                      
##  [75] &quot;institutionKey&quot;                                   
##  [76] &quot;eventID&quot;                                          
##  [77] &quot;dataGeneralizations&quot;                              
##  [78] &quot;vernacularName&quot;                                   
##  [79] &quot;otherCatalogNumbers&quot;                              
##  [80] &quot;locationRemarks&quot;                                  
##  [81] &quot;taxonConceptID&quot;                                   
##  [82] &quot;depth&quot;                                            
##  [83] &quot;footprintWKT&quot;                                     
##  [84] &quot;county&quot;                                           
##  [85] &quot;identificationVerificationStatus&quot;                 
##  [86] &quot;originalNameUsage&quot;                                
##  [87] &quot;datasetID&quot;                                        
##  [88] &quot;nameAccordingTo&quot;                                  
##  [89] &quot;higherGeography&quot;                                  
##  [90] &quot;locality&quot;                                         
##  [91] &quot;language&quot;                                         
##  [92] &quot;type&quot;                                             
##  [93] &quot;higherClassification&quot;                             
##  [94] &quot;individualCount&quot;                                  
##  [95] &quot;depthAccuracy&quot;                                    
##  [96] &quot;waterBody&quot;                                        
##  [97] &quot;sampleSizeUnit&quot;                                   
##  [98] &quot;sampleSizeValue&quot;                                  
##  [99] &quot;habitat&quot;                                          
## [100] &quot;institutionID&quot;                                    
## [101] &quot;islandGroup&quot;                                      
## [102] &quot;http://rs.tdwg.org/dwc/terms/sampleSizeValue&quot;     
## [103] &quot;georeferencedBy&quot;                                  
## [104] &quot;maximumDistanceAboveSurfaceInMeters&quot;              
## [105] &quot;georeferenceProtocol&quot;                             
## [106] &quot;island&quot;                                           
## [107] &quot;verbatimDepth&quot;                                    
## [108] &quot;http://rs.tdwg.org/dwc/terms/sampleSizeUnit&quot;      
## [109] &quot;ownerInstitutionCode&quot;                             
## [110] &quot;samplingProtocol&quot;                                 
## [111] &quot;elevation&quot;                                        
## [112] &quot;elevationAccuracy&quot;                                
## [113] &quot;georeferenceSources&quot;                              
## [114] &quot;projectId&quot;                                        
## [115] &quot;programmeAcronym&quot;                                 
## [116] &quot;continent&quot;                                        
## [117] &quot;organismQuantity&quot;                                 
## [118] &quot;organismQuantityType&quot;                             
## [119] &quot;http://rs.tdwg.org/dwc/terms/organismQuantity&quot;    
## [120] &quot;endDayOfYear&quot;                                     
## [121] &quot;locationAccordingTo&quot;                              
## [122] &quot;startDayOfYear&quot;                                   
## [123] &quot;http://rs.tdwg.org/dwc/terms/organismQuantityType&quot;
## [124] &quot;associatedReferences&quot;                             
## [125] &quot;recordNumber&quot;                                     
## [126] &quot;collectionKey&quot;                                    
## [127] &quot;fieldNumber&quot;                                      
## [128] &quot;preparations&quot;                                     
## [129] &quot;http://unknown.org/language&quot;                      
## [130] &quot;http://unknown.org/rights&quot;                        
## [131] &quot;http://unknown.org/rightsHolder&quot;                  
## [132] &quot;identificationRemarks&quot;                            
## [133] &quot;materialSampleID&quot;                                 
## [134] &quot;disposition&quot;                                      
## [135] &quot;municipality&quot;                                     
## [136] &quot;collectionID&quot;                                     
## [137] &quot;eventRemarks&quot;                                     
## [138] &quot;locationID&quot;                                       
## [139] &quot;bibliographicCitation&quot;                            
## [140] &quot;nomenclaturalCode&quot;                                
## [141] &quot;name&quot;                                             
## [142] &quot;parentEventID&quot;                                    
## [143] &quot;samplingEffort&quot;                                   
## [144] &quot;coordinatePrecision&quot;                              
## [145] &quot;acceptedNameUsage&quot;                                
## [146] &quot;georeferenceVerificationStatus&quot;                   
## [147] &quot;previousIdentifications&quot;                          
## [148] &quot;acceptedNameUsageID&quot;                              
## [149] &quot;associatedSequences&quot;                              
## [150] &quot;organismID&quot;</code></pre>
<p>Acima, vemos que o conjunto de dados tem ocorrências (uma por linha) e variáveis. As variáveis podem ser utilizadas para filtrar as ocorrências de acordo com o objetivo, além de fornecerem diversos dados a respeito das ocorrências, incluindo dados dos amostradores e detentores dos direitos. Vale notar que o conjunto de dados retornado pelo <strong>GBIF</strong> não é um <code>data frame</code> simples, mas sim um <code>list</code> que contém um conjunto de <code>data frames</code>. Para acessar estes <code>data frames</code> é necessário usar o operador <code>$</code>.</p>
</div>
</div>
<div id="problemas-reportados" class="section level2" number="0.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> Problemas reportados</h2>
<p>Um dos campos mais úteis dos dados é a coluna <code>issues</code>, pois ela indica problema já identificados pelo validador automático do repositório. Os problemas (<em>issues</em>) possuem um código que pode ser conferido pela função <code>gbif_issues</code>. Ao usar a função não é preciso indicar nenhum atributo, pois ela retornará um dataframe com as abreviações usadas e a descrição dos problemas catalogados no GBIF.</p>
<pre><code>##           code                                             issue
## 1          bri                           BASIS_OF_RECORD_INVALID
## 2          ccm                        CONTINENT_COUNTRY_MISMATCH
## 3          cdc                CONTINENT_DERIVED_FROM_COORDINATES
## 4        conti                                 CONTINENT_INVALID
## 5         cdiv                                COORDINATE_INVALID
## 6        cdout                           COORDINATE_OUT_OF_RANGE
## 7        cdrep                            COORDINATE_REPROJECTED
## 8       cdrepf                    COORDINATE_REPROJECTION_FAILED
## 9       cdreps                COORDINATE_REPROJECTION_SUSPICIOUS
## 10     cdround                                COORDINATE_ROUNDED
## 11     cucdmis                       COUNTRY_COORDINATE_MISMATCH
## 12        cudc                  COUNTRY_DERIVED_FROM_COORDINATES
## 13        cuiv                                   COUNTRY_INVALID
## 14         cum                                  COUNTRY_MISMATCH
## 15      depmms                             DEPTH_MIN_MAX_SWAPPED
## 16       depnn                                 DEPTH_NON_NUMERIC
## 17     depnmet                                  DEPTH_NOT_METRIC
## 18      depunl                                    DEPTH_UNLIKELY
## 19       elmms                         ELEVATION_MIN_MAX_SWAPPED
## 20        elnn                             ELEVATION_NON_NUMERIC
## 21      elnmet                              ELEVATION_NOT_METRIC
## 22       elunl                                ELEVATION_UNLIKELY
## 23      gass84                      GEODETIC_DATUM_ASSUMED_WGS84
## 24      gdativ                            GEODETIC_DATUM_INVALID
## 25     iddativ                           IDENTIFIED_DATE_INVALID
## 26    iddatunl                          IDENTIFIED_DATE_UNLIKELY
## 27      mdativ                             MODIFIED_DATE_INVALID
## 28     mdatunl                            MODIFIED_DATE_UNLIKELY
## 29    muldativ                           MULTIMEDIA_DATE_INVALID
## 30    muluriiv                            MULTIMEDIA_URI_INVALID
## 31   preneglat                         PRESUMED_NEGATED_LATITUDE
## 32   preneglon                        PRESUMED_NEGATED_LONGITUDE
## 33     preswcd                       PRESUMED_SWAPPED_COORDINATE
## 34      rdativ                             RECORDED_DATE_INVALID
## 35       rdatm                            RECORDED_DATE_MISMATCH
## 36     rdatunl                            RECORDED_DATE_UNLIKELY
## 37    refuriiv                            REFERENCES_URI_INVALID
## 38    txmatfuz                                 TAXON_MATCH_FUZZY
## 39     txmathi                            TAXON_MATCH_HIGHERRANK
## 40    txmatnon                                  TAXON_MATCH_NONE
## 41   typstativ                               TYPE_STATUS_INVALID
## 42      zerocd                                   ZERO_COORDINATE
## 43        cdpi                      COORDINATE_PRECISION_INVALID
## 44       cdumi             COORDINATE_UNCERTAINTY_METERS_INVALID
## 45       indci                          INDIVIDUAL_COUNT_INVALID
## 46      interr                              INTERPRETATION_ERROR
## 47       iccos INDIVIDUAL_COUNT_CONFLICTS_WITH_OCCURRENCE_STATUS
## 48       osiic  OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT
## 49         osu                      OCCURRENCE_STATUS_UNPARSABLE
## 50       geodi                        GEOREFERENCED_DATE_INVALID
## 51       geodu                       GEOREFERENCED_DATE_UNLIKELY
## 52      ambcol                              AMBIGUOUS_COLLECTION
## 53     ambinst                             AMBIGUOUS_INSTITUTION
## 54     colmafu                            COLLECTION_MATCH_FUZZY
## 55     colmano                             COLLECTION_MATCH_NONE
## 56     incomis                   INSTITUTION_COLLECTION_MISMATCH
## 57      inmafu                           INSTITUTION_MATCH_FUZZY
## 58      inmano                            INSTITUTION_MATCH_NONE
## 59     osifbor   OCCURRENCE_STATUS_INFERRED_FROM_BASIS_OF_RECORD
## 60     diffown                       DIFFERENT_OWNER_INSTITUTION
## 61   taxmatagg                             TAXON_MATCH_AGGREGATE
## 62         anm                             ACCEPTED_NAME_MISSING
## 63        annu                          ACCEPTED_NAME_NOT_UNIQUE
## 64      anuidi                    ACCEPTED_NAME_USAGE_ID_INVALID
## 65    aitidinv                            ALT_IDENTIFIER_INVALID
## 66        bbmn                               BACKBONE_MATCH_NONE
## 67    basauthm                          BASIONYM_AUTHOR_MISMATCH
## 68     bibrinv                             BIB_REFERENCE_INVALID
## 69       chsun                                    CHAINED_SYNOYM
## 70      clasna                        CLASSIFICATION_NOT_APPLIED
## 71     clasroi                 CLASSIFICATION_RANK_ORDER_INVALID
## 72  conbascomb                  CONFLICTING_BASIONYM_COMBINATION
## 73      desinv                               DESCRIPTION_INVALID
## 74      disinv                              DISTRIBUTION_INVALID
## 75         hom                                           HOMONYM
## 76        minv                                MULTIMEDIA_INVALID
## 77         npm                              NAME_PARENT_MISMATCH
## 78          ns                                        NO_SPECIES
## 79       nsinv                      NOMENCLATURAL_STATUS_INVALID
## 80       onder                             ORIGINAL_NAME_DERIVED
## 81        onnu                          ORIGINAL_NAME_NOT_UNIQUE
## 82    onuidinv                    ORIGINAL_NAME_USAGE_ID_INVALID
## 83          ov                              ORTHOGRAPHIC_VARIANT
## 84          pc                                      PARENT_CYCLE
## 85        pnnu                            PARENT_NAME_NOT_UNIQUE
## 86    pnuidinv                      PARENT_NAME_USAGE_ID_INVALID
## 87          pp                                PARTIALLY_PARSABLE
## 88         pbg                            PUBLISHED_BEFORE_GENUS
## 89     rankinv                                      RANK_INVALID
## 90     relmiss                              RELATIONSHIP_MISSING
## 91       scina                         SCIENTIFIC_NAME_ASSEMBLED
## 92     spprinv                           SPECIES_PROFILE_INVALID
## 93    taxstinv                          TAXONOMIC_STATUS_INVALID
## 94    taxstmis                         TAXONOMIC_STATUS_MISMATCH
## 95      unpars                                        UNPARSABLE
## 96 vernnameinv                           VERNACULAR_NAME_INVALID
## 97  backmatagg                          BACKBONE_MATCH_AGGREGATE
##                                                                                                                                                              description
## 1                                                           The given basis of record is impossible to interpret or seriously different from the recommended vocabulary.
## 2                                                                                                                 The interpreted continent and country do not match up.
## 3                                                                            The interpreted continent is based on the coordinates, not the verbatim string information.
## 4                                                                                                                                Uninterpretable continent values found.
## 5                                                                                                Coordinate value given in some form but GBIF is unable to interpret it.
## 6                                                                                                  Coordinate has invalid lat/lon values out of their decimal max range.
## 7                                                                         The original coordinate was successfully reprojected from a different geodetic datum to WGS84.
## 8                                                                The given decimal latitude and longitude could not be reprojected to WGS84 based on the provided datum.
## 9                          Indicates successful coordinate reprojection according to provided datum, but which results in a datum shift larger than 0.1 decimal degrees.
## 10                                                                                                               Original coordinate modified by rounding to 5 decimals.
## 11                                                                                         The interpreted occurrence coordinates fall outside of the indicated country.
## 12                                                                             The interpreted country is based on the coordinates, not the verbatim string information.
## 13                                                                                                                                 Uninterpretable country values found.
## 14                                                                                        Interpreted country for dwc:country and dwc:countryCode contradict each other.
## 15                                                                                                                                               Set if supplied min&gt;max
## 16                                                                                                                                   Set if depth is a non numeric value
## 17                                                                     Set if supplied depth is not given in the metric system, for example using feet instead of meters
## 18                                                                                                                      Set if depth is larger than 11.000m or negative.
## 19                                                                                                                                   Set if supplied min &gt; max elevation
## 20                                                                                                                               Set if elevation is a non numeric value
## 21                                                                 Set if supplied elevation is not given in the metric system, for example using feet instead of meters
## 22                                                                                      Set if elevation is above the troposphere (17km) or below 11km (Mariana Trench).
## 23                              Indicating that the interpreted coordinates assume they are based on WGS84 datum as the datum was either not indicated or interpretable.
## 24                                                                                                                    The geodetic datum given could not be interpreted.
## 25                                                                                      The date given for dwc:dateIdentified is invalid and cant be interpreted at all.
## 26                                                                                The date given for dwc:dateIdentified is in the future or before Linnean times (1700).
## 27                                                              A (partial) invalid date is given for dc:modified, such as a non existing date, invalid zero month, etc.
## 28                                                                                         The date given for dc:modified is in the future or predates unix time (1970).
## 29                                                                                                       An invalid date is given for dc:created of a multimedia object.
## 30                                                                                                                      An invalid uri is given for a multimedia object.
## 31                                                                                                            Latitude appears to be negated, e.g. 32.3 instead of -32.3
## 32                                                                                                           Longitude appears to be negated, e.g. 32.3 instead of -32.3
## 33                                                                                                                          Latitude and longitude appear to be swapped.
## 34                                                                              A (partial) invalid date is given, such as a non existing date, invalid zero month, etc.
## 35                                                           The recording date specified as the eventDate string and the individual year, month, day are contradicting.
## 36                        The recording date is highly unlikely, falling either into the future or represents a very old date before 1600 that predates modern taxonomy.
## 37                                                                                                                            An invalid uri is given for dc:references.
## 38                                                                                   Matching to the taxonomic backbone can only be done using a fuzzy, non exact match.
## 39                                                                     Matching to the taxonomic backbone can only be done on a higher rank and not the scientific name.
## 40       Matching to the taxonomic backbone cannot be done cause there was no match at all or several matches with too little information to keep them apart (homonyms).
## 41                                                              The given type status is impossible to interpret or seriously different from the recommended vocabulary.
## 42                                                                                       Coordinate is the exact 0/0 coordinate, often indicating a bad null coordinate.
## 43                                                                                                             Indicates an invalid or very unlikely coordinatePrecision
## 44                                                                                                        Indicates an invalid or very unlikely dwc:uncertaintyInMeters.
## 45                                                                                                                  Individual count value not parsable into an integer.
## 46                                                                                An error occurred during interpretation, leaving the record interpretation incomplete.
## 47                                                                                         Example: individual count value &gt; 0, but occurrence status is absent and etc.
## 48                                                                                                        Occurrence status was inferred from the individual count value
## 49                                                                                                         Occurrence status value can&#39;t be assigned to OccurrenceStatus
## 50                                                                                  The date given for dwc:georeferencedDate is invalid and can&#39;t be interpreted at all.
## 51                                                                             The date given for dwc:georeferencedDate is in the future or before Linnean times (1700).
## 52                                                                                                   The given collection matches with more than 1 GrSciColl collection.
## 53                                                                                                 The given institution matches with more than 1 GrSciColl institution.
## 54                                                                                                   The given collection was fuzzily matched to a GrSciColl collection.
## 55                                                                                               The given collection couldn&#39;t be matched with any GrSciColl collection.
## 56                                                                                                     The collection matched doesn&#39;t belong to the institution matched.
## 57                                                                                                 The given institution was fuzzily matched to a GrSciColl institution.
## 58                                                                                             The given institution couldn&#39;t be matched with any GrSciColl institution.
## 59                                                                                                                  Occurrence status was inferred from basis of records
## 60 The given owner institution is different than the given institution. Therefore we assume it doesn&#39;t belong to the institution and we don&#39;t link it to the occurrence.
## 61                Matching to the taxonomic backbone can only be done on a species level, but the occurrence was in fact considered a broader species aggregate/complex.
## 62                                                                                                                                     Synonym lacking an accepted name.
## 63                                                                               Synonym has a verbatim accepted name which is not unique and refers to several records.
## 64                                                                                                          The value for dwc:acceptedNameUsageID could not be resolved.
## 65                                                                          At least one alternative identifier extension record attached to this name usage is invalid.
## 66                                                                                                                 Name usage could not be matched to the GBIF backbone.
## 67                                                                     The authorship of the original name does not match the authorship in brackets of the actual name.
## 68                                                                         At least one bibliographic reference extension record attached to this name usage is invalid.
## 69                                                                                   If a synonym points to another synonym as its accepted taxon the chain is resolved.
## 70                                                                                               The denormalized classification could not be applied to the name usage.
## 71                                                                    The given ranks of the names in the classification hierarchy do not follow the hierarchy of ranks.
## 72                                                                                 There have been more than one accepted name in a homotypical basionym group of names.
## 73                                                                                     At least one description extension record attached to this name usage is invalid.
## 74                                                                                    At least one distribution extension record attached to this name usage is invalid.
## 75                                                   A not synonymized homonym exists for this name in some other backbone source which have been ignored at build time.
## 76                                                                                      At least one multimedia extension record attached to this name usage is invalid.
## 77                                               The (accepted) bi/trinomial name does not match the parent name and should be recombined into the parent genus/species.
## 78                                                           The group (currently only genera are tested) are lacking any accepted species GBIF backbone specific issue.
## 79                                                                                                                      dwc:nomenclaturalStatus could not be interpreted
## 80                     Record has a original name (basionym) relationship which was derived from name &amp; authorship comparison, but did not exist explicitly in the data.
## 81                                                                     Record has a verbatim original name (basionym) which is not unique and refers to several records.
## 82                                                                                                          The value for dwc:originalNameUsageID could not be resolved.
## 83                                                                                                              A potential orthographic variant exists in the backbone.
## 84                                                                                 The child parent classification resulted into a cycle that needed to be resolved/cut.
## 85                                                                                  Record has a verbatim parent name which is not unique and refers to several records.
## 86                                                                                                            The value for dwc:parentNameUsageID could not be resolved.
## 87                                    The beginning of the scientific name string was parsed, but there is additional information in the string that was not understood.
## 88                                                                                            A bi/trinomial name published earlier than the parent genus was published.
## 89                                                                                                                                dwc:taxonRank could not be interpreted
## 90                                                                                                   There were problems representing all name usage relationships, i.e.
## 91                                                                     The scientific name was assembled from the individual name parts and not given as a whole string.
## 92                                                                                 At least one species profile extension record attached to this name usage is invalid.
## 93                                                                                                                          dwc:taxonomicStatus could not be interpreted
## 94                                                                                                                                                        no description
## 95                                                                   The scientific name string could not be parsed at all, but appears to be a parsable name type, i.e.
## 96                                                                                 At least one vernacular name extension record attached to this name usage is invalid.
## 97                                                     Name usage could only be matched to a GBIF backbone species, but was in fact a broader species aggregate/complex.
##          type
## 1  occurrence
## 2  occurrence
## 3  occurrence
## 4  occurrence
## 5  occurrence
## 6  occurrence
## 7  occurrence
## 8  occurrence
## 9  occurrence
## 10 occurrence
## 11 occurrence
## 12 occurrence
## 13 occurrence
## 14 occurrence
## 15 occurrence
## 16 occurrence
## 17 occurrence
## 18 occurrence
## 19 occurrence
## 20 occurrence
## 21 occurrence
## 22 occurrence
## 23 occurrence
## 24 occurrence
## 25 occurrence
## 26 occurrence
## 27 occurrence
## 28 occurrence
## 29 occurrence
## 30 occurrence
## 31 occurrence
## 32 occurrence
## 33 occurrence
## 34 occurrence
## 35 occurrence
## 36 occurrence
## 37 occurrence
## 38 occurrence
## 39 occurrence
## 40 occurrence
## 41 occurrence
## 42 occurrence
## 43 occurrence
## 44 occurrence
## 45 occurrence
## 46 occurrence
## 47 occurrence
## 48 occurrence
## 49 occurrence
## 50 occurrence
## 51 occurrence
## 52 occurrence
## 53 occurrence
## 54 occurrence
## 55 occurrence
## 56 occurrence
## 57 occurrence
## 58 occurrence
## 59 occurrence
## 60 occurrence
## 61 occurrence
## 62       name
## 63       name
## 64       name
## 65       name
## 66       name
## 67       name
## 68       name
## 69       name
## 70       name
## 71       name
## 72       name
## 73       name
## 74       name
## 75       name
## 76       name
## 77       name
## 78       name
## 79       name
## 80       name
## 81       name
## 82       name
## 83       name
## 84       name
## 85       name
## 86       name
## 87       name
## 88       name
## 89       name
## 90       name
## 91       name
## 92       name
## 93       name
## 94       name
## 95       name
## 96       name
## 97       name</code></pre>
<p>Para checar os <code>issues</code> indicados na base baixada é necessário um pequeno tratamento, uma vez que algumas ocorrências possuem múltiplos problemas. Assim, utilizamos a função <code>strsplit</code> para individualizar os <code>issues</code> e poder conferí-los.</p>
<pre><code>##        code                                            issue
## 1     conti                                CONTINENT_INVALID
## 2    cdreps               COORDINATE_REPROJECTION_SUSPICIOUS
## 3   cdround                               COORDINATE_ROUNDED
## 4      cudc                 COUNTRY_DERIVED_FROM_COORDINATES
## 5       cum                                 COUNTRY_MISMATCH
## 6    gass84                     GEODETIC_DATUM_ASSUMED_WGS84
## 7    gdativ                           GEODETIC_DATUM_INVALID
## 8  refuriiv                           REFERENCES_URI_INVALID
## 9     osiic OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT
## 10  colmafu                           COLLECTION_MATCH_FUZZY
## 11  incomis                  INSTITUTION_COLLECTION_MISMATCH
## 12   inmafu                          INSTITUTION_MATCH_FUZZY
##                                                                                                                                      description
## 1                                                                                                        Uninterpretable continent values found.
## 2  Indicates successful coordinate reprojection according to provided datum, but which results in a datum shift larger than 0.1 decimal degrees.
## 3                                                                                        Original coordinate modified by rounding to 5 decimals.
## 4                                                      The interpreted country is based on the coordinates, not the verbatim string information.
## 5                                                                 Interpreted country for dwc:country and dwc:countryCode contradict each other.
## 6       Indicating that the interpreted coordinates assume they are based on WGS84 datum as the datum was either not indicated or interpretable.
## 7                                                                                             The geodetic datum given could not be interpreted.
## 8                                                                                                     An invalid uri is given for dc:references.
## 9                                                                                 Occurrence status was inferred from the individual count value
## 10                                                                           The given collection was fuzzily matched to a GrSciColl collection.
## 11                                                                             The collection matched doesn&#39;t belong to the institution matched.
## 12                                                                         The given institution was fuzzily matched to a GrSciColl institution.
##          type
## 1  occurrence
## 2  occurrence
## 3  occurrence
## 4  occurrence
## 5  occurrence
## 6  occurrence
## 7  occurrence
## 8  occurrence
## 9  occurrence
## 10 occurrence
## 11 occurrence
## 12 occurrence</code></pre>
<p>A maioria dos problemas reportados é relacionado com discrepancias entre informações indicadas pelos autores e as levantadas pelo algoritmo de checagem, mas nenhum parece invalidar as ocorrências, por enquanto.</p>
<p>Prosseguimos selecionando algumas variáveis que serão úteis para a validação dos dados e futuras análises, como coordenadas, profundidade, nome da base de dados etc.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="ot">&lt;-</span> dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, acceptedScientificName, decimalLatitude, decimalLongitude,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>         issues, waterBody, basisOfRecord, occurrenceStatus, rightsHolder, </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>         datasetName, recordedBy, depth, locality, habitat) </span></code></pre></div>
<p>Note que temos 500 ocorrências, no entanto, vamos ver quantas são únicas aplicando a função <code>distinct</code> do pacote <code>dplyr</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() </span></code></pre></div>
<p>No fim, observamos que ficamos com 376 ocorrências agora, e isso acontece por causa de diferenças em colunas que, neste caso, não serão usadas para o objetivo desta prática.</p>
<p>Para identificar todos os valores únicos presented nos dados, vamos aplicar a função <code>unique</code> a cada coluna com um <em>loop</em> na função <code>lapply</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar niveis dos fatores</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(dori_gbif1, unique)</span></code></pre></div>
<pre><code>## $scientificName
## [1] &quot;Paracanthurus hepatus (Linnaeus, 1766)&quot; &quot;BOLD:AAC3227&quot;                          
## [3] &quot;BOLD:AAT9935&quot;                          
## 
## $acceptedScientificName
## [1] &quot;Paracanthurus hepatus (Linnaeus, 1766)&quot; &quot;BOLD:AAC3227&quot;                          
## [3] &quot;BOLD:AAT9935&quot;                          
## 
## $decimalLatitude
##   [1] -27.400000 -28.611278  -4.656524 -17.636875  25.015492  -6.353158   4.595825 -18.287067 -13.647350
##  [10]  -8.349668  22.680278 -28.196141  26.189035 -21.058230  -2.244373  -8.727807  -2.204717 -30.204320
##  [19] -24.113638  15.022028  -5.816751  -5.840112  27.388889 -24.116345 -17.076469 -17.077753 -10.423094
##  [28] -29.927833 -10.393100  -8.481814  -8.612647   1.615687  13.522638  13.518570   4.116129   0.186880
##  [37]   0.798243 -28.611023   6.384268 -16.428461  27.328333  -4.714799 -16.767523   4.109330 -21.151370
##  [46] -23.817600 -29.929429  -4.279653 -24.110377  -0.584608 -17.575953  14.865178  14.838945  13.282353
##  [55]  18.169705  18.090721  18.144987  14.108882  14.169204  15.274841  15.052066  14.927633  15.010917
##  [64]  15.192456  14.924998 -27.535837  18.093946  18.050178  18.085108  15.134210  15.111052  15.113834
##  [73]  16.718400  25.752000  -2.757490  13.686601  -5.820478   4.121438 -21.170370 -21.205960 -21.205150
##  [82] -21.035070 -21.233100 -21.073840 -21.239710  -2.260250  -2.249608 -14.273857 -17.076470 -16.783458
##  [91] -21.349500 -21.484390 -16.657679 -25.288066  30.487778  -8.400000 -21.319020  24.306446  -4.321165
## [100] -17.068420  -8.689442 -14.235900 -21.366690 -21.371320 -21.370350  26.291180   1.872135   0.187242
## [109]   0.190310   0.191557   0.822466   0.820899 -17.116486 -17.070283 -17.062497 -14.151863 -14.224068
## [118] -14.278573 -14.279030 -14.241373 -14.285210 -14.273254  16.135100 -21.660010 -21.991250   6.382461
## [127] -27.532000  24.436835  -5.611260 -27.525900 -15.484300  -8.537167  -8.475600  -4.530000  -5.304400
## [136]  24.472500 -12.872840  23.212100 -12.672960  -4.714922 -21.015540 -21.015000   6.986900   7.134422
## [145] -27.520850 -27.523100 -17.408093  14.843660  18.149654  14.201462  15.269845  15.261225  15.275189
## [154]  15.268836  15.256714  15.282955  15.275694  15.116363  14.934944  15.276654  15.281291  15.003307
## [163]  -4.292379  -8.636633  17.591924  26.237900  24.455000 -23.322967 -23.890883  -8.349183  -8.277300
## [172]  13.230371  -8.505400 -24.112880  13.522800 -14.529133 -21.160690 -29.447500 -14.681537 -27.529900
## [181] -27.538681  -6.456933 -29.930400 -30.202300   5.550000  18.437700 -23.247900 -21.851700 -21.897300
## [190] -21.248000 -20.976700 -17.827500 -16.931600 -12.217000  27.510000  19.292300 -21.371260 -21.372000
## [199] -21.365210  16.383300 -17.092612 -17.100688   0.194956   0.195480   0.190741  -8.556720 -26.822600
## [208]  -6.634620  -8.277000  25.821500 -14.523517   3.352720  39.284700 -27.533300 -27.524900 -12.085451
## [217] -24.111530  19.675859  18.049572  15.110629  16.710502  15.105225  15.091283  14.952465  15.255971
## [226]  14.931544  20.748400  14.864917  14.847157  15.077733  15.069572  15.086594  15.055609 -29.923100
## [235] -30.017600  16.324900 -23.796683 -23.848667 -23.745917 -21.150000 -21.146900 -18.846000   0.206550
## [244]   0.190290   0.193110 -14.652800 -14.652770 -28.611000 -27.413500 -27.413510 -22.498100  25.034300
## [253] -10.429600 -10.428100   2.285408  -4.313293  12.601900  20.307600   5.864600 -29.930440 -30.206662
## [262]  15.273530  15.254217  15.268808  15.004243   5.883700   5.875800  18.811222  17.607530 -29.933100
## [271] -29.912700 -30.201900 -29.912740 -29.933083  -8.277800  16.320100   0.197000 -22.843333 -22.835000
## [280] -13.500000 -22.840000 -30.201700 -30.207000 -30.204300 -29.923140 -30.205030 -30.201670 -30.207010
## [289] -14.651927   7.366017  15.176020  17.586930 -21.060000 -21.059999 -10.446286 -21.349080   0.190850
## [298]  14.246000  14.250000 -27.490000   7.117000   7.120000  -8.945700  -8.179083 -23.883500 -23.886983
## 
## $decimalLongitude
##   [1]  153.56667  153.62837   39.36794  148.44080  122.00093   39.30729  118.86434  147.69919  144.10688
##  [10]  116.06586  121.49028  153.57911  127.40389   55.21915  130.55572  115.54442  130.56772  153.26482
##  [19]  152.70748  145.57996   39.38253   39.46530  128.52111  152.70794  179.11049  179.10984  105.66871
##  [28]  153.38925  105.66045  119.52971  158.20064  124.73795  120.97290  120.99116  118.63001 -176.46176
##  [37] -176.62003  153.62923 -162.46472  145.99662  128.55778   39.37970  179.94055  118.62500   35.08851
##  [46]   35.40329  153.39147   55.72781  152.71023  130.63281  178.98593  145.56811  145.53007  144.76383
##  [55]  145.79179  145.76129  145.75369  145.16840  145.28545  145.79259  145.65608  145.63037  145.58553
##  [64]  145.70396  145.64574   32.67988  145.74479  145.70588  145.72653  145.67886  145.70275  145.69897
##  [73]  145.77638  141.47400  150.71890  120.91363   39.38162  118.63332   55.27931   55.27962   55.27898
##  [82]   55.21433   55.29266   55.22368   55.30145  130.64465  130.62375 -169.49334  179.11049  179.92354
##  [91]   55.46860   35.45493  146.02884  152.90847  130.15250  119.35000   35.50786  124.09048   55.86569
## [100]  179.10468  119.57251 -178.17400   55.65609   55.68264   55.73661  126.78845 -157.42781 -176.46102
## [109] -176.45731 -176.48886 -176.62678 -176.62671  179.10813  179.10590  179.09860 -169.61060 -169.51954
## [118] -170.54882 -170.54739 -170.67885 -170.54548 -170.50510  -61.77100   35.42359   35.38154 -162.42674
## [127]   32.68670  123.79669  132.74726   32.68540  147.10760  119.60195  119.55653  131.65190  131.99690
## [136]  122.96361   45.27593  -81.18580   45.05137   39.37488   55.23410   55.23405  134.21884  134.22094
## [145]   32.68732   32.68600 -179.05644  145.56591  145.81155  145.26090  145.78511  145.82889  145.82971
## [154]  145.83191  145.81463  145.80272  145.79354  145.69629  145.65172  145.82731  145.80069  145.67423
## [163]   55.86796  119.71143  145.81372  -80.00000  -81.85830  151.98242  152.43017  116.05110  115.59450
## [172]  144.64386  157.99209  152.71402  120.99300  145.58833   55.83662  159.05390  145.43811   32.68800
## [181]   32.67879   71.25228  153.38980  153.26580   73.45000  -69.69920  155.56720  153.52120  153.53760
## [190]  155.76360  154.34530  148.50350  149.99040  123.00390   34.18600  -81.10510   55.54613   55.54547
## [199]   55.53040  -86.40000  179.09921  179.12516 -176.48664 -176.48669 -176.48881  125.50000   32.88350
## [208]   39.23600  115.59400  -77.93170  145.58198   72.43150  -76.60830   32.68090   32.68440   96.87765
## [217]  152.71830  145.40914  145.70552  145.70190  145.76719  145.72023  145.75022  145.61942  145.72341
## [226]  145.63004  -86.88900  145.58005  145.56905  145.65842  145.65610  145.65793  145.59721  153.38810
## [235]  153.26920  -86.57990  152.30293  152.38175  152.28250   55.83000   55.82176   36.32800 -176.47949
## [244] -176.45685 -176.45694  145.45050  153.62830  153.52520  153.62831  153.52519  166.44206  -77.39630
## [253]  105.66810  105.66580  118.24362   55.86585  -70.05770  -87.01840   95.26880  153.38984  153.26605
## [262]  145.79122  145.75177  145.83218  145.58672   95.25900   95.25970  145.67677  145.81530  153.39260
## [271]  153.38340  153.26760  153.38342  153.39256  115.59460  -86.64170 -176.48620   35.55833   35.55100
## [280]   47.95000   35.55000   47.95000  153.26640  153.26530  153.26480  153.38809  153.26635  153.26527
## [289]  145.45101  134.61270  145.78762  145.81808   55.22000   55.22000  105.57552   55.46472 -176.48893
## [298]  120.47900  120.47900  120.48000   32.70000   79.80800   79.80800   79.81000  160.07777  156.98395
## [307]  152.41978  152.42750
## 
## $issues
##  [1] &quot;cdround&quot;                             &quot;cudc&quot;                               
##  [3] &quot;cdround,cudc&quot;                        &quot;incomis,inmafu&quot;                     
##  [5] &quot;&quot;                                    &quot;cum,gass84&quot;                         
##  [7] &quot;cdround,gass84,incomis,inmafu&quot;       &quot;cudc,gass84,gdativ,refuriiv&quot;        
##  [9] &quot;cdreps&quot;                              &quot;osiic&quot;                              
## [11] &quot;cdround,gass84&quot;                      &quot;gass84,incomis,inmafu&quot;              
## [13] &quot;gass84,osiic,colmafu&quot;                &quot;gass84&quot;                             
## [15] &quot;cdround,cudc,gass84,gdativ,refuriiv&quot; &quot;conti,cdround,gass84,osiic,inmafu&quot;  
## [17] &quot;cudc,gass84,osiic&quot;                  
## 
## $waterBody
##  [1] NA                                          &quot;North Pacific Ocean&quot;                      
##  [3] &quot;Celebes Sea&quot;                               &quot;South Pacific Ocean&quot;                      
##  [5] &quot;Flores Sea&quot;                                &quot;Pacific&quot;                                  
##  [7] &quot;Caribbean Sea&quot;                             &quot;Gulf of Mexico&quot;                           
##  [9] &quot;Atlantic Ocean&quot;                            &quot;Verde Island&quot;                             
## [11] &quot;La Caleta&quot;                                 &quot;Red Sea&quot;                                  
## [13] &quot;Carribean&quot;                                 &quot;Banda Sea&quot;                                
## [15] &quot;Indian Ocean&quot;                              &quot;IndianOcean&quot;                              
## [17] &quot;Laut Bali&quot;                                 &quot;Royal Caribbean&quot;                          
## [19] &quot;Laccadive Sea&quot;                             &quot;Baltimore, MD&quot;                            
## [21] &quot;Carribean Sea&quot;                             &quot;South China and Eastern Archipelagic Seas&quot;
## 
## $basisOfRecord
## [1] &quot;HUMAN_OBSERVATION&quot;  &quot;PRESERVED_SPECIMEN&quot; &quot;MATERIAL_SAMPLE&quot;   
## 
## $occurrenceStatus
## [1] &quot;PRESENT&quot;
## 
## $rightsHolder
##  [1] &quot;Nigel Marsh&quot;         &quot;Michal&quot;              &quot;Wasini Tour Guide&quot;   &quot;John Sear&quot;          
##  [5] &quot;顏水蛭&quot;              &quot;Victor HOYEAU&quot;       &quot;Daniela Kupschus&quot;    &quot;Sophie Duc&quot;         
##  [9] &quot;tracc&quot;               NA                    &quot;Jacek Pietruszewski&quot; &quot;calvin1976&quot;         
## [13] &quot;joseph_dibattista&quot;   &quot;kfa&quot;                 &quot;desertnaturalist&quot;    &quot;Matthew Bokach&quot;     
## [17] &quot;Josh Moloney&quot;        &quot;Peter&quot;               &quot;Zack&quot;                &quot;GF&quot;                 
## [21] &quot;Chen Zhi&quot;            &quot;warrencameron&quot;       &quot;Mark Rosenstein&quot;     &quot;hokoonwong&quot;         
## [25] &quot;Robin Laws-Wall&quot;     &quot;blackdogto&quot;          &quot;craigjhowe&quot;          &quot;Lesley Clements&quot;    
## [29] &quot;Adelma Hills&quot;        &quot;Albert Kang&quot;         &quot;Roxanne Lazarus&quot;     &quot;Cameron&quot;            
## [33] &quot;mwamlavya&quot;           &quot;Diveboard&quot;           &quot;Ian Shaw&quot;            &quot;Geoff Shuetrim&quot;     
## [37] &quot;nahpets&quot;             &quot;Mathew&quot;              &quot;Tony Strazzari&quot;      &quot;Francesco Ricciardi&quot;
## [41] &quot;Joachim Louis&quot;       &quot;João D&#39;Andretta&quot;     &quot;bja2800dk&quot;           &quot;Michael Long&quot;       
## [45] &quot;Geir Drange&quot;         &quot;David R&quot;             &quot;Christian Doedt&quot;     &quot;Carmelo López Abad&quot; 
## [49] &quot;cindyjay&quot;            &quot;RLS&quot;                 &quot;Ewout Knoester&quot;      &quot;Paolo Mazzei&quot;       
## [53] &quot;rowanwattpringle&quot;    &quot;jeyre&quot;               &quot;brudermann&quot;          &quot;Karen Willshaw&quot;     
## [57] &quot;ninjawil&quot;            &quot;gernotkunz&quot;          &quot;Richard Ling&quot;        &quot;SAIAB&quot;              
## [61] &quot;sea-kangaroo&quot;        &quot;tony rebelo&quot;        
## 
## $datasetName
## [1] &quot;iNaturalist research-grade observations&quot;                                                                                                                                                                                                
## [2] NA                                                                                                                                                                                                                                       
## [3] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands&quot;                                          
## [4] &quot;Diveboard - Scuba diving citizen science&quot;                                                                                                                                                                                               
## [5] &quot;Instituto Nacional de Investigação Pesqueira&quot;                                                                                                                                                                                           
## [6] &quot;NMNH Extant Biology&quot;                                                                                                                                                                                                                    
## [7] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009&quot;
## [8] &quot;Ocean Genome Legacy Collection&quot;                                                                                                                                                                                                         
## 
## $recordedBy
##   [1] &quot;Nigel Marsh&quot;                                                                                                                     
##   [2] &quot;Michal&quot;                                                                                                                          
##   [3] &quot;Wasini Tour Guide&quot;                                                                                                               
##   [4] &quot;John Sear&quot;                                                                                                                       
##   [5] &quot;顏水蛭&quot;                                                                                                                          
##   [6] &quot;Victor HOYEAU&quot;                                                                                                                   
##   [7] &quot;Daniela Kupschus&quot;                                                                                                                
##   [8] &quot;Sophie Duc&quot;                                                                                                                      
##   [9] &quot;tracc&quot;                                                                                                                           
##  [10] NA                                                                                                                                
##  [11] &quot;Jacek Pietruszewski&quot;                                                                                                             
##  [12] &quot;calvin1976&quot;                                                                                                                      
##  [13] &quot;joseph_dibattista&quot;                                                                                                               
##  [14] &quot;kfa&quot;                                                                                                                             
##  [15] &quot;Bernard Ludwig, Sophie Porcheron, Lucie Ludwig (CSAL)&quot;                                                                           
##  [16] &quot;desertnaturalist&quot;                                                                                                                
##  [17] &quot;Matthew Bokach&quot;                                                                                                                  
##  [18] &quot;Josh Moloney&quot;                                                                                                                    
##  [19] &quot;Peter&quot;                                                                                                                           
##  [20] &quot;Zack&quot;                                                                                                                            
##  [21] &quot;GF&quot;                                                                                                                              
##  [22] &quot;Chen Zhi&quot;                                                                                                                        
##  [23] &quot;warrencameron&quot;                                                                                                                   
##  [24] &quot;Mark Rosenstein&quot;                                                                                                                 
##  [25] &quot;hokoonwong&quot;                                                                                                                      
##  [26] &quot;Robin Laws-Wall&quot;                                                                                                                 
##  [27] &quot;blackdogto&quot;                                                                                                                      
##  [28] &quot;craigjhowe&quot;                                                                                                                      
##  [29] &quot;Lesley Clements&quot;                                                                                                                 
##  [30] &quot;Adelma Hills&quot;                                                                                                                    
##  [31] &quot;Albert Kang&quot;                                                                                                                     
##  [32] &quot;Diver initials CC&quot;                                                                                                               
##  [33] &quot;Diver initials TCW&quot;                                                                                                              
##  [34] &quot;Diver initials LMG&quot;                                                                                                              
##  [35] &quot;Roxanne Lazarus&quot;                                                                                                                 
##  [36] &quot;Diver initials JWM&quot;                                                                                                              
##  [37] &quot;Cameron&quot;                                                                                                                         
##  [38] &quot;mwamlavya&quot;                                                                                                                       
##  [39] &quot;Thomas Chardon&quot;                                                                                                                  
##  [40] &quot;Simão Elias Mupengo&quot;                                                                                                             
##  [41] &quot;Açúrcio Belmiro Cumbane&quot;                                                                                                         
##  [42] &quot;Ian Shaw&quot;                                                                                                                        
##  [43] &quot;539637721&quot;                                                                                                                       
##  [44] &quot;Geoff Shuetrim&quot;                                                                                                                  
##  [45] &quot;nahpets&quot;                                                                                                                         
##  [46] &quot;Diver initials VAB&quot;                                                                                                              
##  [47] &quot;Diver initials PMA&quot;                                                                                                              
##  [48] &quot;Diver initials RMW&quot;                                                                                                              
##  [49] &quot;Diver initials JPZ&quot;                                                                                                              
##  [50] &quot;Diver initials ARP&quot;                                                                                                              
##  [51] &quot;Diver initials KDG&quot;                                                                                                              
##  [52] &quot;Mathew&quot;                                                                                                                          
##  [53] &quot;Tony Strazzari&quot;                                                                                                                  
##  [54] &quot;Francesco Ricciardi&quot;                                                                                                             
##  [55] &quot;Joachim Louis&quot;                                                                                                                   
##  [56] &quot;João D&#39;Andretta&quot;                                                                                                                 
##  [57] &quot;Nicet J.B., Pinault M.,Wickel J., Bigot L.,C. Bourmaud,Mulochau T., Zubia M., Conand C., Poupin,M. Schleyer,Benon P., G. Malfait&quot;
##  [58] &quot;|RNMR, IRD, université de La Réunion&quot;                                                                                            
##  [59] &quot;Rangel de Jesus&quot;                                                                                                                 
##  [60] &quot;bja2800dk&quot;                                                                                                                       
##  [61] &quot;xavier, tristan (haustral plongée)&quot;                                                                                              
##  [62] &quot;Jorge Fichane Zibane&quot;                                                                                                            
##  [63] &quot;Michael Long&quot;                                                                                                                    
##  [64] &quot;Kenneth Foster&quot;                                                                                                                  
##  [65] &quot;Sebastien Rezzonico&quot;                                                                                                             
##  [66] &quot;Herculano Patricio&quot;                                                                                                              
##  [67] &quot;Isaias Jeckson Elija&quot;                                                                                                            
##  [68] &quot;Geir Drange&quot;                                                                                                                     
##  [69] &quot;J. Williams &amp; S. Planes&quot;                                                                                                         
##  [70] &quot;Nicet JB., Pinault M., Wickel J., Bigot L., Mulochau T., Zubia M., Conand C., Poupin J., Barrère A., Quod, J.P., Benon P&quot;        
##  [71] &quot;David R&quot;                                                                                                                         
##  [72] &quot;Diver initials JMA&quot;                                                                                                              
##  [73] &quot;Diver initials AEG&quot;                                                                                                              
##  [74] &quot;Diver initials JMM&quot;                                                                                                              
##  [75] &quot;Christian Doedt&quot;                                                                                                                 
##  [76] &quot;Diver initials KCL&quot;                                                                                                              
##  [77] &quot;Diver initials KS&quot;                                                                                                               
##  [78] &quot;Diver initials EMD&quot;                                                                                                              
##  [79] &quot;Marie&quot;                                                                                                                           
##  [80] &quot;Gil Zaqueu Maquene&quot;                                                                                                              
##  [81] &quot;Silva Carlos Mondlane&quot;                                                                                                           
##  [82] &quot;Diver initials EC&quot;                                                                                                               
##  [83] &quot;Sam Hansen&quot;                                                                                                                      
##  [84] &quot;Carmelo López Abad&quot;                                                                                                              
##  [85] &quot;cindyjay&quot;                                                                                                                        
##  [86] &quot;lisa hengelein&quot;                                                                                                                  
##  [87] &quot;JS&quot;                                                                                                                              
##  [88] &quot;JPS&quot;                                                                                                                             
##  [89] &quot;TPC&quot;                                                                                                                             
##  [90] &quot;Maguelone GRATEAU, Henri GRATEAU (ESSOR)&quot;                                                                                        
##  [91] &quot;David Bishop&quot;                                                                                                                    
##  [92] &quot;Ewout Knoester&quot;                                                                                                                  
##  [93] &quot;seastung&quot;                                                                                                                        
##  [94] &quot;Pieterjl&quot;                                                                                                                        
##  [95] &quot;angelique tourret (o sea bleu)&quot;                                                                                                  
##  [96] &quot;Diver initials KSM&quot;                                                                                                              
##  [97] &quot;Diver initials IDW&quot;                                                                                                              
##  [98] &quot;Paolo Mazzei&quot;                                                                                                                    
##  [99] &quot;Morgan&quot;                                                                                                                          
## [100] &quot;Jyore&quot;                                                                                                                           
## [101] &quot;IVS&quot;                                                                                                                             
## [102] &quot;Viriato José Mutelecanamba&quot;                                                                                                      
## [103] &quot;Christina Estrup&quot;                                                                                                                
## [104] &quot;RSS&quot;                                                                                                                             
## [105] &quot;Anne Hoggett&quot;                                                                                                                    
## [106] &quot;rowanwattpringle&quot;                                                                                                                
## [107] &quot;jeyre&quot;                                                                                                                           
## [108] &quot;Rowan Watt-Pringle&quot;                                                                                                              
## [109] &quot;Gaither, Michelle R.; Wagner, Daniel&quot;                                                                                            
## [110] &quot;NAD&quot;                                                                                                                             
## [111] &quot;brudermann&quot;                                                                                                                      
## [112] &quot;Breezy&quot;                                                                                                                          
## [113] &quot;WCB&quot;                                                                                                                             
## [114] &quot;GJE&quot;                                                                                                                             
## [115] &quot;RJE&quot;                                                                                                                             
## [116] &quot;GER&quot;                                                                                                                             
## [117] &quot;AJG&quot;                                                                                                                             
## [118] &quot;Ilya Bychkov&quot;                                                                                                                    
## [119] &quot;Alf&quot;                                                                                                                             
## [120] &quot;Sean Shrum&quot;                                                                                                                      
## [121] &quot;Diver initials MON&quot;                                                                                                              
## [122] &quot;Joao Sarmento&quot;                                                                                                                   
## [123] &quot;Cam&quot;                                                                                                                             
## [124] &quot;Shiko&quot;                                                                                                                           
## [125] &quot;Ryan Lee&quot;                                                                                                                        
## [126] &quot;Haydee Osorio&quot;                                                                                                                   
## [127] &quot;Steven Lawson&quot;                                                                                                                   
## [128] &quot;Bruno Amim&quot;                                                                                                                      
## [129] &quot;Anonymous&quot;                                                                                                                       
## [130] &quot;Elodie&quot;                                                                                                                          
## [131] &quot;Sea Escapes&quot;                                                                                                                     
## [132] &quot;Karen Willshaw&quot;                                                                                                                  
## [133] &quot;Diver initials SCM&quot;                                                                                                              
## [134] &quot;Diver initials MF&quot;                                                                                                               
## [135] &quot;Diver initials MKM&quot;                                                                                                              
## [136] &quot;INCONNU (Non renseigné)&quot;                                                                                                         
## [137] &quot;João Luís Dramane&quot;                                                                                                               
## [138] &quot;Diver initials KMO&quot;                                                                                                              
## [139] &quot;Diver initials JLG&quot;                                                                                                              
## [140] &quot;TJA&quot;                                                                                                                             
## [141] &quot;AS&quot;                                                                                                                              
## [142] &quot;eric AMIEL (BioObs)&quot;                                                                                                             
## [143] &quot;Rémi Forget&quot;                                                                                                                     
## [144] &quot;MLD&quot;                                                                                                                             
## [145] &quot;ninjawil&quot;                                                                                                                        
## [146] &quot;gernotkunz&quot;                                                                                                                      
## [147] &quot;Mike&quot;                                                                                                                            
## [148] &quot;JWG&quot;                                                                                                                             
## [149] &quot;AR&quot;                                                                                                                              
## [150] &quot;Richard Ling&quot;                                                                                                                    
## [151] &quot;TRD&quot;                                                                                                                             
## [152] &quot;T. Hunter&quot;                                                                                                                       
## [153] &quot;A.D. Connell&quot;                                                                                                                    
## [154] &quot;Serge Planes, Nicolas Hubert, Henrich Bruggemann&quot;                                                                                
## [155] &quot;JRA&quot;                                                                                                                             
## [156] &quot;MS&quot;                                                                                                                              
## [157] &quot;Lynda Curtis&quot;                                                                                                                    
## [158] &quot;Noel  Wangunu&quot;                                                                                                                   
## [159] &quot;sea-kangaroo&quot;                                                                                                                    
## [160] &quot;Daniel Yanke&quot;                                                                                                                    
## [161] &quot;tony rebelo&quot;                                                                                                                     
## [162] &quot;Ribanataake Awira&quot;                                                                                                               
## 
## $depth
##  [1]     NA 18.000 20.700  5.450 10.600 20.000 11.745 13.500 16.500 15.400 11.400 23.700 20.600 24.400
## [15] 14.200 24.850  9.700  9.200  8.650 12.800 14.650 12.700  9.300  4.800 20.150 14.550 23.400 21.300
## [29] 21.350 12.250 21.000 16.200 15.600 21.900 22.650  9.100 12.540  8.750  1.250 23.000 19.200 18.950
## [43]  6.850  6.350 15.950 17.800  9.000  8.500 13.000  9.400  9.500 22.200 10.770  9.900  9.600 15.000
## [57] 10.000 22.000 21.950 11.200 21.200 21.500 19.400  5.300  8.800 17.050 11.600 11.000  5.500  7.200
## [71] 21.600 19.500  8.990  5.330 12.000 14.480  6.000  5.000  8.735  9.070  7.000 12.500  8.000  4.900
## [85]  6.095  2.285 25.700 27.000  7.470 19.000 33.000  4.420  8.840 13.715  3.000  1.000  2.000 14.000
## [99] 17.000
## 
## $locality
##  [1] NA                                                                                                      
##  [2] &quot;west of Tamina, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan&quot;            
##  [3] &quot;off Yakomo, China, Oshima-gun, Okinoerabu-jima island, Amami Islands, Kagoshima, Japan&quot;                
##  [4] &quot;Hanging Gardens&quot;                                                                                       
##  [5] &quot;Govuro Mar Aberto&quot;                                                                                     
##  [6] &quot;Jangamo Estuário&quot;                                                                                      
##  [7] &quot;Curieuse Island&quot;                                                                                       
##  [8] &quot;Japan, Ogasawara Is., Kazan Is. (Volcano Is.), Kita-Iwo-jima I., northeastern coast&quot;                   
##  [9] &quot;Maxixe Estuário&quot;                                                                                       
## [10] &quot;Inhassoro MAI&quot;                                                                                         
## [11] &quot;3 Pulgul St, Urangan QLD 4655, Australia&quot;                                                              
## [12] &quot;Urasoko, Kuchierabujima,Yakushima, Kumage-gun, Kuchierabu-jima island, Osumi Islands, Kagoshima, Japan&quot;
## [13] &quot;Crystal Rock, Komodo National Park&quot;                                                                    
## [14] &quot;Morrumbene Estuário&quot;                                                                                   
## [15] &quot;Inhassoro MAII&quot;                                                                                        
## [16] &quot;Wallis and Futuna, Futuna Island, exposed rocks off north point, exposed rocky reef and channels.&quot;     
## [17] &quot;Futuna, Wallis and Futuna, Futuna Island, exposed rocks of&quot;                                            
## [18] &quot;Aquarium&quot;                                                                                              
## [19] &quot;Vilankulo MA II&quot;                                                                                       
## [20] &quot;Sodwana Bay, Bikini South&quot;                                                                             
## [21] &quot;Sodwana Bay, Caves &amp; Overhangs&quot;                                                                        
## [22] &quot;Bougainville Reef Lagoon East&quot;                                                                         
## [23] &quot;Pulau Kasiui SW&quot;                                                                                       
## [24] &quot;Kanar Yapas&quot;                                                                                           
## [25] &quot;Umabana, Yonaguni, Yonaguni, Yaeyama-gun, Yonaguni-jima island, Yaeyama Islands, Okinawa, Japan&quot;       
## [26] &quot;Claraboyas Reef&quot;                                                                                       
## [27] &quot;Bikini&quot;                                                                                                
## [28] &quot;Sodwana Bay&quot;                                                                                           
## [29] &quot;Sunkist Reef&quot;                                                                                          
## [30] &quot;Rock Key (Reef)&quot;                                                                                       
## [31] &quot;Paradise House reef&quot;                                                                                   
## [32] &quot;Vilankulo MA I&quot;                                                                                        
## [33] &quot;The Atoll&quot;                                                                                             
## [34] &quot;Wreck 1&quot;                                                                                               
## [35] &quot;Lizard Island, Queensland&quot;                                                                             
## [36] &quot;Sodwana Bay, Bikini&quot;                                                                                   
## [37] &quot;Chagos Archipelago, Great Chagos Bank&quot;                                                                 
## [38] &quot;Elbow Cave Mooring N Solitary Is&quot;                                                                      
## [39] &quot;South Boulder Wall&quot;                                                                                    
## [40] &quot;Los Paisanitos&quot;                                                                                        
## [41] &quot;Cato East&quot;                                                                                             
## [42] &quot;Saumarez SW Islet&quot;                                                                                     
## [43] &quot;Saumarez SW reef cay&quot;                                                                                  
## [44] &quot;Kenn Reef rubble&quot;                                                                                      
## [45] &quot;Frederick Ridge Rock&quot;                                                                                  
## [46] &quot;Flinders Reef Bommie&quot;                                                                                  
## [47] &quot;Chilcott Islet SW inner reef&quot;                                                                          
## [48] &quot;Surge Crest East&quot;                                                                                      
## [49] &quot;Temple&quot;                                                                                                
## [50] &quot;Playing Field&quot;                                                                                         
## [51] &quot;40 Foot Wall&quot;                                                                                          
## [52] &quot;Dili Rock East&quot;                                                                                        
## [53] &quot;Steps&quot;                                                                                                 
## [54] &quot;Sistersreef&quot;                                                                                           
## [55] &quot;Coral Garden&quot;                                                                                          
## [56] &quot;Coco Cay&quot;                                                                                              
## [57] &quot;Rangali Madivaru&quot;                                                                                      
## [58] &quot;National Aquarium&quot;                                                                                     
## [59] &quot;1, Sodwana Main Road&quot;                                                                                  
## [60] &quot;Bikini, Sodwana&quot;                                                                                       
## [61] &quot;Cerebros&quot;                                                                                              
## [62] &quot;Anemone Bay N Solitary Is&quot;                                                                             
## [63] &quot;Manta Mooring NW Solitary Is&quot;                                                                          
## [64] &quot;Overheat Reef&quot;                                                                                         
## [65] &quot;Gazelas Mar Aberto&quot;                                                                                    
## [66] &quot;Turtle Beach&quot;                                                                                          
## [67] &quot;Anemone mooring Julien Rocks&quot;                                                                          
## [68] &quot;Shag Rock&quot;                                                                                             
## [69] &quot;Flying Fish Cove Boat Ramp&quot;                                                                            
## [70] &quot;Smith Point&quot;                                                                                           
## [71] &quot;Antilla Wreck&quot;                                                                                         
## [72] &quot;Columbia&quot;                                                                                              
## [73] &quot;Lhok Weng&quot;                                                                                             
## [74] &quot;rubiah island&quot;                                                                                         
## [75] &quot;South End Nth Solitary&quot;                                                                                
## [76] &quot;Fish Soup&quot;                                                                                             
## [77] &quot;Cleaner Station&quot;                                                                                       
## [78] &quot;Opposite Mimpi Resort&quot;                                                                                 
## [79] &quot;Light House&quot;                                                                                           
## [80] &quot;Pomene&quot;                                                                                                
## [81] &quot;Ouest, Nosy Be, Nosy-Kivindry&quot;                                                                         
## [82] &quot;Antananarivo, Ouest, Nosy Be, Nosy-Kivindry&quot;                                                           
## [83] &quot;North Boulder Wall S Solitary Is&quot;                                                                      
## [84] &quot;Buchanans Wall&quot;                                                                                        
## [85] &quot;The Gantry S Solitary Is&quot;                                                                              
## [86] &quot;Lizard Island Group&quot;                                                                                   
## [87] &quot;Ouest, St Gilles, Canyon&quot;                                                                              
## [88] &quot;Manila, 257 Quirino ave. Tambo P que&quot;                                                                  
## [89] &quot;Manila, Philippines&quot;                                                                                   
## [90] &quot;Manila&quot;                                                                                                
## [91] &quot;Kochchikade, NO 331 Sarath Wattha&quot;                                                                     
## [92] &quot;Kochchikade, Sri Lanka&quot;                                                                                
## [93] &quot;Western&quot;                                                                                               
## 
## $habitat
##  [1] NA                                             &quot;Forereef : ROB : Rock/Boulder&quot;               
##  [3] &quot;Forereef : SAG : Spur and Groove&quot;             &quot;Protected Slope : AGR : Aggregate Reef&quot;      
##  [5] &quot;Forereef : AGR : Aggregate Reef&quot;              &quot;Forereef : PSC : Pavement with Sand Channels&quot;
##  [7] &quot;Forereef : PAV : Pavement&quot;                    &quot;Forereef : PPR : Pavement with Patch Reefs&quot;  
##  [9] &quot;Forereef : RRB : Reef Rubble&quot;                 &quot;Coral Reef&quot;                                  
## [11] &quot;Forereef : MIX : Mixed Habitats&quot;              &quot;Forereef : UNK : Unknown&quot;                    
## [13] &quot;Shallow coral reef : Forereef&quot;</code></pre>
</div>
<div id="problemas-não-reportados" class="section level2" number="0.3">
<h2 number="3.3"><span class="header-section-number">3.3</span> Problemas não reportados</h2>
<p>Agora iniciamos o processo de checagem mais fina que não é realizada pelo algoritmo, por apresenta especificidades que vão além de sua programação. Podemos iniciar checando a distribuição das ocorrências em relação às regiões oceanográficas indicadas nos dados (<code>waterBody</code>).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># investigar niveis suspeitos</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(waterBody) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code></pre></div>
<pre><code>##  [1] NA                                          &quot;North Pacific Ocean&quot;                      
##  [3] &quot;Celebes Sea&quot;                               &quot;South Pacific Ocean&quot;                      
##  [5] &quot;Flores Sea&quot;                                &quot;Pacific&quot;                                  
##  [7] &quot;Caribbean Sea&quot;                             &quot;Gulf of Mexico&quot;                           
##  [9] &quot;Atlantic Ocean&quot;                            &quot;Verde Island&quot;                             
## [11] &quot;La Caleta&quot;                                 &quot;Red Sea&quot;                                  
## [13] &quot;Carribean&quot;                                 &quot;Banda Sea&quot;                                
## [15] &quot;Indian Ocean&quot;                              &quot;IndianOcean&quot;                              
## [17] &quot;Laut Bali&quot;                                 &quot;Royal Caribbean&quot;                          
## [19] &quot;Laccadive Sea&quot;                             &quot;Baltimore, MD&quot;                            
## [21] &quot;Carribean Sea&quot;                             &quot;South China and Eastern Archipelagic Seas&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># waterBody</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(waterBody) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">occ =</span> <span class="fu">length</span>(scientificName)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(occ, <span class="at">y=</span>waterBody)) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>) </span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Aparentemente, esta espécie tem sido reportada no mundo todo. Com o sucesso da animação <em>Procurando Nemo</em>, já temos uma ideia de que a <strong>Dori</strong> tem ocorrência nas águas Australianas, mas podemos acessar bancos de dados especializados para checar estas informações. No caso de peixes (Osteichthyes e Chondrichthyes) o <a href="https://fishbase.org"><em>FishBase</em></a> é a fonte mais atualizada de informações deste grupo. Depois desta confirmação, podemos suspeitar das ocorrências indicadas no Atlântico e, o tratamento mais rigoroso é a exclusão de qualquer ocorrência suspeita.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fonte das regioes erradas</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Atlantic Ocean&quot;</span>, <span class="st">&quot;Carribean&quot;</span>, <span class="st">&quot;Royal Caribbean&quot;</span>, <span class="st">&quot;Carribean Sea&quot;</span>, <span class="st">&quot;Bonaire&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(datasetName)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   datasetName                             
##   &lt;chr&gt;                                   
## 1 Diveboard - Scuba diving citizen science</code></pre>
<p>Alguma característica destas ocorrências do Atlântico podem dar pistas de como continuar filtrando os resultados. Neste caso, abaixo podemos ver que, ao investigarmos um programa de ciência específico de identificação realizada por mergulhadores amadores, notamos que este concentra a maior parte das suspeitas. Assim, é melhor ser conservador e remover todas as ocorrências associadas a tal programa.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 25 ocorrencias</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(datasetName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Diveboard - Scuba diving citizen science&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 25 x 14
##    scientificName     acceptedScientificN… decimalLatitude decimalLongitude issues waterBody  basisOfRecord
##    &lt;chr&gt;              &lt;chr&gt;                          &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;        
##  1 Paracanthurus hep… Paracanthurus hepat…            4.11            119.  cdreps Celebes S… HUMAN_OBSERV…
##  2 Paracanthurus hep… Paracanthurus hepat…           -8.4             119.  cdreps Flores Sea HUMAN_OBSERV…
##  3 Paracanthurus hep… Paracanthurus hepat…           16.1             -61.8 cdreps Caribbean… HUMAN_OBSERV…
##  4 Paracanthurus hep… Paracanthurus hepat…           23.2             -81.2 cdreps Gulf of M… HUMAN_OBSERV…
##  5 Paracanthurus hep… Paracanthurus hepat…           26.2             -80   cdreps Atlantic … HUMAN_OBSERV…
##  6 Paracanthurus hep… Paracanthurus hepat…           24.5             -81.9 cdreps Gulf of M… HUMAN_OBSERV…
##  7 Paracanthurus hep… Paracanthurus hepat…           13.5             121.  cdreps Verde Isl… HUMAN_OBSERV…
##  8 Paracanthurus hep… Paracanthurus hepat…           18.4             -69.7 cdreps La Caleta  HUMAN_OBSERV…
##  9 Paracanthurus hep… Paracanthurus hepat…           27.5              34.2 cdreps Red Sea    HUMAN_OBSERV…
## 10 Paracanthurus hep… Paracanthurus hepat…           19.3             -81.1 cdreps Caribbean… HUMAN_OBSERV…
## # … with 15 more rows, and 7 more variables: occurrenceStatus &lt;chr&gt;, rightsHolder &lt;chr&gt;,
## #   datasetName &lt;chr&gt;, recordedBy &lt;chr&gt;, depth &lt;dbl&gt;, locality &lt;chr&gt;, habitat &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar todas do dataset suspeito</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>dori_gbif_ok <span class="ot">&lt;-</span> dori_gbif1 <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>datasetName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Diveboard - Scuba diving citizen science&quot;</span>))</span></code></pre></div>
<p>Agora não vemos mais nenhuma ocorrência no Atlântico!</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapdata)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">&#39;world&#39;</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># checar pontos</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dori_gbif_ok, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Podemos usar a profundidade como outro critério, pois esta espécie é associada apenas a recifes rasos segundo o <strong>FishBase</strong>. E parece tudo ok.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar profundidade</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>dori_gbif_ok <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> depth, <span class="at">fill =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() </span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<hr />
<div id="obis" class="section level3" number="0.3.1">
<h3 number="3.3.1"><span class="header-section-number">3.3.1</span> <strong>OBIS</strong></h3>
<p>Agora vamos fazer os mesmos procedimentos com os dados do <strong>OBIS</strong>, utilizando o pacote <code>robis</code> e a função <code>occurrence</code> deste pacote.</p>
<ol style="list-style-type: decimal">
<li>Baixar as ocorrências</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## OBIS</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>dori_obis <span class="ot">&lt;-</span> robis<span class="sc">::</span><span class="fu">occurrence</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Checar os dados</li>
</ol>
<p>Temos variáveis com os mesmos nomes, pois ambos usam o sistema <code>DwC</code>, mas os problemas reportados neste caso são indicados na coluna <code>flags</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar dados</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dori_obis)</span></code></pre></div>
<pre><code>##   [1] &quot;rightsHolder&quot;                        &quot;infraphylum&quot;                        
##   [3] &quot;country&quot;                             &quot;date_year&quot;                          
##   [5] &quot;scientificNameID&quot;                    &quot;scientificName&quot;                     
##   [7] &quot;dropped&quot;                             &quot;aphiaID&quot;                            
##   [9] &quot;decimalLatitude&quot;                     &quot;subclassid&quot;                         
##  [11] &quot;type&quot;                                &quot;infraphylumid&quot;                      
##  [13] &quot;phylumid&quot;                            &quot;familyid&quot;                           
##  [15] &quot;catalogNumber&quot;                       &quot;occurrenceStatus&quot;                   
##  [17] &quot;basisOfRecord&quot;                       &quot;terrestrial&quot;                        
##  [19] &quot;id&quot;                                  &quot;order&quot;                              
##  [21] &quot;recordNumber&quot;                        &quot;dataset_id&quot;                         
##  [23] &quot;decimalLongitude&quot;                    &quot;collectionCode&quot;                     
##  [25] &quot;date_end&quot;                            &quot;speciesid&quot;                          
##  [27] &quot;occurrenceID&quot;                        &quot;license&quot;                            
##  [29] &quot;date_start&quot;                          &quot;genus&quot;                              
##  [31] &quot;collectionID&quot;                        &quot;eventDate&quot;                          
##  [33] &quot;brackish&quot;                            &quot;coordinateUncertaintyInMeters&quot;      
##  [35] &quot;absence&quot;                             &quot;genusid&quot;                            
##  [37] &quot;originalScientificName&quot;              &quot;marine&quot;                             
##  [39] &quot;subphylumid&quot;                         &quot;institutionCode&quot;                    
##  [41] &quot;wrims&quot;                               &quot;date_mid&quot;                           
##  [43] &quot;class&quot;                               &quot;orderid&quot;                            
##  [45] &quot;kingdom&quot;                             &quot;recordedBy&quot;                         
##  [47] &quot;classid&quot;                             &quot;phylum&quot;                             
##  [49] &quot;species&quot;                             &quot;subphylum&quot;                          
##  [51] &quot;subclass&quot;                            &quot;family&quot;                             
##  [53] &quot;kingdomid&quot;                           &quot;node_id&quot;                            
##  [55] &quot;flags&quot;                               &quot;sss&quot;                                
##  [57] &quot;shoredistance&quot;                       &quot;sst&quot;                                
##  [59] &quot;bathymetry&quot;                          &quot;year&quot;                               
##  [61] &quot;individualCount&quot;                     &quot;language&quot;                           
##  [63] &quot;day&quot;                                 &quot;month&quot;                              
##  [65] &quot;samplingProtocol&quot;                    &quot;eventID&quot;                            
##  [67] &quot;scientificNameAuthorship&quot;            &quot;samplingEffort&quot;                     
##  [69] &quot;taxonRank&quot;                           &quot;countryCode&quot;                        
##  [71] &quot;footprintWKT&quot;                        &quot;geodeticDatum&quot;                      
##  [73] &quot;waterBody&quot;                           &quot;specificEpithet&quot;                    
##  [75] &quot;startDayOfYear&quot;                      &quot;datasetID&quot;                          
##  [77] &quot;habitat&quot;                             &quot;references&quot;                         
##  [79] &quot;institutionID&quot;                       &quot;modified&quot;                           
##  [81] &quot;maximumDepthInMeters&quot;                &quot;verbatimEventDate&quot;                  
##  [83] &quot;sampleSizeUnit&quot;                      &quot;georeferencedBy&quot;                    
##  [85] &quot;maximumDistanceAboveSurfaceInMeters&quot; &quot;island&quot;                             
##  [87] &quot;stateProvince&quot;                       &quot;ownerInstitutionCode&quot;               
##  [89] &quot;islandGroup&quot;                         &quot;taxonID&quot;                            
##  [91] &quot;minimumDepthInMeters&quot;                &quot;vernacularName&quot;                     
##  [93] &quot;identifiedBy&quot;                        &quot;dataGeneralizations&quot;                
##  [95] &quot;georeferenceProtocol&quot;                &quot;datasetName&quot;                        
##  [97] &quot;verbatimDepth&quot;                       &quot;depth&quot;                              
##  [99] &quot;occurrenceRemarks&quot;                   &quot;sampleSizeValue&quot;                    
## [101] &quot;associatedReferences&quot;                &quot;superclass&quot;                         
## [103] &quot;superclassid&quot;                        &quot;suborderid&quot;                         
## [105] &quot;dateIdentified&quot;                      &quot;bibliographicCitation&quot;              
## [107] &quot;suborder&quot;                            &quot;dynamicProperties&quot;                  
## [109] &quot;preparations&quot;                        &quot;locality&quot;                           
## [111] &quot;county&quot;                              &quot;fieldNumber&quot;                        
## [113] &quot;endDayOfYear&quot;                        &quot;footprintSRS&quot;                       
## [115] &quot;organismQuantity&quot;                    &quot;organismQuantityType&quot;               
## [117] &quot;coordinatePrecision&quot;                 &quot;georeferenceRemarks&quot;                
## [119] &quot;minimumElevationInMeters&quot;            &quot;maximumElevationInMeters&quot;           
## [121] &quot;continent&quot;                           &quot;eventTime&quot;                          
## [123] &quot;parentEventID&quot;                       &quot;locationID&quot;                         
## [125] &quot;municipality&quot;                        &quot;organismID&quot;                         
## [127] &quot;eventRemarks&quot;                        &quot;locationRemarks&quot;                    
## [129] &quot;associatedSequences&quot;                 &quot;lifeStage&quot;                          
## [131] &quot;otherCatalogNumbers&quot;                 &quot;typeStatus&quot;                         
## [133] &quot;verbatimLatitude&quot;                    &quot;higherClassification&quot;               
## [135] &quot;verbatimLongitude&quot;                   &quot;sex&quot;                                
## [137] &quot;georeferencedDate&quot;                   &quot;higherGeography&quot;                    
## [139] &quot;namePublishedInID&quot;                   &quot;disposition&quot;                        
## [141] &quot;originalNameUsage&quot;                   &quot;accessRights&quot;                       
## [143] &quot;associatedMedia&quot;                     &quot;verbatimCoordinates&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="ot">&lt;-</span> dori_obis <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, decimalLatitude, decimalLongitude, bathymetry,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>         flags, waterBody, basisOfRecord, occurrenceStatus, rightsHolder, </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>         datasetName, recordedBy, depth, locality, habitat) <span class="sc">%&gt;%</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># check problemas reportados (flags)</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(flags)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 1
##   flags                     
##   &lt;chr&gt;                     
## 1 no_depth,on_land          
## 2 no_depth                  
## 3 &lt;NA&gt;                      
## 4 on_land                   
## 5 depth_exceeds_bath        
## 6 depth_exceeds_bath,on_land
## 7 on_land,depth_exceeds_bath</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check NA em datasetName</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">is.na</span>(datasetName)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(waterBody)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 1
##    waterBody    
##    &lt;chr&gt;        
##  1 Pacific Ocean
##  2 &lt;NA&gt;         
##  3 Africa       
##  4 North America
##  5 Asia         
##  6 Indian       
##  7 indien       
##  8 Pacific      
##  9 Oceania      
## 10 atlantique</code></pre>
<p>Aqui usamos as <code>flags</code> para filtrar ocorrências em terra, além de remover dados sem nome de <em>dataset</em> (não temos como checar a origem adequadamente, então podemos tratar como suspeitos), filtrar ocorrências no Atlântico e verificar a profundidade reportada.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># depth ok</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;North America Atlantic&quot;</span>, <span class="st">&quot;atlantique&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> depth, <span class="at">fill =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() </span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checar niveis</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;North America Atlantic&quot;</span>, <span class="st">&quot;atlantique&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(., unique)</span></code></pre></div>
<pre><code>## $scientificName
## [1] &quot;Paracanthurus hepatus&quot;
## 
## $decimalLatitude
##   [1]  15.2612250  15.0777326  14.9315443  24.7975000   0.1868800   0.1915569  14.8471569  18.1697050
##   [9]  13.2303711  15.2735300   0.1902900  18.0501780  14.8436598  15.2812907   0.1882000   7.1170001
##  [17] -14.2790305  15.0695718  14.2460003  15.1052253   0.2065500  14.2014619  15.2688078   0.1872420
##  [25]  15.0865944  15.0033074  15.1110520   0.1949556  15.0520660  15.2829550  14.9524648  20.9260006
##  [33]  15.1924560  15.0912826  14.1692040  14.1088820  15.1760200   0.7982430 -14.2738570  18.1449870
##  [41]  14.8649172 -14.1518635  -8.4156407  14.9276330  15.1138340  16.7184000  13.2823530  15.1163631
##  [49] -14.2240685  14.9249980   2.1641140  15.2766544  15.2748410   0.1903102  18.0939460  14.8389450
##  [57]   0.8208993  15.2542167  15.2567141  14.9349439  -8.4180000   0.1908500  15.1342100 -18.1486000
##  [65]   6.3842680 -14.2413730  15.2688363   0.1970000 -11.6505560  17.5869300  15.0556089   0.8224659
##  [73] -14.2785729  -3.7833333  15.2756939  -8.4465079  18.0907210 -17.1836910  15.2698445   0.1907412
##  [81]  15.2751892  16.7105020  15.2559710  18.1496535  15.0109170  18.8112216   6.3824613  14.8651780
##  [89] -14.2732544   0.1931100  -8.6047191   0.1989000   0.1954804  -8.3627887  18.0851080  17.6075300
##  [97] -14.2852098  19.6758593  15.1106289  18.0495721  17.5919243  -6.0790000
## 
## $decimalLongitude
##   [1]  145.82889  145.65842  145.63004  141.29083 -176.46176 -176.48886  145.56905  145.79179  144.64385
##  [10]  145.79122 -176.45685  145.70588  145.56591  145.80070 -176.48273   79.80800 -170.54739  145.65610
##  [19]  120.47900  145.72023 -176.47949  145.26090  145.83218 -176.46102  145.65793  145.67423  145.70275
##  [28] -176.48664  145.65608  145.80272  145.61942 -156.45300  145.70396  145.75022  145.28545  145.16840
##  [37]  145.78762 -176.62003 -169.49334  145.75369  145.58005 -169.61060  127.31111  145.63037  145.69897
##  [46]  145.77638  144.76383  145.69629 -169.51954  145.64574  118.64584  145.82731  145.79259 -176.45731
##  [55]  145.74479  145.53007 -176.62671  145.75177  145.81463  145.65172  127.30900 -176.48893  145.67886
##  [64]  178.37900 -162.46472 -170.67885  145.83191 -176.48620   43.25722  145.81808  145.59720 -176.62678
##  [73] -170.54882  128.12500  145.79354  127.32029  145.76129  146.29102  145.78511 -176.48881  145.82971
##  [82]  145.76719  145.72341  145.81155  145.58553  145.67677 -162.42674  145.56811 -170.50510 -176.45694
##  [91]  125.21931 -176.48500 -176.48669  127.10333  145.72653  145.81530 -170.54548  145.40914  145.70190
## [100]  145.70552  145.81372  106.83700
## 
## $bathymetry
##  [1]   35.00   75.00  -17.00   -3.00   33.00  266.00   91.00    1.00  181.00   -4.00  264.00   47.00
## [13]  -61.00 -109.00   -1.00   15.00  -10.00  292.00   -2.00  122.00   52.00  -16.00  -15.00  -42.00
## [25]  -28.00   17.00   29.00    7.00  141.00  -27.00  170.00   -7.00  -26.00   56.00  111.00   28.00
## [37]  132.00   55.00   63.00  -72.00  -12.00   26.00  322.00    3.00  -19.00   88.00  -37.00   14.00
## [49]    2.00   38.00  -66.00  151.00   -8.00  -13.00    3.12  -52.00   19.00   96.00  -71.00  218.00
## [61]  126.00    9.00
## 
## $flags
## [1] NA                   &quot;no_depth&quot;           &quot;depth_exceeds_bath&quot;
## 
## $waterBody
## [1] &quot;North Pacific Ocean&quot;                       &quot;Pacific Ocean&quot;                            
## [3] &quot;Indian Ocean&quot;                              &quot;South Pacific Ocean&quot;                      
## [5] &quot;South China and Eastern Archipelagic Seas&quot; NA                                         
## [7] &quot;Coral Sea&quot;                                
## 
## $basisOfRecord
## [1] &quot;HumanObservation&quot;  &quot;PreservedSpecimen&quot;
## 
## $occurrenceStatus
## [1] &quot;present&quot; NA        &quot;Present&quot;
## 
## $rightsHolder
## [1] NA                             &quot;Bernice Pauahi Bishop Museum&quot; &quot;Canadian Museum of Nature&quot;   
## 
## $datasetName
## [1] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands&quot;                                          
## [2] &quot;Asia-Pacific Dataset&quot;                                                                                                                                                                                                                   
## [3] &quot;NOAA Pacific Islands Fisheries Science Center, Ecosystem Science Division Coral Reef Ecosystem Program, Rapid Ecological Assessments of Fish Belt Transect Surveys (BLT) at Coral Reef Sites across the Pacific Ocean from 2000 to 2009&quot;
## [4] &quot;Ocean Genome Legacy Collection&quot;                                                                                                                                                                                                         
## [5] &quot;Bishop Museum Fish Specimens&quot;                                                                                                                                                                                                           
## [6] &quot;Fish&quot;                                                                                                                                                                                                                                   
## [7] &quot;Fish collection of National Museum of Nature and Science&quot;                                                                                                                                                                               
## [8] &quot;Pacific Reef Assessment and Monitoring Program: Rapid Ecological Assessments of Fish Large-Area Stationary Point Count Surveys (SPC) at Coral Reef Sites across the Pacific Ocean from 2000 to 2007&quot;                                    
## 
## $recordedBy
##  [1] &quot;Diver initials KSM&quot;  &quot;Diver initials EMD&quot;  &quot;Diver initials VAB&quot;  NA                   
##  [5] &quot;Diver initials TCW&quot;  &quot;Diver initials LMG&quot;  &quot;Diver initials MF&quot;   &quot;Diver initials PMA&quot; 
##  [9] &quot;Diver initials KMO&quot;  &quot;Diver initials RMW&quot;  &quot;Diver initials EC&quot;   &quot;Diver initials IDW&quot; 
## [13] &quot;Diver initials MKM&quot;  &quot;Diver initials SCM&quot;  &quot;Diver initials JLG&quot;  &quot;Diver initials KDG&quot; 
## [17] &quot;Diver initials MON&quot;  &quot;Diver initials JMM&quot;  &quot;Diver initials JPZ&quot;  &quot;Diver initials KCL&quot; 
## [21] &quot;Diver initials KS&quot;   &quot;Diver initials CC&quot;   &quot;Diver initials AEG&quot;  &quot;Diver initials JMA&quot; 
## [25] &quot;Diver initials JWM&quot;  &quot;Youngman, Philip M.&quot; &quot;Diver initials ARP&quot;  &quot;Jamie Hopkins&quot;      
## [29] &quot;Diver initials BDS&quot; 
## 
## $depth
##  [1] 15.60 13.00 11.00    NA 20.70  6.35 23.70 12.00 10.00 19.00 21.30 22.00 21.00 11.20 23.00 20.00 21.60
## [18] 16.20  7.00 12.80 15.40 27.00 11.60  4.80 25.70  9.30 24.85 15.00  5.45  9.10 14.20 17.80  2.70 13.50
## [35] 21.90 22.65  9.70 11.40  8.80  9.00 20.15  5.00  9.20 18.95 23.40  7.20  3.00  5.50 17.05  4.60  1.80
## [52] 10.60 14.00  9.40 19.40  9.60  6.85  8.65 17.00 15.95  8.50 19.20 18.00  5.30 10.15 20.60 21.20 21.50
## [69] 12.70 12.50 21.95 14.55  9.90 14.65 22.20  3.10 21.35  9.75 24.40 12.25  9.50 16.50 19.50
## 
## $locality
## [1] NA                                                               
## [2] &quot;East of Kangokuiwa, Io-sima&quot;                                    
## [3] &quot;Kochchikade, Sri Lanka&quot;                                         
## [4] &quot;Manila, Philippines&quot;                                            
## [5] &quot;the lagoon in Tanjung Duwata&quot;                                   
## [6] &quot;Viti Levu Island; W of Rat-Tail Passage&quot;                        
## [7] &quot;South Indian Ocean, 700 metres north of Hantsambu, off Itsandra&quot;
## [8] &quot;Indoneshia Ambon I. S coast Latsuhalat&quot;                         
## [9] &quot;Flora Reef, Coral Sea&quot;                                          
## 
## $habitat
##  [1] &quot;Forereef : SAG : Spur and Groove&quot;                &quot;Forereef : PAV : Pavement&quot;                      
##  [3] NA                                                &quot;Forereef : ROB : Rock/Boulder&quot;                  
##  [5] &quot;Forereef : AGR : Aggregate Reef&quot;                 &quot;Forereef : UNK : Unknown&quot;                       
##  [7] &quot;Shallow coral reef : Forereef&quot;                   &quot;Forereef : MIX : Mixed Habitats&quot;                
##  [9] &quot;Forereef : RRB : Reef Rubble&quot;                    &quot;Forereef : PPR : Pavement with Patch Reefs&quot;     
## [11] &quot;Forereef : PSC : Pavement with Sand Channels&quot;    &quot;Protected Slope : AGR : Aggregate Reef&quot;         
## [13] &quot;Forereef : SCR : Sand with Scattered Coral/Rock&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ok</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>dori_obis_ok <span class="ot">&lt;-</span> dori_obis1 <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>flags <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;no_depth,on_land&quot;</span>, <span class="st">&quot;on_land&quot;</span>, <span class="st">&quot;on_land,depth_exceeds_bath&quot;</span>, <span class="st">&quot;depth_exceeds_bath,on_land&quot;</span>),</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(datasetName),</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>waterBody <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;North America Atlantic&quot;</span>, <span class="st">&quot;atlantique&quot;</span>, <span class="cn">NA</span>)) </span></code></pre></div>
<p>Podemos usar um mapa para verificar melhor as ocorrências também.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dori_obis_ok, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> waterBody)) <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Parece tudo ok, e chegamos a 137 ocorrências potenciais.</p>
<p>Por fim, vamos unir todas as ocorrências, checar se existem duplicatas e plotar o resultado final.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unir GBIF e OBIS</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ver diferencas</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(dori_gbif_ok), <span class="fu">names</span>(dori_obis_ok))</span></code></pre></div>
<pre><code>## [1] &quot;acceptedScientificName&quot; &quot;issues&quot;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(dori_obis_ok), <span class="fu">names</span>(dori_gbif_ok))</span></code></pre></div>
<pre><code>## [1] &quot;bathymetry&quot; &quot;flags&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dori_gbif_ok <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">repo =</span> <span class="fu">paste0</span>(<span class="st">&quot;gbif&quot;</span>, <span class="fu">row.names</span>(.))), </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>                      dori_obis_ok <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">repo =</span> <span class="fu">paste0</span>(<span class="st">&quot;obis&quot;</span>, <span class="fu">row.names</span>(.)))) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">&quot;repo&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(decimalLongitude, decimalLatitude, depth) <span class="sc">%&gt;%</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;occ&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">&quot;occ&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;datasetName&quot;</span>, <span class="st">&quot;rn&quot;</span>), <span class="at">sep =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scientificName =</span> <span class="st">&quot;Paracanthurus hepatus&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>rn)</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co"># mapear ocorrencias</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> all_data, <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, <span class="at">color =</span> datasetName)) <span class="sc">+</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#theme(legend.title = element_blank()) +</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-13-1.png" width="672" /> <br><br></p>
<p>O último passo é guardarmos os dados baixados e tratados para economizar tempo no próximo uso, mas o mais importante já está registrado, o passo-a-passo de como chegamos até os dados usados nas análises.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(all_data, <span class="st">&quot;data/occ_GBIF-OBIS_par_hepa.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="extra-classificação-automática-de-pontos" class="section level3" number="0.3.2">
<h3 number="3.3.2"><span class="header-section-number">3.3.2</span> EXTRA: Classificação automática de pontos</h3>
<div id="função-caseira" class="section level4" number="0.3.2.1">
<h4 number="3.3.2.1"><span class="header-section-number">3.3.2.1</span> Função ‘caseira’</h4>
<p>Podemos usar outras ferramentas mais refinadas para nos ajudar a detectar ocorrências suspeitas, como as encontradas nos pacotes <code>CoordinateCleaner</code>, <code>obistools</code>, <code>scrubr</code> e <code>biogeo</code>. Além disso, podemos criar nossas próprias funções para auxiliar nessa tarefa.</p>
<p>Abaixo, vamos utilizar os dados baixados do <code>GBIF</code> antes da limpeza já realizada acima. Aqui vou começar a exemplificar com uma função simples criada por mim. Esta função utiliza as coordenadas para calcular o centróide (ponto médio de todas as ocorrências) e, a partir dele, a distância de cada ponto até o centróide. Esse princípio se baseia em propriedades de conectividade de populações contíguas, então quanto mais distantes (neste caso as muito distantes) maior a chance de termos uma ocorrência suspeita da mesma espécie. <em>Atenção: isso é apenas uma ferramenta para classificar as ocorrências! A decisão de filtrar ou não os pontos suspeitos vai depender do seu conhecimento ou da literatura a respeito dos habitats e regiões de ocorrência da espécie-alvo</em>.</p>
<p>Inicialmente, vamos carregar a função <code>flag_outlier</code> que está em uma rotina auxiliar separada usando a função <code>source</code>. E, em seguida, aplicaremos a função e vamos plotar um mapa para avaliar as ocorrências com <em>flag</em> de <em>outlier</em>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&#39;functions/aux_functions.R&#39;</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># classificar ocorrências</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>marcados <span class="ot">&lt;-</span> dori_gbif<span class="sc">$</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(scientificName, decimalLongitude, decimalLatitude, datasetName) <span class="sc">%&gt;%</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flag_outlier</span>(., <span class="st">&quot;Paracanthurus hepatus (Linnaeus, 1766)&quot;</span>)</span></code></pre></div>
<pre><code>##     dist_centroid                         scientificName decimalLongitude decimalLatitude
## 1       3216591.9 Paracanthurus hepatus (Linnaeus, 1766)        153.56667      -27.400000
## 2       3303368.3 Paracanthurus hepatus (Linnaeus, 1766)        153.62837      -28.611278
## 3      10075567.7 Paracanthurus hepatus (Linnaeus, 1766)         39.36794       -4.656524
## 4       2196446.3 Paracanthurus hepatus (Linnaeus, 1766)        148.44080      -17.636875
## 5       3798337.1 Paracanthurus hepatus (Linnaeus, 1766)        122.00093       25.015492
## 6      10054944.8 Paracanthurus hepatus (Linnaeus, 1766)         39.30729       -6.353158
## 7       1926931.9 Paracanthurus hepatus (Linnaeus, 1766)        118.86434        4.595825
## 8       2159497.7 Paracanthurus hepatus (Linnaeus, 1766)        147.69919      -18.287067
## 9       1594557.5 Paracanthurus hepatus (Linnaeus, 1766)        144.10688      -13.647350
## 10      1596757.3 Paracanthurus hepatus (Linnaeus, 1766)        116.06586       -8.349668
## 11      3564399.8 Paracanthurus hepatus (Linnaeus, 1766)        121.49028       22.680278
## 12      3271130.2 Paracanthurus hepatus (Linnaeus, 1766)        153.57911      -28.196141
## 13      3828350.3 Paracanthurus hepatus (Linnaeus, 1766)        127.40389       26.189035
## 14      8172956.1 Paracanthurus hepatus (Linnaeus, 1766)         55.21915      -21.058230
## 15       667132.7 Paracanthurus hepatus (Linnaeus, 1766)        130.55572       -2.244373
## 16      1654108.1 Paracanthurus hepatus (Linnaeus, 1766)        115.54442       -8.727807
## 17       671517.7 Paracanthurus hepatus (Linnaeus, 1766)        130.56772       -2.204717
## 18      3389187.5 Paracanthurus hepatus (Linnaeus, 1766)        153.26482      -30.204320
## 19      2937481.8 Paracanthurus hepatus (Linnaeus, 1766)        152.70748      -24.113638
## 20      3063686.9 Paracanthurus hepatus (Linnaeus, 1766)        145.57996       15.022028
## 21     10055333.4 Paracanthurus hepatus (Linnaeus, 1766)         39.38253       -5.816751
## 22     10045889.2 Paracanthurus hepatus (Linnaeus, 1766)         39.46530       -5.840112
## 23      3952156.3 Paracanthurus hepatus (Linnaeus, 1766)        128.52111       27.388889
## 24      2937683.9 Paracanthurus hepatus (Linnaeus, 1766)        152.70794      -24.116345
## 25      5348663.9 Paracanthurus hepatus (Linnaeus, 1766)        179.11049      -17.076469
## 26      5348604.9 Paracanthurus hepatus (Linnaeus, 1766)        179.10984      -17.077753
## 27      2744035.8 Paracanthurus hepatus (Linnaeus, 1766)        105.66871      -10.423094
## 28      3378240.2 Paracanthurus hepatus (Linnaeus, 1766)        153.38925      -29.927833
## 29      2744777.4 Paracanthurus hepatus (Linnaeus, 1766)        105.66045      -10.393100
## 30      1215224.5 Paracanthurus hepatus (Linnaeus, 1766)        119.52971       -8.481814
## 31      3043180.5 Paracanthurus hepatus (Linnaeus, 1766)        158.20064       -8.612647
## 32      1270660.7 Paracanthurus hepatus (Linnaeus, 1766)        124.73795        1.615687
## 33      2633512.1 Paracanthurus hepatus (Linnaeus, 1766)        120.97290       13.522638
## 34      2632290.3 Paracanthurus hepatus (Linnaeus, 1766)        120.99116       13.518570
## 35      1906082.7 Paracanthurus hepatus (Linnaeus, 1766)        118.63001        4.116129
## 36      5950179.4 Paracanthurus hepatus (Linnaeus, 1766)       -176.46176        0.186880
## 37      5945342.1 Paracanthurus hepatus (Linnaeus, 1766)       -176.62003        0.798243
## 38      3303416.5 Paracanthurus hepatus (Linnaeus, 1766)        153.62923      -28.611023
## 39      7608314.2 Paracanthurus hepatus (Linnaeus, 1766)       -162.46472        6.384268
## 40      1903926.0 Paracanthurus hepatus (Linnaeus, 1766)        145.99662      -16.428461
## 41      3945239.9 Paracanthurus hepatus (Linnaeus, 1766)        128.55778       27.328333
## 42     10073341.7 Paracanthurus hepatus (Linnaeus, 1766)         39.37970       -4.714799
## 43      5434578.7 Paracanthurus hepatus (Linnaeus, 1766)        179.94055      -16.767523
## 44      1905929.0 Paracanthurus hepatus (Linnaeus, 1766)        118.62500        4.109330
## 45     10249788.5 Paracanthurus hepatus (Linnaeus, 1766)         35.08851      -21.151370
## 46     10167816.5 Paracanthurus hepatus (Linnaeus, 1766)         35.40329      -23.817600
## 47      3378518.1 Paracanthurus hepatus (Linnaeus, 1766)        153.39147      -29.929429
## 48      8282382.2 Paracanthurus hepatus (Linnaeus, 1766)         55.72781       -4.279653
## 49      2937520.0 Paracanthurus hepatus (Linnaeus, 1766)        152.71023      -24.110377
## 50       850697.5 Paracanthurus hepatus (Linnaeus, 1766)        130.63281       -0.584608
## 51      5339701.7 Paracanthurus hepatus (Linnaeus, 1766)        178.98593      -17.575953
## 52      3048554.0 Paracanthurus hepatus (Linnaeus, 1766)        145.56811       14.865178
## 53      3043863.1 Paracanthurus hepatus (Linnaeus, 1766)        145.53007       14.838945
## 54      2854794.9 Paracanthurus hepatus (Linnaeus, 1766)        144.76383       13.282353
## 55      3370062.9 Paracanthurus hepatus (Linnaeus, 1766)        145.79179       18.169705
## 56      3360908.9 Paracanthurus hepatus (Linnaeus, 1766)        145.76129       18.090721
## 57      3365640.3 Paracanthurus hepatus (Linnaeus, 1766)        145.75369       18.144987
## 58      2955066.9 Paracanthurus hepatus (Linnaeus, 1766)        145.16840       14.108882
## 59      2967670.8 Paracanthurus hepatus (Linnaeus, 1766)        145.28545       14.169204
## 60      3099643.6 Paracanthurus hepatus (Linnaeus, 1766)        145.79259       15.274841
## 61      3070999.4 Paracanthurus hepatus (Linnaeus, 1766)        145.65608       15.052066
## 62      3058025.5 Paracanthurus hepatus (Linnaeus, 1766)        145.63037       14.927633
## 63      3062996.8 Paracanthurus hepatus (Linnaeus, 1766)        145.58553       15.010917
## 64      3086771.4 Paracanthurus hepatus (Linnaeus, 1766)        145.70396       15.192456
## 65      3058706.3 Paracanthurus hepatus (Linnaeus, 1766)        145.64574       14.924998
## 66     10362387.7 Paracanthurus hepatus (Linnaeus, 1766)         32.67988      -27.535837
## 67      3360313.5 Paracanthurus hepatus (Linnaeus, 1766)        145.74479       18.093946
## 68      3354039.7 Paracanthurus hepatus (Linnaeus, 1766)        145.70588       18.050178
## 69      3358479.1 Paracanthurus hepatus (Linnaeus, 1766)        145.72653       18.085108
## 70      3079914.8 Paracanthurus hepatus (Linnaeus, 1766)        145.67886       15.134210
## 71      3079214.4 Paracanthurus hepatus (Linnaeus, 1766)        145.70275       15.111052
## 72      3079244.0 Paracanthurus hepatus (Linnaeus, 1766)        145.69897       15.113834
## 73      3232538.6 Paracanthurus hepatus (Linnaeus, 1766)        145.77638       16.718400
## 74      3945739.4 Paracanthurus hepatus (Linnaeus, 1766)        141.47400       25.752000
## 75      2314507.1 Paracanthurus hepatus (Linnaeus, 1766)        150.71890       -2.757490
## 76      2652686.0 Paracanthurus hepatus (Linnaeus, 1766)        120.91363       13.686601
## 77     10055373.4 Paracanthurus hepatus (Linnaeus, 1766)         39.38162       -5.820478
## 78      1906249.3 Paracanthurus hepatus (Linnaeus, 1766)        118.63332        4.121438
## 79      8166128.4 Paracanthurus hepatus (Linnaeus, 1766)         55.27931      -21.170370
## 80      8165912.9 Paracanthurus hepatus (Linnaeus, 1766)         55.27962      -21.205960
## 81      8165983.5 Paracanthurus hepatus (Linnaeus, 1766)         55.27898      -21.205150
## 82      8173578.6 Paracanthurus hepatus (Linnaeus, 1766)         55.21433      -21.035070
## 83      8164421.4 Paracanthurus hepatus (Linnaeus, 1766)         55.29266      -21.233100
## 84      8172403.8 Paracanthurus hepatus (Linnaeus, 1766)         55.22368      -21.073840
## 85      8163476.2 Paracanthurus hepatus (Linnaeus, 1766)         55.30145      -21.239710
## 86       665440.2 Paracanthurus hepatus (Linnaeus, 1766)        130.64465       -2.260250
## 87       666588.9 Paracanthurus hepatus (Linnaeus, 1766)        130.62375       -2.249608
## 88      6562521.8 Paracanthurus hepatus (Linnaeus, 1766)       -169.49334      -14.273857
## 89      5348663.8 Paracanthurus hepatus (Linnaeus, 1766)        179.11049      -17.076470
## 90      5432879.6 Paracanthurus hepatus (Linnaeus, 1766)        179.92354      -16.783458
## 91      8145598.7 Paracanthurus hepatus (Linnaeus, 1766)         55.46860      -21.349500
## 92     10206097.8 Paracanthurus hepatus (Linnaeus, 1766)         35.45493      -21.484390
## 93      1918402.0 Paracanthurus hepatus (Linnaeus, 1766)        146.02884      -16.657679
## 94      3026658.9 Paracanthurus hepatus (Linnaeus, 1766)        152.90847      -25.288066
## 95      4289713.3 Paracanthurus hepatus (Linnaeus, 1766)        130.15250       30.487778
## 96      1235008.5 Paracanthurus hepatus (Linnaeus, 1766)        119.35000       -8.400000
## 97     10203752.2 Paracanthurus hepatus (Linnaeus, 1766)         35.50786      -21.319020
## 98      3672468.3 Paracanthurus hepatus (Linnaeus, 1766)        124.09048       24.306446
## 99      8266612.9 Paracanthurus hepatus (Linnaeus, 1766)         55.86569       -4.321165
## 100     5347982.7 Paracanthurus hepatus (Linnaeus, 1766)        179.10468      -17.068420
## 101     1210832.1 Paracanthurus hepatus (Linnaeus, 1766)        119.57251       -8.689442
## 102     5625826.7 Paracanthurus hepatus (Linnaeus, 1766)       -178.17400      -14.235900
## 103     5625826.7 Paracanthurus hepatus (Linnaeus, 1766)       -178.17400      -14.235900
## 104     8126087.3 Paracanthurus hepatus (Linnaeus, 1766)         55.65609      -21.366690
## 105     8123314.2 Paracanthurus hepatus (Linnaeus, 1766)         55.68264      -21.371320
## 106     8117726.6 Paracanthurus hepatus (Linnaeus, 1766)         55.73661      -21.370350
## 107     3846105.1 Paracanthurus hepatus (Linnaeus, 1766)        126.78845       26.291180
## 108     8069403.4 Paracanthurus hepatus (Linnaeus, 1766)       -157.42781        1.872135
## 109     5950267.4 Paracanthurus hepatus (Linnaeus, 1766)       -176.46102        0.187242
## 110     5950735.3 Paracanthurus hepatus (Linnaeus, 1766)       -176.45731        0.190310
## 111     5947305.1 Paracanthurus hepatus (Linnaeus, 1766)       -176.48886        0.191557
## 112     5945109.1 Paracanthurus hepatus (Linnaeus, 1766)       -176.62678        0.822466
## 113     5945083.8 Paracanthurus hepatus (Linnaeus, 1766)       -176.62671        0.820899
## 114     5348735.6 Paracanthurus hepatus (Linnaeus, 1766)        179.10813      -17.116486
## 115     5348126.9 Paracanthurus hepatus (Linnaeus, 1766)        179.10590      -17.070283
## 116     5347290.3 Paracanthurus hepatus (Linnaeus, 1766)        179.09860      -17.062497
## 117     6550156.5 Paracanthurus hepatus (Linnaeus, 1766)       -169.61060      -14.151863
## 118     6559811.3 Paracanthurus hepatus (Linnaeus, 1766)       -169.51954      -14.224068
## 119     6448641.6 Paracanthurus hepatus (Linnaeus, 1766)       -170.54882      -14.278573
## 120     6448795.3 Paracanthurus hepatus (Linnaeus, 1766)       -170.54739      -14.279030
## 121     6434679.9 Paracanthurus hepatus (Linnaeus, 1766)       -170.67885      -14.241373
## 122     6448990.3 Paracanthurus hepatus (Linnaeus, 1766)       -170.54548      -14.285210
## 123     6453368.7 Paracanthurus hepatus (Linnaeus, 1766)       -170.50510      -14.273254
## 124    18428318.6 Paracanthurus hepatus (Linnaeus, 1766)        -61.77100       16.135100
## 125    10206035.3 Paracanthurus hepatus (Linnaeus, 1766)         35.42359      -21.660010
## 126    10204153.4 Paracanthurus hepatus (Linnaeus, 1766)         35.38154      -21.991250
## 127     7612392.4 Paracanthurus hepatus (Linnaeus, 1766)       -162.42674        6.382461
## 128    10361808.0 Paracanthurus hepatus (Linnaeus, 1766)         32.68670      -27.532000
## 129     3692822.1 Paracanthurus hepatus (Linnaeus, 1766)        123.79669       24.436835
## 130      381105.6 Paracanthurus hepatus (Linnaeus, 1766)        132.74726       -5.611260
## 131    10362064.1 Paracanthurus hepatus (Linnaeus, 1766)         32.68540      -27.525900
## 132     1969642.5 Paracanthurus hepatus (Linnaeus, 1766)        147.10760      -15.484300
## 133     1207313.9 Paracanthurus hepatus (Linnaeus, 1766)        119.60195       -8.537167
## 134     1212267.5 Paracanthurus hepatus (Linnaeus, 1766)        119.55653       -8.475600
## 135      431579.5 Paracanthurus hepatus (Linnaeus, 1766)        131.65190       -4.530000
## 136      365027.2 Paracanthurus hepatus (Linnaeus, 1766)        131.99690       -5.304400
## 137     3715723.3 Paracanthurus hepatus (Linnaeus, 1766)        122.96361       24.472500
## 138     9307836.3 Paracanthurus hepatus (Linnaeus, 1766)         45.27593      -12.872840
## 139    16259901.6 Paracanthurus hepatus (Linnaeus, 1766)        -81.18580       23.212100
## 140     9334776.7 Paracanthurus hepatus (Linnaeus, 1766)         45.05137      -12.672960
## 141    10073868.9 Paracanthurus hepatus (Linnaeus, 1766)         39.37488       -4.714922
## 142     8171629.0 Paracanthurus hepatus (Linnaeus, 1766)         55.23410      -21.015540
## 143     8171637.0 Paracanthurus hepatus (Linnaeus, 1766)         55.23405      -21.015000
## 144     1736027.8 Paracanthurus hepatus (Linnaeus, 1766)        134.21884        6.986900
## 145     1751944.4 Paracanthurus hepatus (Linnaeus, 1766)        134.22094        7.134422
## 146    10361985.5 Paracanthurus hepatus (Linnaeus, 1766)         32.68732      -27.520850
## 147    10362065.6 Paracanthurus hepatus (Linnaeus, 1766)         32.68600      -27.523100
## 148     5545681.6 Paracanthurus hepatus (Linnaeus, 1766)       -179.05644      -17.408093
## 149     3046445.1 Paracanthurus hepatus (Linnaeus, 1766)        145.56591       14.843660
## 150     3369241.2 Paracanthurus hepatus (Linnaeus, 1766)        145.81155       18.149654
## 151     2969142.9 Paracanthurus hepatus (Linnaeus, 1766)        145.26090       14.201462
## 152     3098736.9 Paracanthurus hepatus (Linnaeus, 1766)        145.78511       15.269845
## 153     3100565.3 Paracanthurus hepatus (Linnaeus, 1766)        145.82889       15.261225
## 154     3101897.1 Paracanthurus hepatus (Linnaeus, 1766)        145.82971       15.275189
## 155     3101445.4 Paracanthurus hepatus (Linnaeus, 1766)        145.83191       15.268836
## 156     3099296.9 Paracanthurus hepatus (Linnaeus, 1766)        145.81463       15.256714
## 157     3100995.2 Paracanthurus hepatus (Linnaeus, 1766)        145.80272       15.282955
## 158     3099779.0 Paracanthurus hepatus (Linnaeus, 1766)        145.79354       15.275694
## 159     3079316.1 Paracanthurus hepatus (Linnaeus, 1766)        145.69629       15.116363
## 160     3059978.9 Paracanthurus hepatus (Linnaeus, 1766)        145.65172       14.934944
## 161     3101888.2 Paracanthurus hepatus (Linnaeus, 1766)        145.82731       15.276654
## 162     3100721.1 Paracanthurus hepatus (Linnaeus, 1766)        145.80069       15.281291
## 163     3067607.1 Paracanthurus hepatus (Linnaeus, 1766)        145.67423       15.003307
## 164     8266772.3 Paracanthurus hepatus (Linnaeus, 1766)         55.86796       -4.292379
## 165     1195423.1 Paracanthurus hepatus (Linnaeus, 1766)        119.71143       -8.636633
## 166     3316646.1 Paracanthurus hepatus (Linnaeus, 1766)        145.81372       17.591924
##                                                                                                                                                                                       datasetName
## 1                                                                                                                                                         iNaturalist research-grade observations
## 2                                                                                                                                                         iNaturalist research-grade observations
## 3                                                                                                                                                         iNaturalist research-grade observations
## 4                                                                                                                                                         iNaturalist research-grade observations
## 5                                                                                                                                                         iNaturalist research-grade observations
## 6                                                                                                                                                         iNaturalist research-grade observations
## 7                                                                                                                                                         iNaturalist research-grade observations
## 8                                                                                                                                                         iNaturalist research-grade observations
## 9                                                                                                                                                                                            &lt;NA&gt;
## 10                                                                                                                                                        iNaturalist research-grade observations
## 11                                                                                                                                                        iNaturalist research-grade observations
## 12                                                                                                                                                        iNaturalist research-grade observations
## 13                                                                                                                                                        iNaturalist research-grade observations
## 14                                                                                                                                                                                           &lt;NA&gt;
## 15                                                                                                                                                        iNaturalist research-grade observations
## 16                                                                                                                                                        iNaturalist research-grade observations
## 17                                                                                                                                                        iNaturalist research-grade observations
## 18                                                                                                                                                        iNaturalist research-grade observations
## 19                                                                                                                                                        iNaturalist research-grade observations
## 20                                                                                                                                                        iNaturalist research-grade observations
## 21                                                                                                                                                        iNaturalist research-grade observations
## 22                                                                                                                                                        iNaturalist research-grade observations
## 23                                                                                                                                                                                           &lt;NA&gt;
## 24                                                                                                                                                        iNaturalist research-grade observations
## 25                                                                                                                                                        iNaturalist research-grade observations
## 26                                                                                                                                                        iNaturalist research-grade observations
## 27                                                                                                                                                        iNaturalist research-grade observations
## 28                                                                                                                                                        iNaturalist research-grade observations
## 29                                                                                                                                                        iNaturalist research-grade observations
## 30                                                                                                                                                        iNaturalist research-grade observations
## 31                                                                                                                                                        iNaturalist research-grade observations
## 32                                                                                                                                                        iNaturalist research-grade observations
## 33                                                                                                                                                        iNaturalist research-grade observations
## 34                                                                                                                                                        iNaturalist research-grade observations
## 35                                                                                                                                                        iNaturalist research-grade observations
## 36  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 37  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 38                                                                                                                                                        iNaturalist research-grade observations
## 39  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 40                                                                                                                                                        iNaturalist research-grade observations
## 41                                                                                                                                                                                           &lt;NA&gt;
## 42                                                                                                                                                        iNaturalist research-grade observations
## 43                                                                                                                                                        iNaturalist research-grade observations
## 44                                                                                                                                                       Diveboard - Scuba diving citizen science
## 45                                                                                                                                                   Instituto Nacional de Investigação Pesqueira
## 46                                                                                                                                                   Instituto Nacional de Investigação Pesqueira
## 47                                                                                                                                                        iNaturalist research-grade observations
## 48                                                                                                                                                                                           &lt;NA&gt;
## 49                                                                                                                                                        iNaturalist research-grade observations
## 50                                                                                                                                                        iNaturalist research-grade observations
## 51                                                                                                                                                        iNaturalist research-grade observations
## 52  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 53  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 54  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 55  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 56  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 57  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 58  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 59  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 60  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 61  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 62  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 63  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 64  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 65  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 66                                                                                                                                                        iNaturalist research-grade observations
## 67  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 68  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 69  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 70  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 71  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 72  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 73  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 74                                                                                                                                                                                           &lt;NA&gt;
## 75                                                                                                                                                        iNaturalist research-grade observations
## 76                                                                                                                                                        iNaturalist research-grade observations
## 77                                                                                                                                                        iNaturalist research-grade observations
## 78                                                                                                                                                        iNaturalist research-grade observations
## 79                                                                                                                                                                                           &lt;NA&gt;
## 80                                                                                                                                                                                           &lt;NA&gt;
## 81                                                                                                                                                                                           &lt;NA&gt;
## 82                                                                                                                                                                                           &lt;NA&gt;
## 83                                                                                                                                                                                           &lt;NA&gt;
## 84                                                                                                                                                                                           &lt;NA&gt;
## 85                                                                                                                                                                                           &lt;NA&gt;
## 86                                                                                                                                                        iNaturalist research-grade observations
## 87                                                                                                                                                        iNaturalist research-grade observations
## 88  NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 89                                                                                                                                                        iNaturalist research-grade observations
## 90                                                                                                                                                        iNaturalist research-grade observations
## 91                                                                                                                                                                                           &lt;NA&gt;
## 92                                                                                                                                                   Instituto Nacional de Investigação Pesqueira
## 93                                                                                                                                                        iNaturalist research-grade observations
## 94                                                                                                                                                                                           &lt;NA&gt;
## 95                                                                                                                                                                                           &lt;NA&gt;
## 96                                                                                                                                                       Diveboard - Scuba diving citizen science
## 97                                                                                                                                                   Instituto Nacional de Investigação Pesqueira
## 98                                                                                                                                                        iNaturalist research-grade observations
## 99                                                                                                                                                        iNaturalist research-grade observations
## 100                                                                                                                                                       iNaturalist research-grade observations
## 101                                                                                                                                                       iNaturalist research-grade observations
## 102                                                                                                                                                                           NMNH Extant Biology
## 103                                                                                                                                                                                          &lt;NA&gt;
## 104                                                                                                                                                                                          &lt;NA&gt;
## 105                                                                                                                                                                                          &lt;NA&gt;
## 106                                                                                                                                                                                          &lt;NA&gt;
## 107                                                                                                                                                       iNaturalist research-grade observations
## 108                                                                                                                                                       iNaturalist research-grade observations
## 109 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 110 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 111 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 112 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 113 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 114                                                                                                                                                       iNaturalist research-grade observations
## 115                                                                                                                                                       iNaturalist research-grade observations
## 116                                                                                                                                                       iNaturalist research-grade observations
## 117 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 118 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 119 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 120 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 121 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 122 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 123 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 124                                                                                                                                                      Diveboard - Scuba diving citizen science
## 125                                                                                                                                                  Instituto Nacional de Investigação Pesqueira
## 126                                                                                                                                                  Instituto Nacional de Investigação Pesqueira
## 127 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 128                                                                                                                                                                                          &lt;NA&gt;
## 129                                                                                                                                                       iNaturalist research-grade observations
## 130                                                                                                                                                       iNaturalist research-grade observations
## 131                                                                                                                                                                                          &lt;NA&gt;
## 132                                                                                                                                                                                          &lt;NA&gt;
## 133                                                                                                                                                       iNaturalist research-grade observations
## 134                                                                                                                                                       iNaturalist research-grade observations
## 135                                                                                                                                                                                          &lt;NA&gt;
## 136                                                                                                                                                                                          &lt;NA&gt;
## 137                                                                                                                                                                                          &lt;NA&gt;
## 138                                                                                                                                                                                          &lt;NA&gt;
## 139                                                                                                                                                      Diveboard - Scuba diving citizen science
## 140                                                                                                                                                                                          &lt;NA&gt;
## 141                                                                                                                                                       iNaturalist research-grade observations
## 142                                                                                                                                                                                          &lt;NA&gt;
## 143                                                                                                                                                                                          &lt;NA&gt;
## 144                                                                                                                                                       iNaturalist research-grade observations
## 145                                                                                                                                                       iNaturalist research-grade observations
## 146                                                                                                                                                                                          &lt;NA&gt;
## 147                                                                                                                                                                                          &lt;NA&gt;
## 148                                                                                                                                                       iNaturalist research-grade observations
## 149 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 150 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 151 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 152 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 153 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 154 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 155 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 156 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 157 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 158 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 159 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 160 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 161 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 162 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 163 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
## 164                                                                                                                                                       iNaturalist research-grade observations
## 165                                                                                                                                                       iNaturalist research-grade observations
## 166 NOAA Pacific Islands Fisheries Science Center, Ecosystem Sciences Division, National Coral Reef Monitoring Program: Stratified random surveys (StRS) of reef fish in the U.S. Pacific Islands
##            flag
## 1            OK
## 2            OK
## 3            OK
## 4            OK
## 5            OK
## 6            OK
## 7            OK
## 8            OK
## 9            OK
## 10           OK
## 11           OK
## 12           OK
## 13           OK
## 14           OK
## 15           OK
## 16           OK
## 17           OK
## 18           OK
## 19           OK
## 20           OK
## 21           OK
## 22           OK
## 23           OK
## 24           OK
## 25           OK
## 26           OK
## 27           OK
## 28           OK
## 29           OK
## 30           OK
## 31           OK
## 32           OK
## 33           OK
## 34           OK
## 35           OK
## 36           OK
## 37           OK
## 38           OK
## 39           OK
## 40           OK
## 41           OK
## 42           OK
## 43           OK
## 44           OK
## 45  check &gt; Q90
## 46           OK
## 47           OK
## 48           OK
## 49           OK
## 50           OK
## 51           OK
## 52           OK
## 53           OK
## 54           OK
## 55           OK
## 56           OK
## 57           OK
## 58           OK
## 59           OK
## 60           OK
## 61           OK
## 62           OK
## 63           OK
## 64           OK
## 65           OK
## 66  check &gt; Q90
## 67           OK
## 68           OK
## 69           OK
## 70           OK
## 71           OK
## 72           OK
## 73           OK
## 74           OK
## 75           OK
## 76           OK
## 77           OK
## 78           OK
## 79           OK
## 80           OK
## 81           OK
## 82           OK
## 83           OK
## 84           OK
## 85           OK
## 86           OK
## 87           OK
## 88           OK
## 89           OK
## 90           OK
## 91           OK
## 92  check &gt; Q90
## 93           OK
## 94           OK
## 95           OK
## 96           OK
## 97           OK
## 98           OK
## 99           OK
## 100          OK
## 101          OK
## 102          OK
## 103          OK
## 104          OK
## 105          OK
## 106          OK
## 107          OK
## 108          OK
## 109          OK
## 110          OK
## 111          OK
## 112          OK
## 113          OK
## 114          OK
## 115          OK
## 116          OK
## 117          OK
## 118          OK
## 119          OK
## 120          OK
## 121          OK
## 122          OK
## 123          OK
## 124 check &gt; Q95
## 125 check &gt; Q90
## 126          OK
## 127          OK
## 128 check &gt; Q90
## 129          OK
## 130          OK
## 131 check &gt; Q90
## 132          OK
## 133          OK
## 134          OK
## 135          OK
## 136          OK
## 137          OK
## 138          OK
## 139 check &gt; Q95
## 140          OK
## 141          OK
## 142          OK
## 143          OK
## 144          OK
## 145          OK
## 146 check &gt; Q90
## 147 check &gt; Q90
## 148          OK
## 149          OK
## 150          OK
## 151          OK
## 152          OK
## 153          OK
## 154          OK
## 155          OK
## 156          OK
## 157          OK
## 158          OK
## 159          OK
## 160          OK
## 161          OK
## 162          OK
## 163          OK
## 164          OK
## 165          OK
## 166          OK
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 142 rows ]</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapa</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> marcados, </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, </span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> flag)) <span class="sc">+</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-14-1.png" width="672" /> <br><br></p>
<p>Podemos notar no mapa acima que as ocorrencias acima do 90ésimo quantil são muito similares às já filtradas acima com base no <code>waterBody</code>, mas se já não tivéssemos a informação da ocorrência restrita da espécie ao Indo-Pacífico, já poderíamos desconfiar destas ocorrências tão longe, os <em>outliers</em>. Investigando o datasetName destas ocorrências com <em>flags</em> também chegaríamos a mesma conclusão de excluir os dados associados ao <code>Diveboard - Scuba diving citizen science</code> e sem valor de <code>datasetName</code>. <br><br></p>
</div>
<div id="pacote-scrubr" class="section level4" number="0.3.2.2">
<h4 number="3.3.2.2"><span class="header-section-number">3.3.2.2</span> Pacote <code>scrubr</code></h4>
<p>O pacote <code>scrubr</code> possui algumas funções úteis para indicar problemas com coordenadas com elementos faltantes (<code>coord_incomplete</code>), coordenadas impossíveis (<code>coord_impossible</code>) e coordenadas duplicadas (<code>dedup</code>). Este último é estimado em um raio de tolerância e mais útil para análises em escala mais grosseira ou quando o informações a serem correlacionadas estão em escala maior. Podemos inclusive aplicá-las sequencialmente, pois o padrão das funções é excluir as ocorrências suspeitas, mas <strong>não recomendo seguir cegamente métodos automáticos de exclusão de dados!</strong></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scrubr)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># usando os dados com flag</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>data_scrubr <span class="ot">&lt;-</span> marcados <span class="sc">%&gt;%</span> </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dframe</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_impossible</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_incomplete</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_unlikely</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dedup</span>()</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co"># mapa</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> data_scrubr, </span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), </span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> marcados <span class="sc">%&gt;%</span> </span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(flag <span class="sc">!=</span> <span class="st">&quot;OK&quot;</span>), </span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), </span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">shape =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/scrubr-1.png" width="672" /> <br><br></p>
<p>Note que as ocorrências indicadas com uma cruz foram mantidas pelo <code>scrubr</code>, e isso reforça o papel de quem analisa em julgar os pontos suspeitos. <br><br></p>
</div>
<div id="pacote-obistools" class="section level4" number="0.3.2.3">
<h4 number="3.3.2.3"><span class="header-section-number">3.3.2.3</span> pacote <code>obistools</code></h4>
<p>Vale lembrar que o <code>OBIS</code> é um repositório de dados marinhos, então as ferramentas tem melhor uso para dados desta natureza. Inclusive uma das funções do pacote (<code>check_onland</code>) checa coordenadas em terra, sejam ilhas ou continentes. Aqui vamos testar a função <code>check_outliers_species</code> que tem um princípio semelhante à nossa função caseira <code>flag_outliers</code>, mas é baseada no <strong>median absolute deviation (MAD)</strong> e no <strong>interquartile range (IQR)</strong>, parâmetros que podem ser ajustados na função. OBS: Algumas vezes pode ocorrer uma falha de conexão com o servidor, então deve-se insistir um pouco.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(obistools)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># dori_obis %&gt;% </span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   dplyr::select(decimalLongitude, decimalLatitude, scientificNameID) %&gt;% </span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   distinct() %&gt;% </span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   check_outliers_species(., report=TRUE)</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># usando essa configuração chegamos a valores próximos aos da limpeza manual</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>dori_obis <span class="sc">%&gt;%</span> </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(decimalLongitude, decimalLatitude, scientificNameID) <span class="sc">%&gt;%</span> </span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">check_outliers_dataset</span>(., <span class="at">report =</span> <span class="cn">FALSE</span>, <span class="at">iqr_coef =</span> <span class="dv">1</span>, <span class="at">mad_coef =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code></pre></div>
<pre><code>## [1] 11  3</code></pre>
<p><br><br></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">data =</span> world, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> marcados <span class="sc">%&gt;%</span> </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(flag <span class="sc">!=</span> <span class="st">&quot;OK&quot;</span>), </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude, </span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> datasetName)) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;latitude&quot;</span>, </span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;Paracanthurus hepatus&quot;</span>)))</span></code></pre></div>
<p><img src="atividade3_files/figure-html/unnamed-chunk-16-1.png" width="672" /> <br><br></p>
<p>Por fim, vamos testar o pacote <code>CoordinateCleaner</code>. Nele devemos especificar os campos correspondentes na função <code>clean_coordinates</code>.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(CoordinateCleaner)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>flags <span class="ot">&lt;-</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_coordinates</span>(</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> marcados,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">lon =</span> <span class="st">&quot;decimalLongitude&quot;</span>,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> <span class="st">&quot;decimalLatitude&quot;</span>,</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">species =</span> <span class="st">&quot;scientificName&quot;</span>,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">tests =</span> <span class="fu">c</span>(<span class="st">&quot;equal&quot;</span>, <span class="st">&quot;gbif&quot;</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;zeros&quot;</span>, <span class="st">&quot;seas&quot;</span>)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><br><br></p>
<p>Neste caso, nenhuma ocorrência foi marcada como suspeita. Moral da história, sempre temos que conferir todos os dados, mas as ferramentas ajudam muito nesta tarefa! ***</p>
</div>
</div>
</div>
</div>

<p>
    <i>Colabore, compartilhe, e cite as fontes!</i>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
